<!doctype html>
<html lang="en-US" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-zh-CN/Seeed_Elderly/reSpeaker/ReSpeaker_Mic_Array_v2.0" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">ReSpeaker Mic Array v2.0 | Seeed Studio Wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://wiki.seeedstudio.com/cn/ReSpeaker_Mic_Array_v2.0/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="ReSpeaker Mic Array v2.0 | Seeed Studio Wiki"><meta data-rh="true" name="description" content="ReSpeaker Mic Array v2.0"><meta data-rh="true" property="og:description" content="ReSpeaker Mic Array v2.0"><meta data-rh="true" name="keywords" content="ReSpeaker"><meta data-rh="true" property="og:image" content="https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png"><meta data-rh="true" name="twitter:image" content="https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png"><link data-rh="true" rel="icon" href="/img/S.png"><link data-rh="true" rel="canonical" href="https://wiki.seeedstudio.com/cn/ReSpeaker_Mic_Array_v2.0/"><link data-rh="true" rel="alternate" href="https://wiki.seeedstudio.com/cn/ReSpeaker_Mic_Array_v2.0/" hreflang="en-US"><link data-rh="true" rel="alternate" href="https://wiki.seeedstudio.com/cn/ReSpeaker_Mic_Array_v2.0/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Seeed Studio Wiki RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Seeed Studio Wiki Atom Feed">

<link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-M4JG2HVB",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script>


<link rel="icon" href="/img/S.png">
<link rel="manifest" href="/manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)">


<link rel="search" type="application/opensearchdescription+xml" title="Seeed Studio Wiki" href="/opensearch.xml">
<script src="https://viewer.altium.com/client/static/js/embed.js" async></script>
<script src="/js/custom.js" async></script><link rel="stylesheet" href="/assets/css/styles.dc365204.css">
<link rel="preload" href="/assets/js/runtime~main.d5c099f7.js" as="script">
<link rel="preload" href="/assets/js/main.adf30950.js" as="script">
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M4JG2HVB" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#013949;color:#FFFFFF" role="banner"><div class="content_knG7 announcementBarContent_xLdY">Building Sustainable Growth, Strengthening Local Partnerships, Joining the <a target="_blank" href="https://wiki.seeedstudio.com/ranger/">Seeed Studio Ranger Program</a>! </div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Getting_Started/"><div class="navbar__logo"><img src="https://files.seeedstudio.com/wiki/wiki-platform/SeeedStudio.png" alt="Seeed Studio" class="themedImage_ToTc themedImage--light_HNdA navbar_logo_items"><img src="https://files.seeedstudio.com/wiki/wiki-platform/seeed_white_logo.png" alt="Seeed Studio" class="themedImage_ToTc themedImage--dark_i4oU navbar_logo_items"></div></a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link navbar_dorp_items" aria-haspopup="true" aria-expanded="false" role="button" href="/Getting_Started/">Getting Started</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/Sensor_Network/">Sensing and Connectivity</a></li><li><a class="dropdown__link" href="/Edge_Computing/">Edge Computing</a></li><li><a class="dropdown__link" href="/CloudnChain/">Cloud and Chain</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link navbar_dorp_items" aria-haspopup="true" aria-expanded="false" role="button" href="/Getting_Started/">Topics</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/tinyml_topic/">TinyML</a></li><li><a class="dropdown__link" href="/home_assistant_topic/">Home Assistant</a></li><li><a class="dropdown__link" href="/open_source_topic/">Open Source</a></li><li><a class="dropdown__link" href="/edge_ai_topic/">Edge AI</a></li><li><a class="dropdown__link" href="/cn/Getting_Started/">矽递科技 Wiki 文档平台（测试）</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link navbar_dorp_items" aria-haspopup="true" aria-expanded="false" role="button" href="/ranger/">Rangers</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/ranger/">Rangers</a></li><li><a href="https://github.com/orgs/Seeed-Studio/projects/6?pane=issue&amp;itemId=30957479" target="_blank" rel="noopener noreferrer" class="dropdown__link">Contributors(GitHub)<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://www.seeedstudio.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar_doc_right_items">Bazaar 🛍️</a><a class="navbar__item navbar__link navbar_doc_right_items" href="/knowledgebase/">Help 🙋</a><a href="https://wiki-gpt.seeedstudio.com/chat" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar_doc_right_items">Chat 🤖️</a><a href="https://seeed-studio.github.io/SenseCraft-Web-Toolkit/#/setup/process" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-SSCMA"></a><a href="https://github.com/Seeed-Studio/wiki-documents" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>ReSpeaker Mic Array v2.0</h1></header><p><img loading="lazy" src="https://files.seeedstudio.com/wiki/ReSpeaker_Mic_Array_V2/img/usb_4_mic_array.png" class="img_ev3q"></p><p>Seeed 的 ReSpeaker Mic Array v2.0 是基于 XVSM-2000 的 ReSpeaker Mic Array v1.0 的升级版本。v2.0 是基于 XMOS 的 XVF-3000 开发。它可以堆叠 (连接) 到 ReSpeaker Core 的顶部，显着改善语音交互体验。该主板集成了 4 个 PDM 麦克风，有助于将 ReSpeaker 的声学 DSP 性能提高到更高的水平。</p><p>ReSpeaker Mic Array v2.0 直接支持 USB Audio Class 1.0 (UAC 1.0)。所有主流的操作系统，如 Windows，MacOS，Linux 都与 UAC 1.0 兼容，因此它可以作为声卡运行而无需 ReSpeaker Core，但具有语音算法。</p><p>ReSpeaker Mic Array v2.0 有两个固件，一个包含语音算法，另一个仅捕获用于特殊用途的原始语音数据。</p><div class="get_one_now_container" style="text-align:center"><a href="https://www.seeedstudio.com/SeeedStudio-BeagleBone-Green-Wireless-p-2650.html" target="_blank" rel="noopener noreferrer" class="get_one_now_item"><strong><span><font color="FFFFFF" size="4"> 请点击此处购买 🖱️</font></span></strong></a></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="版本日志">版本日志<a href="#版本日志" class="hash-link" aria-label="Direct link to 版本日志" title="Direct link to 版本日志">​</a></h2><table><thead><tr><th>产品版本</th><th>版本介绍</th><th>发布日期</th></tr></thead><tbody><tr><td>ReSpeaker Mic Array v1.0</td><td>初始版本</td><td>2016 年 8 月 15 日</td></tr><tr><td>ReSpeaker Mic Array v2.0</td><td>MCU 更换为 XVF-3000，Mic 从 7 减少到 4</td><td>2018 年 1 月 25 日</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="产品特性">产品特性<a href="#产品特性" class="hash-link" aria-label="Direct link to 产品特性" title="Direct link to 产品特性">​</a></h2><ul><li>远场语音捕获</li><li>UAC 1.0</li><li>四麦阵列</li><li>12 个可编程 RGB LED 指示灯</li><li>语音算法和功能</li><li>语音活动检测 Voice Activity Detection</li><li>DOA(只能输出角度)</li><li>波束成形</li><li>噪声抑制</li><li>消混响</li><li>声学回声消除</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="规格参数">规格参数<a href="#规格参数" class="hash-link" aria-label="Direct link to 规格参数" title="Direct link to 规格参数">​</a></h2><table class="tg" style="table-layout:fixed;width:518px"><colgroup><col style="width:151px"><col style="width:367px"></colgroup><tbody><tr><th class="tg-031e">项</th><th class="tg-031e">参数</th></tr><tr><td class="tg-031e" rowspan="7">16 内核 XVF-3000</td><td class="tg-031e">2 个 xCore 磁贴上的 16 个实时逻辑核心</td></tr><tr><td class="tg-031e">dual issue 模式下内核共享最高可达 2400 MIPS</td></tr><tr><td class="tg-yw4l">512KB 内部单周期 SRAM 和 2MB 内置闪存</td></tr><tr><td class="tg-yw4l">16KB 内部 OTP (每块最大 8KB)</td></tr><tr><td class="tg-yw4l">USB PHY，完全符合 USB 2.0 规范</td></tr><tr><td class="tg-yw4l">可编程 I/O</td></tr><tr><td class="tg-yw4l">支持 DFU 模式</td></tr><tr><td class="tg-yw4l" rowspan="7">4 个数字麦克风 (型号 : MP34DT01-M)</td><td class="tg-yw4l">单电源电压</td></tr><tr><td class="tg-yw4l">低功耗</td></tr><tr><td class="tg-yw4l">120 dB SPL 声学过载点</td></tr><tr><td class="tg-yw4l">61 dB 信噪比</td></tr><tr><td class="tg-yw4l">全方位的灵敏度</td></tr><tr><td class="tg-yw4l">-26 dB FS 灵敏度</td></tr><tr><td class="tg-yw4l">PDM 输出</td></tr><tr><td class="tg-yw4l" rowspan="2">12 RGB LEDs (型号 : APA102)</td><td class="tg-yw4l">256 级亮度</td></tr><tr><td class="tg-yw4l">800kHz 线路数据传输</td></tr><tr><td class="tg-yw4l" rowspan="4">音频输出</td><td class="tg-yw4l">板载 3.5mm Aux 输出</td></tr><tr><td class="tg-yw4l">WOLFSON WM8960</td></tr><tr><td class="tg-yw4l">24 位或 16 位 16kHz 立体声输出</td></tr><tr><td class="tg-yw4l">16 Ω @ 3.3 V 下输出功率为 40mW</td></tr><tr><td class="tg-yw4l">尺寸</td><td class="tg-yw4l">直径 70mm</td></tr><tr><td class="tg-yw4l" rowspan="2">功率</td><td class="tg-yw4l">Micro USB 或扩展接头供 5V 电源</td></tr><tr><td class="tg-yw4l">功耗 190mA</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="硬件概述">硬件概述<a href="#硬件概述" class="hash-link" aria-label="Direct link to 硬件概述" title="Direct link to 硬件概述">​</a></h2><p><img loading="lazy" src="https://files.seeedstudio.com/wiki/ReSpeaker_Mic_Array_V2/img/Hardware%20Overview.png" class="img_ev3q"></p><ul><li><font face="" size="3" color="ff0000">①</font> **XMOS XVF-3000 :** 它集成了先进的 DSP 算法，包括声学回声消除 (AEC)，波束成形，去混响，噪声抑制和增益控制。</li><li><font face="" size="3" color="ff0000">②</font> **Digital Microphone :** MP34DT01-M 是一款超小型，低功耗，全方位的数字 MEMS 麦克风，内置电容式感应元件和 IC 接口。</li><li><font face="" size="3" color="ff0000">③</font> **RGB LED :** 三色 RGB LED。</li><li><font face="" size="3" color="ff0000">④</font> **USB Port :** 提供电源并控制麦克风阵列。</li><li><font face="" size="3" color="ff0000">⑤</font> **3.5mm Headphone jack :** 输出音频，我们可以将有源音响或耳机插入此端口。</li><li><font face="" size="3" color="ff0000">⑥</font> **WM8960 :** WM8960 是一款低功耗立体声编解码器，采用 D 类扬声器驱动器，可为每个通道提供 1 W，总计 8 W 的负载。</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="引脚图">引脚图<a href="#引脚图" class="hash-link" aria-label="Direct link to 引脚图" title="Direct link to 引脚图">​</a></h3><p><img loading="lazy" src="https://files.seeedstudio.com/wiki/ReSpeaker_Mic_Array_V2/img/Pin_Map.png" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="尺寸图">尺寸图<a href="#尺寸图" class="hash-link" aria-label="Direct link to 尺寸图" title="Direct link to 尺寸图">​</a></h2><p><img loading="lazy" src="https://files.seeedstudio.com/wiki/ReSpeaker_Mic_Array_V2/img/Dimension.png" class="img_ev3q"></p><p><img loading="lazy" src="https://files.seeedstudio.com/wiki/ReSpeaker_Mic_Array_V2/img/Dimension1.png" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="创意应用">创意应用<a href="#创意应用" class="hash-link" aria-label="Direct link to 创意应用" title="Direct link to 创意应用">​</a></h2><ul><li>USB 语音捕获</li><li>智能音响</li><li>智能语音助理系统</li><li>录音机</li><li>语音会议系统</li><li>会议通信设备</li><li>语音互动机器人</li><li>车载语音助手</li><li>其他需要语音命令的场景</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="入门指导">入门指导<a href="#入门指导" class="hash-link" aria-label="Direct link to 入门指导" title="Direct link to 入门指导">​</a></h2><p>!!!Note
ReSpeaker Mic Array v2.0 兼容 Windows，Mac 和 Linux 系统。以下脚本在 Python2.7 上进行了测试。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-dfu-和-led-控制驱动程序">安装 DFU 和 LED 控制驱动程序<a href="#安装-dfu-和-led-控制驱动程序" class="hash-link" aria-label="Direct link to 安装 DFU 和 LED 控制驱动程序" title="Direct link to 安装 DFU 和 LED 控制驱动程序">​</a></h3><ul><li><strong>Windows :</strong> 音频录制和播放运行良好。Windows 上仅需 Libusb-win32 驱动程序来控制 LED 指示灯。我们使用 <a href="https://zadig.akeo.ie/" target="_blank" rel="noopener noreferrer">一个方便的工具 - Zadig</a>为 <code>SEEED DFU</code> 和 <code>SEEED Control</code> 安装 libusb-win32 驱动程序 (ReSpeaker Mic Array 在 Windows 设备管理器中会显示 2 个设备)。</li></ul><p><img loading="lazy" src="https://files.seeedstudio.com/wiki/ReSpeaker_Mic_Array_V2/img/usb_4mic_array_driver.png" class="img_ev3q"></p><p>!!!Warning
请确保选择 libusb-win32，而不是 WinUSB 或 libusbK。</p><ul><li><strong>MAC :</strong> 无需安装驱动</li><li><strong>Linux :</strong> 无需安装驱动</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="更新固件">更新固件<a href="#更新固件" class="hash-link" aria-label="Direct link to 更新固件" title="Direct link to 更新固件">​</a></h3><p>有2个固件。 一个包含 1 个通道数据，另一个包含 6 个通道数据。这里是差异表 :</p><table><thead><tr><th>固件版本</th><th>通道数</th><th>说明</th></tr></thead><tbody><tr><td>1_channel_firmware.bin</td><td>1</td><td>为 ASR 处理音频</td></tr><tr><td>6_channels_firmware.bin</td><td>6</td><td>通道 0 : ASR 处理音频，通道 1 : mic1 原始数据，通道 2 : mic2 原始数据，通道 3 : mic3 原始数据，通道 4 : mic4 原始数据，通道 5 : 合并播放</td></tr></tbody></table><p>这是 audacity 刷 i6_firmware 后的录音
<img loading="lazy" src="https://files.seeedstudio.com/wiki/ReSpeaker_Mic_Array_V2/img/Audacity.png" class="img_ev3q"></p><p><strong>对于 Linux 系统 :</strong>  ReSpeaker Mic Array v2.0 支持 USB DFU。我们开发了一个 <a href="https://files.seeedstudio.com/wiki/ReSpeaker_Mic_Array_V2/res/dfu.py" target="_blank" rel="noopener noreferrer">python script dfu.py</a> 来通过 USB 更新固件。</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt</span><span class="token operator">-</span><span class="token plain">get update</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo pip install pyusb click</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token operator">//</span><span class="token plain">github</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">com</span><span class="token operator">/</span><span class="token plain">respeaker</span><span class="token operator">/</span><span class="token plain">usb_4_mic_array</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">git</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd usb_4_mic_array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo python dfu</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">py </span><span class="token operator">-</span><span class="token operator">-</span><span class="token plain">download 1_channel_firmware</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token builtin" style="color:rgb(189, 147, 249)">bin</span><span class="token plain">  </span><span class="token comment" style="color:rgb(98, 114, 164)"># 这个是参数可以在https://github.com/respeaker/usb_4_mic_array.git上查看可以选择下载固件哈</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这是固件下载结果。
<img loading="lazy" src="https://files.seeedstudio.com/wiki/ReSpeaker_Mic_Array_V2/img/Download_firmware.png" class="img_ev3q"></p><p><strong>对于 Windows 用户 :</strong> 我们不建议使用 Windows 更新固件。</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="控制-led">控制 LED<a href="#控制-led" class="hash-link" aria-label="Direct link to 控制 LED" title="Direct link to 控制 LED">​</a></h3><p>我们可以通过 USB 控制 ReSpeaker Mic Array V2 的 LED。USB 设备具有供应商特定的等级接口，可用于通过 USB 控制传输发送数据。我们引用 <a href="https://github.com/pyusb/pyusb" target="_blank" rel="noopener noreferrer">pyusb python library</a> 并发布 <a href="https://github.com/respeaker/pixel_ring/blob/master/pixel_ring/usb_pixel_ring_v2.py" target="_blank" rel="noopener noreferrer">usb_pixel_ring python library</a>。</p><p>LED 控制命令由 pyusb 的 usb.core.Device.ctrl_transfer() 发送，其参数如下 :</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">ctrl_transfer(usb.util.CTRL_OUT | usb.util.CTRL_TYPE_VENDOR | usb.util.CTRL_RECIPIENT_DEVICE, 0, command, 0x1C, data, TIMEOUT)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里是 usb_pixel_ring APIs。</p><table><thead><tr><th>Command</th><th>Data</th><th>API</th><th>Note</th></tr></thead><tbody><tr><td>0</td><td>[0]</td><td>pixel_ring.trace()</td><td>trace mode, LEDs changing depends on VAD<em>and DOA</em></td></tr><tr><td>1</td><td>[red, green, blue, 0]</td><td>pixel_ring.mono()</td><td>mono mode, set all RGB LED to a single color, for example Red(0xFF0000), Green(0x00FF00)， Blue(0x0000FF)</td></tr><tr><td>2</td><td>[0]</td><td>pixel_ring.listen()</td><td>listen mode, similar with trace mode, but not turn LEDs off</td></tr><tr><td>3</td><td>[0]</td><td>pixel_ring.speak()</td><td>wait mode</td></tr><tr><td>4</td><td>[0]</td><td>pixel_ring.think()</td><td>speak mode</td></tr><tr><td>5</td><td>[0]</td><td>pixel_ring.spin()</td><td>spin mode</td></tr><tr><td>6</td><td>[r, g, b, 0]<!-- --> * 12</td><td>pixel_ring.custimize()</td><td>custom mode, set each LED to its own color</td></tr><tr><td>0x20</td><td>[brightness]</td><td>pixel_ring.set_brightness()</td><td>set brightness, range: 0x00~0x1F</td></tr><tr><td>0x21</td><td>[r1, g1, b1, 0, r2, g2, b2, 0]</td><td>pixel_ring.set_color_palette()</td><td>set color palette, for example, pixel_ring.set_color_palette(0xff0000, 0x00ff00) together with pixel_ring.think()</td></tr><tr><td>0x22</td><td>[vad_led]</td><td>pixel_ring.set_vad_led()</td><td>set center LED: 0 - off, 1 - on, else - depends on VAD</td></tr><tr><td>0x23</td><td>[volume]</td><td>pixel_ring.set_volume()</td><td>show volume, range: 0 ~ 12</td></tr><tr><td>0x24</td><td>[pattern]</td><td>pixel_ring.change_pattern()</td><td>set pattern, 0 - Google Home pattern, others - Echo pattern</td></tr></tbody></table><p><strong>对于 Linux 系统 :</strong> 这里是控制 LED 的示例。</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token operator">//</span><span class="token plain">github</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">com</span><span class="token operator">/</span><span class="token plain">respeaker</span><span class="token operator">/</span><span class="token plain">pixel_ring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">git</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd pixel_ring</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo python setup</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">py install</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo python examples</span><span class="token operator">/</span><span class="token plain">usb_mic_array</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>这里是 usb_mic_array.py 的代码。</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> time</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">from</span><span class="token plain"> pixel_ring </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> pixel_ring</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">if</span><span class="token plain"> __name__ </span><span class="token operator">==</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;__main__&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pixel_ring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">change_pattern</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;echo&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">while</span><span class="token plain"> </span><span class="token boolean">True</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">try</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            pixel_ring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">wakeup</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            pixel_ring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">think</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            pixel_ring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">speak</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">6</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            pixel_ring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">off</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">3</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">except</span><span class="token plain"> KeyboardInterrupt</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">break</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pixel_ring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">off</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    time</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">sleep</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token number">1</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>对于 Windows 系统</strong> 这里是控制 LED 的示例</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone https</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token operator">//</span><span class="token plain">github</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">com</span><span class="token operator">/</span><span class="token plain">respeaker</span><span class="token operator">/</span><span class="token plain">pixel_ring</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">git</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd pixel_ring</span><span class="token operator">/</span><span class="token plain">pixel_ring</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>用下面的代码创建一个 <a href="https://files.seeedstudio.com/wiki/ReSpeaker_Mic_Array_V2/res/led_control.py" target="_blank" rel="noopener noreferrer">led_control.py</a> 并运行 &#x27;python led_control.py&#x27;</p><div class="language-Python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">from usb_pixel_ring_v2 import PixelRing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import usb.core</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import usb.util</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import time</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">dev = usb.core.find(idVendor=0x2886, idProduct=0x0018)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">print dev</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if dev:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pixel_ring = PixelRing(dev)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    while True:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        try:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            pixel_ring.wakeup(180)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            time.sleep(3)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            pixel_ring.listen()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            time.sleep(3)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            pixel_ring.think()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            time.sleep(3)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            pixel_ring.set_volume(8)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            time.sleep(3)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            pixel_ring.off()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            time.sleep(3)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        except KeyboardInterrupt:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            break</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pixel_ring.off()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>如果您在屏幕上看到 &quot;None&quot;，请重新安装 libusb-win32 驱动程序。</p></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="调音">调音<a href="#调音" class="hash-link" aria-label="Direct link to 调音" title="Direct link to 调音">​</a></h3><p>我们可以配置一些内置算法的参数。它适用于 Linux 和 Windows。</p><ul><li>获取完整列表参数 :</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone https://github.com/respeaker/usb_4_mic_array.git</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd usb_4_mic_array</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">python tuning.py -p</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>例如，我们可以关闭自动增益控制 (AGC) :</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">python tuning.py AGCONOFF 0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>同时，对应liunx我们也可以安装一个可视化的调音软件</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt-get install pavucontrol</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="提取语音">提取语音<a href="#提取语音" class="hash-link" aria-label="Direct link to 提取语音" title="Direct link to 提取语音">​</a></h3><p>使用 <a href="https://people.csail.mit.edu/hubert/pyaudio/" target="_blank" rel="noopener noreferrer">PyAudio python library</a> 通过 USB 提取语音。</p><p><strong>对于 Linux 系统 :</strong> 可以使用下面的命令来录制或播放语音。</p><div class="language-Python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">arecord -D plughw:1,0 -f cd test.wav # record, please use the arecord -l to check the card and hardware first</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">aplay -D plughw:1,0 -f cd test.wav # play, please use the aplay -l to check the card and hardware first</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">arecord -D plughw:1,0 -f cd |aplay -D plughw:1,0 -f cd # record and play at the same time</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>我们也可以使用 python 脚本来提取语音。</p><ul><li>步骤 1，我们需要运行以下脚本来获取麦克风阵列的设备索引号 :</li></ul><div class="language-Python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo pip install pyaudio</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd ~</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nano get_index.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Step 2, 复制下面的代码并粘贴到 <a href="https://files.seeedstudio.com/wiki/ReSpeaker_Mic_Array_V2/res/get_index.py" target="_blank" rel="noopener noreferrer">get_index.py</a>.</li></ul><div class="language-Python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">import pyaudio</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">p = pyaudio.PyAudio()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">info = p.get_host_api_info_by_index(0)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">numdevices = info.get(&#x27;deviceCount&#x27;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">for i in range(0, numdevices):</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        if (p.get_device_info_by_host_api_device_index(0, i).get(&#x27;maxInputChannels&#x27;)) &gt; 0:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            print &quot;Input Device id &quot;, i, &quot; - &quot;, p.get_device_info_by_host_api_device_index(0, i).get(&#x27;name&#x27;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p>Step 3, 按 Ctrl + X 退出并按 Y 保存。</p></li><li><p>Step 4, 运行 &#x27;sudo python get_index.py&#x27;，我们将看到如下的设备 ID。</p></li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">Input Device id  2  -  ReSpeaker 4 Mic Array (UAC1.0): USB Audio (hw:1,0)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li>Step 5, 将 <code>RESPEAKER_INDEX = 2</code> 更改为索引号。运行 python 脚本 <a href="https://files.seeedstudio.com/wiki/ReSpeaker_Mic_Array_V2/res/record.py" target="_blank" rel="noopener noreferrer">record.py</a> 来录制语音。</li></ul><div class="language-Python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-Python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">import pyaudio</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import wave</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RESPEAKER_RATE = 16000</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RESPEAKER_CHANNELS = 1 # change base on firmwares, default_firmware.bin as 1 or i6_firmware.bin as 6</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RESPEAKER_WIDTH = 2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"># run getDeviceInfo.py to get index</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RESPEAKER_INDEX = 2  # refer to input device id</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CHUNK = 1024</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RECORD_SECONDS = 5</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">WAVE_OUTPUT_FILENAME = &quot;output.wav&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">p = pyaudio.PyAudio()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">stream = p.open(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            rate=RESPEAKER_RATE,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            format=p.get_format_from_width(RESPEAKER_WIDTH),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            channels=RESPEAKER_CHANNELS,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            input=True,</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            input_device_index=RESPEAKER_INDEX,)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">print(&quot;* recording&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">frames = []</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">for i in range(0, int(RESPEAKER_RATE / CHUNK * RECORD_SECONDS)):</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    data = stream.read(CHUNK)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    frames.append(data)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">print(&quot;* done recording&quot;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">stream.stop_stream()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">stream.close()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">p.terminate()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wf = wave.open(WAVE_OUTPUT_FILENAME, &#x27;wb&#x27;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wf.setnchannels(RESPEAKER_CHANNELS)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wf.setsampwidth(p.get_sample_size(p.get_format_from_width(RESPEAKER_WIDTH)))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wf.setframerate(RESPEAKER_RATE)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wf.writeframes(b&#x27;&#x27;.join(frames))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">wf.close()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>对于 Windows 系统:</strong> 我们首先运行命令 &#x27;pip install pyaudio&#x27;，然后使用 <a href="https://files.seeedstudio.com/wiki/ReSpeaker_Mic_Array_V2/res/get_index.py" target="_blank" rel="noopener noreferrer">get_index.py</a> 和 <a href="https://files.seeedstudio.com/wiki/ReSpeaker_Mic_Array_V2/res/record.py" target="_blank" rel="noopener noreferrer">record.py</a> 来提取语音。</p><p>:::Warning
如果看到 &quot;Error: %1 is not a valid Win32 application.&quot;，请安装 Python Win32 版本。
:::</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="实时声源定位跟踪">实时声源定位跟踪<a href="#实时声源定位跟踪" class="hash-link" aria-label="Direct link to 实时声源定位跟踪" title="Direct link to 实时声源定位跟踪">​</a></h3><p><a href="https://github.com/introlab/odas" target="_blank" rel="noopener noreferrer">ODAS</a> 代表 Open embeddeD Audition System。这是一个专门用于声源定位，追踪，分离和后期过滤的库。</p><p><strong>对于 Linux 用户:</strong></p><ul><li>Step 1. 获得 ODAS 并构建它。</li></ul><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt-get install libfftw3-dev libconfig-dev libasound2-dev libgconf-2-4</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt-get install cmake</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone https://github.com/introlab/odas.git</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">mkdir odas/build</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd odas/build</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cmake ..</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">make</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><p>Step 2. 获得 <a href="https://github.com/introlab/odas_web/releases" target="_blank" rel="noopener noreferrer">ODAS Studio</a> 然后打开.</p></li><li><p>Step 3. odascore 将位于 odas/bin/odascore，配置文件是 <a href="https://raw.githubusercontent.com/respeaker/usb_4_mic_array/master/odas.cfg" target="_blank" rel="noopener noreferrer">odas.cfg</a>。请根据您的声卡号更改 odas.cfg。</p></li><li><p>Step 4. 使用包含 4 声道原始音频数据的 i6_firmware.bin 更新麦克风阵列。</p></li></ul><p><img loading="lazy" src="https://files.seeedstudio.com/wiki/ReSpeaker_Mic_Array_V2/img/live_data.png" class="img_ev3q"></p><p><strong>对于 Windows 系统 :</strong> 请参考 <a href="https://github.com/introlab/odas" target="_blank" rel="noopener noreferrer">ODAS</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="基于树莓派的free-avs">基于树莓派的free-avs<a href="#基于树莓派的free-avs" class="hash-link" aria-label="Direct link to 基于树莓派的free-avs" title="Direct link to 基于树莓派的free-avs">​</a></h3><p><strong>step 1. 配置和安装相关依赖</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone https://github.com/respeaker/4mics_hat.git</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd ~/4mics_hat</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt install libatlas-base-dev     # 安装 snowboy dependencies</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt install python-pyaudio        # 安装pyaudio音频处理包</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pip install ./snowboy*.whl             # 安装 snowboy for KWS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pip install ./webrtc*.whl              # 安装 webrtc for DoA</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd ~/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone https://github.com/voice-engine/voice-engine #write by seeed</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd voice-engine/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">python setup.py bdist_wheel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pip install dist/*.whl</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd ~/</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">git clone https://github.com/respeaker/avs</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd avs                                 # install Requirements</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">python setup.py install</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pip install avs==0.5.3</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt install libgstreamer1.0-0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt install gstreamer1.0-plugins-bad gstreamer1.0-plugins-ugly </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt install gstreamer1.0-libav gstreamer1.0-doc gstreamer1.0-tool</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt install gstreamer1.0-plugins-good</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt install python-gi gir1.2-gstreamer-1.0</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pip install tornado==5.1.1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">sudo apt install mpg123</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>step 2. 取得授权</strong></p><p>在终端运行 alexa-auth ，然后登陆获取alexa的授权， 或者运行 dueros-auth 获取百度的授权。 授权的文件保存在/home/pi/.avs.json。
<img loading="lazy" src="https://files.seeedstudio.com/wiki/ReSpeaker-4-Mic-Array-for-Raspberry-Pi/img/auth.png" class="img_ev3q"></p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>如果我们在 alexa-auth 和 dueros-auth之间切换, 请先删除 /home/pi/.avs.json 。 这个是隐藏文件，请用 ls -la 显示文件。</p></div></div><p><strong>step 3. 让我们High起来!</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">cd ~/4mics_hat</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">nano ns_kws_doa_alexa_with_light.py</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>按照下面的信息更新下面代码的设置:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Hands-free Voice Assistant with Snowboy and Alexa Voice Service.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Requirement:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    sudo apt-get install python-numpy</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pip install webrtc-audio-processing</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    pip install spidev</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">&quot;&quot;&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import time</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">import logging</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">from voice_engine.source import Source</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">from voice_engine.channel_picker import ChannelPicker</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">from voice_engine.kws import KWS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">from voice_engine.ns import NS</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">from voice_engine.doa_respeaker_4mic_array import DOA</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">from avs.alexa import Alexa</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">def main():</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    logging.basicConfig(level=logging.DEBUG)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    src = Source(rate=16000, channels=1, device_name=&#x27;plughw:1,0&#x27;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ch1 = ChannelPicker(channels=1, pick=1)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ns = NS(rate=16000, channels=1)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    kws = KWS(model=&#x27;snowboy&#x27;)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    doa = DOA(rate=16000)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    alexa = Alexa()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    def on_detected(keyword):</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        direction = doa.get_direction()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        logging.info(&#x27;detected {} at direction {}&#x27;.format(keyword, direction))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        alexa.listen()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    kws.on_detected = on_detected</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    src.link(ch1)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ch1.link(ns)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    ns.link(kws)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    kws.link(alexa)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    src.link(doa)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    src.recursive_start()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    while True:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        try:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            time.sleep(1)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        except KeyboardInterrupt:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">            break</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    src.recursive_stop()</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">if __name__ == &#x27;__main__&#x27;:</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    main()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>假如需要使用<code>mic-array</code>作为音频输出口的话则如下图进行设置
<img loading="lazy" src="https://files.seeedstudio.com/wiki/ReSpeaker_Mic_Array_V2/img/audio-output.png" class="img_ev3q">
运行<code>PLAYER=mpg123 python ns_kws_doa_alexa_with_light.py</code>, 我们会在终端看到很多 debug 的消息. 当我们看到<code>status code: 204</code>的时候, 请说<code>snowboy</code>来唤醒 respeaker。接下来 respeaker 上的 led 灯亮起来, 我们可以跟他对话, 比如问，&quot;谁是最帅的?&quot; 或者 &quot;播放刘德华的男人哭吧哭吧不是罪&quot;。小伙伴，尽情的 High 起来吧。</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="faq">FAQ<a href="#faq" class="hash-link" aria-label="Direct link to FAQ" title="Direct link to FAQ">​</a></h2><p><strong>Q1: 内置算法的参数</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">pi@raspberrypi:~/usb_4_mic_array $ python tuning.py -p</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name   type max min r/w info</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-------------------------------</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">AECFREEZEONOFF   int 1 0 rw Adaptive Echo Canceler updates inhibit.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            0 = Adaptation enabled</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            1 = Freeze adaptation, filter only</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">AECNORM          float 16 0.25 rw Limit on norm of AEC filter coefficients</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">AECPATHCHANGE    int 1 0 ro AEC Path Change Detection.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            0 = false (no path change detected)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            1 = true (path change detected)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">AECSILENCELEVEL  float 1 1e-09 rw Threshold for signal detection in AEC [-inf .. 0] dBov (Default: -80dBov = 10log10(1x10-8))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">AECSILENCEMODE   int 1 0 ro AEC far-end silence detection status.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            0 = false (signal detected)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            1 = true (silence detected)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">AGCDESIREDLEVEL  float 0.99 1e-08 rw Target power level of the output signal.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            [−inf .. 0] dBov (default: −23dBov = 10log10(0.005))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">AGCGAIN          float 1000 1 rw Current AGC gain factor.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            [0 .. 60] dB (default: 0.0dB = 20log10(1.0))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">AGCMAXGAIN       float 1000 1 rw Maximum AGC gain factor.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            [0 .. 60] dB (default 30dB = 20log10(31.6))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">AGCONOFF         int 1 0 rw Automatic Gain Control.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            0 = OFF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            1 = ON</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">AGCTIME          float 1 0.1 rw Ramps-up / down time-constant in seconds.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">CNIONOFF         int 1 0 rw Comfort Noise Insertion.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            0 = OFF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            1 = ON</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">DOAANGLE         int 359 0 ro DOA angle. Current value. Orientation depends on build configuration.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ECHOONOFF        int 1 0 rw Echo suppression.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            0 = OFF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            1 = ON</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">FREEZEONOFF      int 1 0 rw Adaptive beamformer updates.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            0 = Adaptation enabled</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            1 = Freeze adaptation, filter only</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">FSBPATHCHANGE    int 1 0 ro FSB Path Change Detection.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            0 = false (no path change detected)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            1 = true (path change detected)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">FSBUPDATED       int 1 0 ro FSB Update Decision.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            0 = false (FSB was not updated)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            1 = true (FSB was updated)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GAMMAVAD_SR      float 1000 0 rw Set the threshold for voice activity detection.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            [−inf .. 60] dB (default: 3.5dB 20log10(1.5))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GAMMA_E          float 3 0 rw Over-subtraction factor of echo (direct and early components). min .. max attenuation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GAMMA_ENL        float 5 0 rw Over-subtraction factor of non-linear echo. min .. max attenuation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GAMMA_ETAIL      float 3 0 rw Over-subtraction factor of echo (tail components). min .. max attenuation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GAMMA_NN         float 3 0 rw Over-subtraction factor of non- stationary noise. min .. max attenuation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GAMMA_NN_SR      float 3 0 rw Over-subtraction factor of non-stationary noise for ASR.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            [0.0 .. 3.0] (default: 1.1)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GAMMA_NS         float 3 0 rw Over-subtraction factor of stationary noise. min .. max attenuation</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">GAMMA_NS_SR      float 3 0 rw Over-subtraction factor of stationary noise for ASR.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            [0.0 .. 3.0] (default: 1.0)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">HPFONOFF         int 3 0 rw High-pass Filter on microphone signals.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            0 = OFF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            1 = ON - 70 Hz cut-off</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            2 = ON - 125 Hz cut-off</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            3 = ON - 180 Hz cut-off</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MIN_NN           float 1 0 rw Gain-floor for non-stationary noise suppression.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            [−inf .. 0] dB (default: −10dB = 20log10(0.3))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MIN_NN_SR        float 1 0 rw Gain-floor for non-stationary noise suppression for ASR.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            [−inf .. 0] dB (default: −10dB = 20log10(0.3))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MIN_NS           float 1 0 rw Gain-floor for stationary noise suppression.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            [−inf .. 0] dB (default: −16dB = 20log10(0.15))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">MIN_NS_SR        float 1 0 rw Gain-floor for stationary noise suppression for ASR.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            [−inf .. 0] dB (default: −16dB = 20log10(0.15))</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NLAEC_MODE       int 2 0 rw Non-Linear AEC training mode.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            0 = OFF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            1 = ON - phase 1</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            2 = ON - phase 2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NLATTENONOFF     int 1 0 rw Non-Linear echo attenuation.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            0 = OFF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            1 = ON</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NONSTATNOISEONOFF int 1 0 rw Non-stationary noise suppression.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            0 = OFF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            1 = ON</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">NONSTATNOISEONOFF_SR int 1 0 rw Non-stationary noise suppression for ASR.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            0 = OFF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            1 = ON</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RT60             float 0.9 0.25 ro Current RT60 estimate in seconds</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">RT60ONOFF        int 1 0 rw RT60 Estimation for AES. 0 = OFF 1 = ON</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">SPEECHDETECTED   int 1 0 ro Speech detection status.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            0 = false (no speech detected)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            1 = true (speech detected)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">STATNOISEONOFF   int 1 0 rw Stationary noise suppression.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            0 = OFF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            1 = ON</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">STATNOISEONOFF_SR int 1 0 rw Stationary noise suppression for ASR.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            0 = OFF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            1 = ON</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">TRANSIENTONOFF   int 1 0 rw Transient echo suppression.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            0 = OFF</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            1 = ON</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">VOICEACTIVITY    int 1 0 ro VAD voice activity status.</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            0 = false (no voice activity)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">                                                            1 = true (voice activity)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Q2: ImportError: No module named usb.core</strong></p><p>A2: Run sudo pip install pyusb to install the pyusb.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">pi@raspberrypi:~/usb_4_mic_array $ sudo python tuning.py DOAANGLE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Traceback (most recent call last):</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  File &quot;tuning.py&quot;, line 5, in &lt;module&gt;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    import usb.core</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">ImportError: No module named usb.core</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pi@raspberrypi:~/usb_4_mic_array $ sudo pip install pyusb</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Collecting pyusb</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Downloading pyusb-1.0.2.tar.gz (54kB)</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    100% |████████████████████████████████| 61kB 101kB/s</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Building wheels for collected packages: pyusb</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Running setup.py bdist_wheel for pyusb ... done</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  Stored in directory: /root/.cache/pip/wheels/8b/7f/fe/baf08bc0dac02ba17f3c9120f5dd1cf74aec4c54463bc85cf9</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Successfully built pyusb</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Installing collected packages: pyusb</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Successfully installed pyusb-1.0.2</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">pi@raspberrypi:~/usb_4_mic_array $ sudo python tuning.py DOAANGLE</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">DOAANGLE: 180</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Q3: 能直接通过3.5mm耳机孔听到采样的声音吗?</strong></p><p>A5 不行的。3.5mm耳机孔音源来自于上位机，但是如果用树莓派的话可以通过执行arecord -D plughw:1,0 -f cd |aplay -D plughw:1,0 -f cd 达到目的</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="资源下载">资源下载<a href="#资源下载" class="hash-link" aria-label="Direct link to 资源下载" title="Direct link to 资源下载">​</a></h2><ul><li><strong>[产品简介]</strong> <a href="https://files.seeedstudio.com/wiki/ReSpeaker_Mic_Array_V2/res/ReSpeaker%20MicArray%20v2.0%20Product%20Brief.pdf" target="_blank" rel="noopener noreferrer">ReSpeaker MicArray v2.0 Product Brief</a></li><li><strong>[产品简介]</strong> <a href="https://files.seeedstudio.com/wiki/ReSpeaker_Mic_Array_V2/res/XVF3000-3100-product-brief_1.4.pdf" target="_blank" rel="noopener noreferrer">XVF3000 Product Brief</a></li><li><strong>[芯片数据手册]</strong> <a href="https://files.seeedstudio.com/wiki/ReSpeaker_Mic_Array_V2/res/XVF3000-3100-TQ128-Datasheet_1.0.pdf" target="_blank" rel="noopener noreferrer">XVF3000 Datasheet</a></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="技术支持">技术支持<a href="#技术支持" class="hash-link" aria-label="Direct link to 技术支持" title="Direct link to 技术支持">​</a></h2><p>如果您有任何技术问题，请联系 <a href="mailto:techsupport@seeed.cc" target="_blank" rel="noopener noreferrer">techsupport@seeed.cc</a>。或者将问题提交到我们的 <a href="http://seeedstudio.com/forum/" target="_blank" rel="noopener noreferrer">论坛</a>。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/zh-CN/Seeed_Elderly/reSpeaker/ReSpeaker_Mic_Array_v2.0.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-05-27T10:28:00.000Z">May 27, 2024</time></b> by <b>Citric Lee</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"></nav></div><div>Loading Comments...</div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#版本日志" class="table-of-contents__link toc-highlight">版本日志</a></li><li><a href="#产品特性" class="table-of-contents__link toc-highlight">产品特性</a></li><li><a href="#规格参数" class="table-of-contents__link toc-highlight">规格参数</a></li><li><a href="#硬件概述" class="table-of-contents__link toc-highlight">硬件概述</a><ul><li><a href="#引脚图" class="table-of-contents__link toc-highlight">引脚图</a></li></ul></li><li><a href="#尺寸图" class="table-of-contents__link toc-highlight">尺寸图</a></li><li><a href="#创意应用" class="table-of-contents__link toc-highlight">创意应用</a></li><li><a href="#入门指导" class="table-of-contents__link toc-highlight">入门指导</a><ul><li><a href="#安装-dfu-和-led-控制驱动程序" class="table-of-contents__link toc-highlight">安装 DFU 和 LED 控制驱动程序</a></li><li><a href="#更新固件" class="table-of-contents__link toc-highlight">更新固件</a></li><li><a href="#控制-led" class="table-of-contents__link toc-highlight">控制 LED</a></li><li><a href="#调音" class="table-of-contents__link toc-highlight">调音</a></li><li><a href="#提取语音" class="table-of-contents__link toc-highlight">提取语音</a></li><li><a href="#实时声源定位跟踪" class="table-of-contents__link toc-highlight">实时声源定位跟踪</a></li><li><a href="#基于树莓派的free-avs" class="table-of-contents__link toc-highlight">基于树莓派的free-avs</a></li></ul></li><li><a href="#faq" class="table-of-contents__link toc-highlight">FAQ</a></li><li><a href="#资源下载" class="table-of-contents__link toc-highlight">资源下载</a></li><li><a href="#技术支持" class="table-of-contents__link toc-highlight">技术支持</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Navigation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Getting_Started/">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/Sensor_Network/">Sensor Network</a></li><li class="footer__item"><a class="footer__link-item" href="/Edge_Computing/">Edge Computing</a></li><li class="footer__item"><a class="footer__link-item" href="/CloudnChain/">Cloud &amp; Chain</a></li><li class="footer__item"><a class="footer__link-item" href="/Solutions/">Solutions</a></li></ul></div><div class="col footer__col"><div class="footer__title">Ecosystem</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.com/invite/QqMgVwHT3X" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://project.seeedstudio.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Project Hub</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/ecosystem/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Partners</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/distributors.html" target="_blank" rel="noopener noreferrer" class="footer__link-item">Distributors</a></li></ul></div><div class="col footer__col"><div class="footer__title">Quick Guide</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.seeedstudio.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bazzar</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/get_help/HowToGetHelp" target="_blank" rel="noopener noreferrer" class="footer__link-item">How to get help</a></li><li class="footer__item"><a href="https://support.seeedstudio.com/knowledgebase" target="_blank" rel="noopener noreferrer" class="footer__link-item">FAQs</a></li><li class="footer__item"><a href="https://forum.seeedstudio.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/get_help/TechnicalSupport" target="_blank" rel="noopener noreferrer" class="footer__link-item">Technical Support</a></li></ul></div><div class="col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.seeedstudio.com/about-us/" target="_blank" rel="noopener noreferrer" class="footer__link-item">About Seeed</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/join-us/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Join us</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/contacts" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us</a></li><li class="footer__item"><a href="https://www.seeedstudio.com/blog/2020/04/22/seeed-in-the-news/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Press</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Seeed Studio, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.d5c099f7.js"></script>
<script src="/assets/js/main.adf30950.js"></script>
</body>
</html>