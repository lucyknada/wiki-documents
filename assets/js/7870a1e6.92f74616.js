"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[90128],{15680:(e,t,o)=>{o.d(t,{xA:()=>u,yg:()=>c});var i=o(96540);function n(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function r(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){n(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function l(e,t){if(null==e)return{};var o,i,n=function(e,t){if(null==e)return{};var o,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)o=a[i],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)o=a[i],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}var s=i.createContext({}),d=function(e){var t=i.useContext(s),o=t;return e&&(o="function"==typeof e?e(t):r(r({},t),e)),o},u=function(e){var t=d(e.components);return i.createElement(s.Provider,{value:t},e.children)},p="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},m=i.forwardRef((function(e,t){var o=e.components,n=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=d(o),m=n,c=p["".concat(s,".").concat(m)]||p[m]||g[m]||a;return o?i.createElement(c,r(r({ref:t},u),{},{components:o})):i.createElement(c,r({ref:t},u))}));function c(e,t){var o=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var a=o.length,r=new Array(a);r[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:n,r[1]=l;for(var d=2;d<a;d++)r[d]=o[d];return i.createElement.apply(null,r)}return i.createElement.apply(null,o)}m.displayName="MDXCreateElement"},96644:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>g,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var i=o(58168),n=(o(96540),o(15680));const a={description:"Buildroot for reTerminal",title:"Buildroot for reTerminal",keywords:["Edge","reTerminal OS_Installation"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/reTerminal-Buildroot-SDK",last_update:{date:"2/1/2023",author:"jianjing Huang"}},r="Buildroot for reTerminal",l={unversionedId:"Edge/Raspberry_Pi_Devices/reTerminal/OS_Installation/reTerminal-Buildroot-SDK",id:"Edge/Raspberry_Pi_Devices/reTerminal/OS_Installation/reTerminal-Buildroot-SDK",title:"Buildroot for reTerminal",description:"Buildroot for reTerminal",source:"@site/docs/Edge/Raspberry_Pi_Devices/reTerminal/OS_Installation/reTerminal-Buildroot-SDK.md",sourceDirName:"Edge/Raspberry_Pi_Devices/reTerminal/OS_Installation",slug:"/reTerminal-Buildroot-SDK",permalink:"/reTerminal-Buildroot-SDK",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Edge/Raspberry_Pi_Devices/reTerminal/OS_Installation/reTerminal-Buildroot-SDK.md",tags:[],version:"current",lastUpdatedBy:"jianjing Huang",lastUpdatedAt:1675209600,formattedLastUpdatedAt:"Feb 1, 2023",frontMatter:{description:"Buildroot for reTerminal",title:"Buildroot for reTerminal",keywords:["Edge","reTerminal OS_Installation"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/reTerminal-Buildroot-SDK",last_update:{date:"2/1/2023",author:"jianjing Huang"}},sidebar:"ProductSidebar",previous:{title:"Mender Client on reTerminal",permalink:"/Mender-Client-reTerminal"},next:{title:"Yocto for reTerminal",permalink:"/reTerminal-Yocto"}},s={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Compile Buildroot Source Code",id:"compile-buildroot-source-code",level:2},{value:"Manual Compilation on Local Machine",id:"manual-compilation-on-local-machine",level:3},{value:"Compile with the default configuration for reTerminal",id:"compile-with-the-default-configuration-for-reterminal",level:4},{value:"Compile with your own configuration for reTerminal",id:"compile-with-your-own-configuration-for-reterminal",level:4},{value:"Find the Compiled Image",id:"find-the-compiled-image",level:4},{value:"Download Already Compiled Image",id:"download-already-compiled-image",level:3},{value:"Flash the Image to reTerminal",id:"flash-the-image-to-reterminal",level:2},{value:"First Boot on reTerminal",id:"first-boot-on-reterminal",level:2},{value:"Analyze Buildroot Image",id:"analyze-buildroot-image",level:2},{value:"Generate Dependency Diagrams",id:"generate-dependency-diagrams",level:3},{value:"Generate Analysis of Size of the Resources Consumed by the Compilation",id:"generate-analysis-of-size-of-the-resources-consumed-by-the-compilation",level:3},{value:"Test Buildroot Image",id:"test-buildroot-image",level:2},{value:"Resources",id:"resources",level:2},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],u={toc:d},p="wrapper";function g(e){let{components:t,...o}=e;return(0,n.yg)(p,(0,i.A)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,n.yg)("h1",{id:"buildroot-for-reterminal"},"Buildroot for reTerminal"),(0,n.yg)("p",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/ReTerminal/buildroot/thumb.jpg",alt:"pir",width:"500",height:"auto"})),(0,n.yg)("h2",{id:"introduction"},"Introduction"),(0,n.yg)("p",null,(0,n.yg)("a",{parentName:"p",href:"https://buildroot.org"},"Buildroot")," is an easy-to-use tool that simplifies and automates the process of building a complete Linux system for an embedded system, using cross-compilation."),(0,n.yg)("p",null,"In order to achieve this, Buildroot is able to generate a cross-compilation toolchain, a root filesystem, a Linux kernel image and a bootloader for your target. Buildroot can be used for any combination of these options, independently (you can for example use an existing cross-compilation toolchain, and build only your root filesystem with Buildroot)."),(0,n.yg)("p",null,"It has a simple structure that makes it easy to understand and extend. It relies only on the well-known Makefile language. Buildroot is an open source project and many developers contribute to it daily."),(0,n.yg)("p",null,"By following the guide below, you will be able to build your own ",(0,n.yg)("a",{parentName:"p",href:"https://www.seeedstudio.com/ReTerminal-with-CM4-p-4904.html"},"reTerminal")," system image using Buildroot. So let's get started!"),(0,n.yg)("h2",{id:"compile-buildroot-source-code"},"Compile Buildroot Source Code"),(0,n.yg)("h3",{id:"manual-compilation-on-local-machine"},"Manual Compilation on Local Machine"),(0,n.yg)("p",null,"Now we will move on to manually compiling the system image for reTerminal using Buildroot."),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"note:")," This guide was written after testing on a host PC with Ubuntu 20.04 installed. However, it will work for other Linux systems."),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Step 1.")," Prepare the development environment on the host PC by installing the following packages (git, gcc and make)")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-sh"},"sudo apt update\nsudo apt install git\nsudo apt install build-essential\n")),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Note:")," If you already have the above packages installed. You can skip it."),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Step 2.")," Clone the following GitHub repo")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-sh"},"git clone --depth=1 https://github.com/Seeed-Studio/seeed-linux-buildroot.git -b master\n")),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Step 3.")," Navigate to the ",(0,n.yg)("strong",{parentName:"li"},"seeed-linux-buildroot")," directory")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-sh"},"cd seeed-linux-buildroot\n")),(0,n.yg)("h4",{id:"compile-with-the-default-configuration-for-reterminal"},"Compile with the default configuration for reTerminal"),(0,n.yg)("p",null,"Type the following to start compiling with the default reTerminal configuration"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-sh"},"make reTerminal_64_defconfig\nmake\n")),(0,n.yg)("h4",{id:"compile-with-your-own-configuration-for-reterminal"},"Compile with your own configuration for reTerminal"),(0,n.yg)("p",null,"Type the following to install the necessary package to compile with your own configuration"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-sh"},"sudo apt install libncurses-dev\n")),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Step 5.")," Type the following to open the buildroot configuration window")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-sh"},"make menuconfig\n")),(0,n.yg)("p",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/ReTerminal/buildroot/menuconfig.png",alt:"pir",width:"1000",height:"auto"})),(0,n.yg)("p",null,"You can use this configuration window and navigate through the options available and ",(0,n.yg)("strong",{parentName:"p"},"customize the image")," according to your needs. Also if you click ",(0,n.yg)("strong",{parentName:"p"},"Save")," and ",(0,n.yg)("strong",{parentName:"p"},"Exit")," from this window without making any changes, the default reTerminal configuration will be loaded."),(0,n.yg)("h4",{id:"find-the-compiled-image"},"Find the Compiled Image"),(0,n.yg)("p",null,"Once the compilation is successful, navigate to ",(0,n.yg)("inlineCode",{parentName:"p"},"seeed-linux-buildroot/output/images")," and you will find the compiled image as ",(0,n.yg)("strong",{parentName:"p"},"sdcard.img")),(0,n.yg)("p",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/ReTerminal/buildroot/image-location-1.png",alt:"pir",width:"1000",height:"auto"})),(0,n.yg)("h3",{id:"download-already-compiled-image"},"Download Already Compiled Image"),(0,n.yg)("p",null,"If you want to download a reTerminal system image which is already compiled using Buildroot, you can proceed to the steps below."),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"Step 1.")," Open ",(0,n.yg)("a",{parentName:"p",href:"https://github.com/Seeed-Studio/seeed-linux-buildroot/actions"},"this link")," to enter the ",(0,n.yg)("strong",{parentName:"p"},"Actions")," page of ",(0,n.yg)("strong",{parentName:"p"},"seeed-linux-buildroot")," GitHub repo")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("strong",{parentName:"p"},"Step 2.")," Click on the latest ",(0,n.yg)("strong",{parentName:"p"},"Seeed reTerminal buildroot")," workflow"))),(0,n.yg)("p",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/ReTerminal/buildroot/workflow.png",alt:"pir",width:"1000",height:"auto"})),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Step 3.")," Under ",(0,n.yg)("strong",{parentName:"li"},"Artifacts"),", click on ",(0,n.yg)("strong",{parentName:"li"},"buildroot deploy")," to start downloading the image")),(0,n.yg)("p",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/ReTerminal/buildroot/download.jpg",alt:"pir",width:"1000",height:"auto"})),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Note:")," After the downloading the image, extract the image to obtain the ",(0,n.yg)("strong",{parentName:"p"},"sdcard.img")," file"),(0,n.yg)("h2",{id:"flash-the-image-to-reterminal"},"Flash the Image to reTerminal"),(0,n.yg)("p",null,"Now we will move onto flashing the image to the eMMC of the CM4 on the reTerminal."),(0,n.yg)("p",null,"Follow the steps in ",(0,n.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/reTerminal/#getting-started-with-reterminal-extended"},"this wiki")," and pay attention to the following step:"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Note:")," When you open ",(0,n.yg)("strong",{parentName:"p"},"Raspberry Pi Imager"),", click ",(0,n.yg)("strong",{parentName:"p"},"CHOOSE OS"),", select ",(0,n.yg)("strong",{parentName:"p"},"Use custom")," and choose the downloaded ",(0,n.yg)("strong",{parentName:"p"},"sdcard.img")," file."),(0,n.yg)("p",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/ReTerminal/buildroot/RPi-imager-1.png",alt:"pir",width:"600",height:"auto"})),(0,n.yg)("h2",{id:"first-boot-on-reterminal"},"First Boot on reTerminal"),(0,n.yg)("p",null,"After we flash the system image to the reTerminal, power on the reTerminal. Here you will see the kernel log pop up on the reTerminal LCD and at last a demo application will open which is made using Qt."),(0,n.yg)("p",null,"The boot up time of the default system image is around 30 seconds"),(0,n.yg)("p",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/ReTerminal/buildroot/bootup.gif",alt:"pir",width:"1000",height:"auto"})),(0,n.yg)("h2",{id:"analyze-buildroot-image"},"Analyze Buildroot Image"),(0,n.yg)("p",null,"As mentioned earlier, Buildroot is a very powerful tool, it can rely on third-party libraries and tools, can quickly build what we need. If you want to understand the Buildroot compilation time, dependencies, size of the resources consumed by the compilation and so on, it is very inconvenient to check through the code. However, Buildroot provides visual analysis tools to analyse the above-mentioned and we only need a few simple commands to use them."),(0,n.yg)("p",null,"Start by installing the following packages"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-sh"},"sudo apt install python3-matplotlib python3-numpy\n")),(0,n.yg)("h3",{id:"generate-dependency-diagrams"},"Generate Dependency Diagrams"),(0,n.yg)("p",null,"One of Buildroot's jobs is to understand the dependencies between packages and make sure they are built in the correct order. These dependencies can sometimes be complex, and for a given system, it is often not easy to understand why one package or another was introduced by Buildroot and built successfully. To help understand dependencies and better understand the role of different components in embedded Linux systems, Buildroot is able to generate dependency diagrams (in PDF format)"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Step 1.")," Install the following package")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-sh"},"sudo apt install graphviz\n")),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Step 2.")," Generate dependency diagrams")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-sh"},"make graph-depends\n")),(0,n.yg)("p",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/ReTerminal/buildroot/depends-command.png",alt:"pir",width:"1000",height:"auto"})),(0,n.yg)("p",null,"After the above commands, the dependency diagrams will be generated at ",(0,n.yg)("inlineCode",{parentName:"p"},"seeed-linux-buildroot > output > graphs")," as:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"graph-depends.pdf"),(0,n.yg)("li",{parentName:"ul"},"graph-depends.dot")),(0,n.yg)("p",null,(0,n.yg)("a",{parentName:"p",href:"https://files.seeedstudio.com/wiki/ReTerminal/buildroot/graph-depends-img.png"},(0,n.yg)("img",{parentName:"a",src:"https://files.seeedstudio.com/wiki/ReTerminal/buildroot/graph-depends-img.png",alt:null}))),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Note:")," Click on the above image to view an enlarged version"),(0,n.yg)("h3",{id:"generate-analysis-of-size-of-the-resources-consumed-by-the-compilation"},"Generate Analysis of Size of the Resources Consumed by the Compilation"),(0,n.yg)("p",null,"Buildroot can generate an analysis of the size of the resources consumed by the compilation."),(0,n.yg)("p",null,"Type the following command"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-sh"},"make graph-size\n")),(0,n.yg)("p",null,"After the above command, the visual analysis files will be generated at ",(0,n.yg)("inlineCode",{parentName:"p"},"seeed-linux-buildroot > output > graphs")," as:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"graph-size.pdf"),(0,n.yg)("li",{parentName:"ul"},"file-size-stats.csv"),(0,n.yg)("li",{parentName:"ul"},"package-size-stats.csv")),(0,n.yg)("p",null,(0,n.yg)("a",{parentName:"p",href:"https://files.seeedstudio.com/wiki/ReTerminal/buildroot/graph-size-img.png"},(0,n.yg)("img",{parentName:"a",src:"https://files.seeedstudio.com/wiki/ReTerminal/buildroot/graph-size-img.png",alt:null}))),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Note:")," Click on the above image to view an enlarged version"),(0,n.yg)("h2",{id:"test-buildroot-image"},"Test Buildroot Image"),(0,n.yg)("p",null,"To test the above Buildroot image with reTerminal, you can visit the ",(0,n.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/reTerminal-hardware-interfaces-usage"},"reTerminal Hardware and Interfaces Usage wiki")," and refer to the steps mentioned."),(0,n.yg)("h2",{id:"resources"},"Resources"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"[Webpage]")," ",(0,n.yg)("a",{parentName:"li",href:"https://buildroot.org/docs.html"},"Buildroot Documentation")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"[GitHub]")," ",(0,n.yg)("a",{parentName:"li",href:"https://github.com/Seeed-Studio/seeed-linux-buildroot"},"seeed-linux-buildroot"))),(0,n.yg)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,n.yg)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,n.yg)("div",{class:"button_tech_support_container"},(0,n.yg)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,n.yg)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,n.yg)("div",{class:"button_tech_support_container"},(0,n.yg)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,n.yg)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}g.isMDXComponent=!0}}]);