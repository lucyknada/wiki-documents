"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[40349],{15680:(e,t,a)=>{a.d(t,{xA:()=>p,yg:()=>h});var n=a(96540);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),g=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},p=function(e){var t=g(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},y=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=g(a),y=r,h=c["".concat(s,".").concat(y)]||c[y]||u[y]||o;return a?n.createElement(h,i(i({ref:t},p),{},{components:a})):n.createElement(h,i({ref:t},p))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=y;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:r,i[1]=l;for(var g=2;g<o;g++)i[g]=a[g];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}y.displayName="MDXCreateElement"},36119:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>l,toc:()=>g});var n=a(58168),r=(a(96540),a(15680));const o={description:"Connect SenseCAP M2 Multi-Platform Gateway to TTN",title:"Connecting to TTN",keywords:["SenseCAP Network"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",last_update:{date:"07/14/2023",author:"Jessie"}},i=void 0,l={unversionedId:"Network/SenseCAP_Network/SenseCAP_M2_Multi_Platform/Tutorial/Connect-M2-Multi-Platform-Gateway-to-The-Things-Network",id:"Network/SenseCAP_Network/SenseCAP_M2_Multi_Platform/Tutorial/Connect-M2-Multi-Platform-Gateway-to-The-Things-Network",title:"Connecting to TTN",description:"Connect SenseCAP M2 Multi-Platform Gateway to TTN",source:"@site/docs/Network/SenseCAP_Network/SenseCAP_M2_Multi_Platform/Tutorial/Connect-M2-Multi-Platform-Gateway-to-The-Things-Network.md",sourceDirName:"Network/SenseCAP_Network/SenseCAP_M2_Multi_Platform/Tutorial",slug:"/Network/SenseCAP_Network/SenseCAP_M2_Multi_Platform/Tutorial/Connect-M2-Multi-Platform-Gateway-to-The-Things-Network",permalink:"/Network/SenseCAP_Network/SenseCAP_M2_Multi_Platform/Tutorial/Connect-M2-Multi-Platform-Gateway-to-The-Things-Network",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Network/SenseCAP_Network/SenseCAP_M2_Multi_Platform/Tutorial/Connect-M2-Multi-Platform-Gateway-to-The-Things-Network.md",tags:[],version:"current",lastUpdatedBy:"Jessie",lastUpdatedAt:1689292800,formattedLastUpdatedAt:"Jul 14, 2023",frontMatter:{description:"Connect SenseCAP M2 Multi-Platform Gateway to TTN",title:"Connecting to TTN",keywords:["SenseCAP Network"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",last_update:{date:"07/14/2023",author:"Jessie"}},sidebar:"ProductSidebar",previous:{title:"Connecting to AWS IoT",permalink:"/Network/SenseCAP_Network/SenseCAP_M2_Multi_Platform/Tutorial/Connect-M2-Multi-Platform-Gateway-to-AWS-IoT"},next:{title:"Connecting to ChirpStack",permalink:"/Network/SenseCAP_Network/SenseCAP_M2_Multi_Platform/Tutorial/Connect-M2-Multi-Platform-Gateway-to-ChirpStack"}},s={},g=[{value:"<strong>Connecting via Packet Forwarders</strong>",id:"connecting-via-packet-forwarders",level:2},{value:"TTN Configuration",id:"ttn-configuration",level:3},{value:"Gateway Configuration",id:"gateway-configuration",level:3},{value:"<strong>Connecting via Basic Station</strong>",id:"connecting-via-basic-station",level:2},{value:"TTN Configuration",id:"ttn-configuration-1",level:3},{value:"Gateway Configuration",id:"gateway-configuration-1",level:3},{value:"Check the Gateway Status",id:"check-the-gateway-status",level:2}],p={toc:g},c="wrapper";function u(e){let{components:t,...a}=e;return(0,r.yg)(c,(0,n.A)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"There are two ways to connect to the Things Network: Packet forward and Basics\u2122 Station. Choose a way to connect your gateway."),(0,r.yg)("p",null,"Semtech UDP Packet Forwarder\xa0is the original LoRaWAN\xae packet forwarder, connecting to servers through the Semtech UDP protocol."),(0,r.yg)("p",null,"LoRa Basics\u2122 Station is the preferred way of connecting Gateways to The Things Stack."),(0,r.yg)("h2",{id:"connecting-via-packet-forwarders"},(0,r.yg)("strong",{parentName:"h2"},"Connecting via Packet Forwarders")),(0,r.yg)("p",null,"The\xa0Semtech UDP Packet Forwarder\xa0is the original LoRaWAN\xae packet forwarder, connecting to servers through the Semtech UDP protocol."),(0,r.yg)("h3",{id:"ttn-configuration"},"TTN Configuration"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Step 1"),": Log into ",(0,r.yg)("a",{parentName:"p",href:"https://eu1.cloud.thethings.network/console"},"The Things Stack"),". If you don't have a TTN account, please register first.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Step 2"),": Register the gateway"))),(0,r.yg)("p",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/register2.png",alt:"pir",width:600,height:"auto"})),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Gateway EUI"),": Gateway EUI can be found on the device label or Local Console"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Gateway ID"),": A unique identifier for your gateway(the ID must contain only lowercase letters, numbers, and dashes)"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Gateway name"),": A name of your gateway"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Frequency plan"),": Select the corresponding frequency according to your gateway version"),(0,r.yg)("p",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/set1.png",alt:"pir",width:600,height:"auto"})),(0,r.yg)("p",null,"You can check the Gateway in the overview after successful registration."),(0,r.yg)("p",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/set2.png",alt:"pir",width:600,height:"auto"})),(0,r.yg)("h3",{id:"gateway-configuration"},"Gateway Configuration"),(0,r.yg)("p",null,"Configure the gateway via the Web UI,please check the ",(0,r.yg)("a",{parentName:"p",href:"https://files.seeedstudio.com/products/SenseCAP/M2_Multi-Platform_Gateway/Quick_Start_for_SenseCAP_Gateway_&_Sensors.pdf"},"Quick Start")," to log into Local Console first."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Step 1"),": LoRa Network Settings")),(0,r.yg)("p",null,"Navigate to\xa0",(0,r.yg)("strong",{parentName:"p"},"LoRa")," >\xa0",(0,r.yg)("strong",{parentName:"p"},"LoRa")," ",(0,r.yg)("strong",{parentName:"p"},"Network")," "),(0,r.yg)("p",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/lora_network.png",alt:"pir",width:600,height:"auto"})),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Step 2:")," Set Mode to Packet Forward")),(0,r.yg)("p",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/packet.png",alt:"pir",width:600,height:"auto"})),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Step 3:"),"Packet Forwarder Settings:")),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Gateway EUI"),": It will automatically get the EUI of the connected gateway ")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Server Address"),":\nFor Semtech UDP Packet Forwarder use\xa0'server-address'\nThe\xa0'server-address'\xa0is the address of your The Things Stack deployment.\nSee\xa0",(0,r.yg)("a",{parentName:"p",href:"https://www.thethingsindustries.com/docs/the-things-stack/concepts/server-addresses/"},"Server Addresses"),"\xa0for more info.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Server Port(Up/Down)"),": The\xa0Up Port\xa0and\xa0Down Port\xa0are typically\xa01700."))),(0,r.yg)("p",null,"Other settings can be left as default, or can be changed to suit your requirements."),(0,r.yg)("p",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/server_address.png",alt:"pir",width:600,height:"auto"})),(0,r.yg)("p",null,"Click ",(0,r.yg)("strong",{parentName:"p"},"Save&Apply")," to apply your settings."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Step 4"),": Channel Plan Settings")),(0,r.yg)("p",null,"Navigate to\xa0",(0,r.yg)("strong",{parentName:"p"},"LoRa")," >\xa0",(0,r.yg)("strong",{parentName:"p"},"Channel Plan")," "),(0,r.yg)("p",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/lora_network.png",alt:"pir",width:600,height:"auto"})),(0,r.yg)("p",null,"Select the Region and Frequency plan according to the actual choice."),(0,r.yg)("p",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/setting3.png",alt:"pir",width:600,height:"auto"})),(0,r.yg)("p",null,"After setting, click ",(0,r.yg)("strong",{parentName:"p"},"Save&Apply")),(0,r.yg)("h2",{id:"connecting-via-basic-station"},(0,r.yg)("strong",{parentName:"h2"},"Connecting via Basic Station")),(0,r.yg)("p",null,"LoRa Basics\u2122 Station is the preferred way of connecting Gateways to The Things Stack."),(0,r.yg)("h3",{id:"ttn-configuration-1"},"TTN Configuration"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Step 1"),": Register gateway")),(0,r.yg)("p",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/register2.png",alt:"pir",width:600,height:"auto"})),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Step 2"),":Enable Require authenticated connection")),(0,r.yg)("p",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/enable_setting.png",alt:"pir",width:600,height:"auto"})),(0,r.yg)("p",null,"This will only allow a gateway to connect if it uses a TLS enabled Basic Station or MQTT connection. "),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Step 3:")," Create an API key")),(0,r.yg)("p",null,"Select a option to generate a API key for the CUPS or LNS service automatically, then you can authorize the gateway right away."),(0,r.yg)("p",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/APIkey.png",alt:"pir",width:600,height:"auto"})),(0,r.yg)("p",null,"Choose a Server according to your need, then click \u201cRegister gateway\u201d"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"LoRaWAN Network Server (LNS)")),(0,r.yg)("p",null,"LNS establishes a data connection between a LoRa Basics\u2122 Station gateway and a Network Server (in this case, The Things Stack). LoRa\xae uplink and downlink frames are exchanged through this data connection. The LNS protocol is\xa0required\xa0for sending and receiving LoRaWAN data."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Configuration and Update Server (CUPS)")),(0,r.yg)("p",null,"CUPS allows a Network Server to configure gateways remotely, and to update gateway firmware. CUPS is\xa0not required\xa0for sending and receiving LoRaWAN data, but it can greatly simplify the management of gateways. Configuring CUPS will also automatically retrieve LNS credentials and configure LNS on your gateway."),(0,r.yg)("p",null,"More information about LoRa Basics\u2122 Station is available at\xa0",(0,r.yg)("a",{parentName:"p",href:"https://lora-developers.semtech.com/resources/tools/lora-basics/lora-basics-for-gateways/"},"Semtech\u2019s Developer Portal"),"."),(0,r.yg)("h3",{id:"gateway-configuration-1"},"Gateway Configuration"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Step 1"),": LoRa Network Settings\nNavigate to ",(0,r.yg)("strong",{parentName:"li"},"LoRa")," > ",(0,r.yg)("strong",{parentName:"li"},"LoRa Network"))),(0,r.yg)("p",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/lora_network.png",alt:"pir",width:600,height:"auto"})),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Step 2"),":Set Mode to Basics Station")),(0,r.yg)("p",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/basic.png",alt:"pir",width:600,height:"auto"})),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Step 3"),":Basic Station Settings:")),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Gateway EUI"),": It will automatically get the EUI of the connected gateway ")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Server"),": Select LNS or CUPS\nCheck the previous step for more details about the servers.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"URL:"),":\nCUPS uses the URI: https://server-address:443"))),(0,r.yg)("p",null,"LNS uses the URI: wss://server-address:8887"),(0,r.yg)("p",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/url.png",alt:"pir",width:600,height:"auto"})),(0,r.yg)("ol",{start:4},(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Authentication Mode:")," TLS server authentication and Client token\nThe Things Stack supports\xa0TLS server authentication and client token. This requires a\xa0",(0,r.yg)("em",{parentName:"p"},".trust\xa0file and a\xa0"),".key\xa0file. .")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"trust:")," This is the\xa0",(0,r.yg)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Certificate_authority"},"CA certificate"),"\xa0which secures your domain.\nA\xa0.pem\xa0file containing common certificates is available in the\xa0",(0,r.yg)("a",{parentName:"p",href:"https://www.thethingsindustries.com/docs/reference/root-certificates/"},"Root Certificates Reference"),".\nCopy the data content of the certificate file (the certificate can be opened in text form)."))),(0,r.yg)("ol",{start:6},(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"token:")," Authorization:Bearer <Your_API_Key>")),(0,r.yg)("p",null,"Other settings can be left as default, or can be changed to suit your requirements."),(0,r.yg)("p",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/token.png",alt:"pir",width:600,height:"auto"})),(0,r.yg)("h2",{id:"check-the-gateway-status"},"Check the Gateway Status"),(0,r.yg)("p",null,"After the settings are completed, we can view the live data of your gateway."),(0,r.yg)("p",null,"You can see that your gateway is connected to TTN now."),(0,r.yg)("p",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/M2_Multi-Platform/status.png",alt:"pir",width:600,height:"auto"})))}u.isMDXComponent=!0}}]);