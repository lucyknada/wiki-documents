"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[82663],{15680:(e,n,t)=>{t.d(n,{xA:()=>c,yg:()=>m});var a=t(96540);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=a.createContext({}),d=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=d(e.components);return a.createElement(l.Provider,{value:n},e.children)},p="mdxType",g={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},u=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),p=d(t),u=i,m=p["".concat(l,".").concat(u)]||p[u]||g[u]||r;return t?a.createElement(m,o(o({ref:n},c),{},{components:t})):a.createElement(m,o({ref:n},c))}));function m(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=t.length,o=new Array(r);o[0]=u;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[p]="string"==typeof e?e:i,o[1]=s;for(var d=2;d<r;d++)o[d]=t[d];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},19365:(e,n,t)=>{t.d(n,{A:()=>o});var a=t(96540),i=t(20053);const r={tabItem:"tabItem_Ymn6"};function o(e){let{children:n,hidden:t,className:o}=e;return a.createElement("div",{role:"tabpanel",className:(0,i.A)(r.tabItem,o),hidden:t},n)}},11470:(e,n,t)=>{t.d(n,{A:()=>A});var a=t(58168),i=t(96540),r=t(20053),o=t(23104),s=t(56347),l=t(57485),d=t(31682),c=t(89466);function p(e){return function(e){return i.Children.map(e,(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:n,label:t,attributes:a,default:i}}=e;return{value:n,label:t,attributes:a,default:i}}))}function g(e){const{values:n,children:t}=e;return(0,i.useMemo)((()=>{const e=n??p(t);return function(e){const n=(0,d.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function u(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function m(e){let{queryString:n=!1,groupId:t}=e;const a=(0,s.W6)(),r=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,l.aZ)(r),(0,i.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(a.location.search);n.set(r,e),a.replace({...a.location,search:n.toString()})}),[r,a])]}function y(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,r=g(e),[o,s]=(0,i.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!u({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=t.find((e=>e.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:r}))),[l,d]=m({queryString:t,groupId:a}),[p,y]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[a,r]=(0,c.Dv)(t);return[a,(0,i.useCallback)((e=>{t&&r.set(e)}),[t,r])]}({groupId:a}),h=(()=>{const e=l??p;return u({value:e,tabValues:r})?e:null})();(0,i.useLayoutEffect)((()=>{h&&s(h)}),[h]);return{selectedValue:o,selectValue:(0,i.useCallback)((e=>{if(!u({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);s(e),d(e),y(e)}),[d,y,r]),tabValues:r}}var h=t(92303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function v(e){let{className:n,block:t,selectedValue:s,selectValue:l,tabValues:d}=e;const c=[],{blockElementScrollPositionUntilNextRender:p}=(0,o.a_)(),g=e=>{const n=e.currentTarget,t=c.indexOf(n),a=d[t].value;a!==s&&(p(n),l(a))},u=e=>{let n=null;switch(e.key){case"Enter":g(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}n?.focus()};return i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},n)},d.map((e=>{let{value:n,label:t,attributes:o}=e;return i.createElement("li",(0,a.A)({role:"tab",tabIndex:s===n?0:-1,"aria-selected":s===n,key:n,ref:e=>c.push(e),onKeyDown:u,onClick:g},o,{className:(0,r.A)("tabs__item",f.tabItem,o?.className,{"tabs__item--active":s===n})}),t??n)})))}function w(e){let{lazy:n,children:t,selectedValue:a}=e;const r=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=r.find((e=>e.props.value===a));return e?(0,i.cloneElement)(e,{className:"margin-top--md"}):null}return i.createElement("div",{className:"margin-top--md"},r.map(((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==a}))))}function N(e){const n=y(e);return i.createElement("div",{className:(0,r.A)("tabs-container",f.tabList)},i.createElement(v,(0,a.A)({},e,n)),i.createElement(w,(0,a.A)({},e,n)))}function A(e){const n=(0,h.A)();return i.createElement(N,(0,a.A)({key:String(n)},e))}},82150:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>s,metadata:()=>d,toc:()=>p});var a=t(58168),i=(t(96540),t(15680)),r=t(11470),o=t(19365);const s={description:"To preview LoRaWAN feature of SenseCAP Indicator",title:"LoRaWAN End Node - SenseCAP Indicator",keywords:["indicator","Touch","Screen"],image:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/lorawan_landing_page.png",slug:"/SenseCAP_Indicator_Application_LoRaWAN",toc_max_heading_level:4,sidebar_position:4,last_update:{date:new Date("2024-01-15T17:29:20.793Z"),author:"Spencer"},tags:["device"],categories:["SenseCAP"]},l=void 0,d={unversionedId:"Sensor/SenseCAP/SenseCAP_Indicator/Application/LoRaWAN",id:"Sensor/SenseCAP/SenseCAP_Indicator/Application/LoRaWAN",title:"LoRaWAN End Node - SenseCAP Indicator",description:"To preview LoRaWAN feature of SenseCAP Indicator",source:"@site/docs/Sensor/SenseCAP/SenseCAP_Indicator/Application/LoRaWAN.md",sourceDirName:"Sensor/SenseCAP/SenseCAP_Indicator/Application",slug:"/SenseCAP_Indicator_Application_LoRaWAN",permalink:"/SenseCAP_Indicator_Application_LoRaWAN",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Sensor/SenseCAP/SenseCAP_Indicator/Application/LoRaWAN.md",tags:[{label:"device",permalink:"/tags/device"}],version:"current",lastUpdatedBy:"Spencer",lastUpdatedAt:1705339760.793,formattedLastUpdatedAt:"Jan 15, 2024",sidebarPosition:4,frontMatter:{description:"To preview LoRaWAN feature of SenseCAP Indicator",title:"LoRaWAN End Node - SenseCAP Indicator",keywords:["indicator","Touch","Screen"],image:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/lorawan_landing_page.png",slug:"/SenseCAP_Indicator_Application_LoRaWAN",toc_max_heading_level:4,sidebar_position:4,last_update:{date:"2024-01-15T17:29:20.793Z",author:"Spencer"},tags:["device"],categories:["SenseCAP"]},sidebar:"ProductSidebar",previous:{title:"LoRa Communication - SenseCAP Indicator",permalink:"/SenseCAP_Indicator_LoRa"},next:{title:"Matter - SenseCAP Indicator",permalink:"/SenseCAP_Indicator_Application_Matter"}},c={},p=[{value:"Hands-On Demo",id:"hands-on-demo",level:2},{value:"LoRaWAN",id:"lorawan",level:2},{value:"Advanced Perception System",id:"advanced-perception-system",level:2},{value:"Overview",id:"overview",level:2},{value:"Step 1. Obtain Firmware",id:"flash_firmware",level:2},{value:"1.1 Download Firmware:",id:"11-download-firmware",level:3},{value:"1.2 Flash Firmware:",id:"12-flash-firmware",level:3},{value:"Step 2. Register the Device on LoRaWAN Network Server",id:"HEAD_register_device",level:2},{value:"2.1 Configure the SenseCAP LoRaWAN Gateway",id:"21-configure-the-sensecap-lorawan-gateway",level:3},{value:"2.2 Configure the Local Network Server (ChirpStack)",id:"22-configure-the-local-network-server-chirpstack",level:3},{value:"2.2.1 Create a Device Profile",id:"create_dev_profile",level:4},{value:"2.2.2 Add an Application",id:"add_appication",level:4},{value:"2.2.3 Register a device under an application",id:"register_device",level:4},{value:"Step 3. Configure SenseCAP Indicator to Join Network",id:"configure_credentials",level:2},{value:"Step 4 <strong>Sending and Receiving Messages</strong>",id:"uplink_and_downlink",level:2},{value:"Uplink Message",id:"uplink-message",level:3},{value:"Uplink Message: upload Sensor Data",id:"uplink-message-upload-sensor-data",level:4},{value:"Downlink Message",id:"downlink-message",level:3},{value:"Demo Message: Controlling a Bulb",id:"demo-message-controlling-a-bulb",level:4},{value:"Funtionalities wait to be explored",id:"function",level:2},{value:"Console Manual Page",id:"commands",level:2},{value:"<strong>lorawan</strong>",id:"lorawan-1",level:3},{value:"Usage:",id:"usage",level:5},{value:"Options:",id:"options",level:5},{value:"FAQs",id:"faqs",level:2},{value:"ODM Service",id:"odm-service",level:2},{value:"Tech Support",id:"tech-support",level:2}],g={toc:p},u="wrapper";function m(e){let{components:n,...t}=e;return(0,i.yg)(u,(0,a.A)({},g,t,{components:n,mdxType:"MDXLayout"}),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/lorawan_landing_page.png"})),(0,i.yg)("h2",{id:"hands-on-demo"},"Hands-On Demo"),(0,i.yg)("p",null,"In this section, we'll delve into the SenseCAP Indicator's basic LoRaWAN(",(0,i.yg)("em",{parentName:"p"},"Class C")," & ",(0,i.yg)("em",{parentName:"p"},"OTAA"),") functionality through a practical demonstration. The process is divided into three main steps:"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("a",{parentName:"li",href:"#flash_firmware"},"Obtain Firmware"),": Customize and install the firmware as needed."),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("a",{parentName:"li",href:"#HEAD_register_device"},"Registering the Device"),": Add your device to a LoRaWAN Network Server."),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("a",{parentName:"li",href:"#configure_credentials"},"Configuring LoRaWAN Credentials"),": Enter necessary network details on your SenseCAP Indicator.")),(0,i.yg)("p",null,"Before we begin, let's get some background on LoRaWAN."),(0,i.yg)("h2",{id:"lorawan"},"LoRaWAN"),(0,i.yg)("p",null,"LoRaWAN is described as a Low Power, Wide Area (LPWA) networking protocol that wirelessly connects battery-operated devices to the internet across large regions or networks. It's a part of the LoRa wireless system and operates in a license-free spectrum, supporting long-range communication with limited bandwidth. It is characterized by long-range communication (up to 10 miles), long battery life (up to 10 years), low cost, and low power usage with a payload size ranging from 51 to 241 bytes depending on the data",(0,i.yg)("sup",{parentName:"p",id:"fnref-1"},(0,i.yg)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1")),"."),(0,i.yg)("div",{style:{textAlign:"center"}},(0,i.yg)("img",{width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_LoRaWAN_Starter_Kit/Getting_Started/3.png",alt:"LoRaWAN Framework "}),(0,i.yg)("div",{style:{marginTop:"-8px"}},(0,i.yg)("em",null,"LoRaWAN Network Framework"))),(0,i.yg)("h2",{id:"advanced-perception-system"},"Advanced Perception System"),(0,i.yg)("p",null,'Seeed Studio\'s "Advanced Perception System" is an ',(0,i.yg)("a",{parentName:"p",href:"/SenseCAP_introduction"},"IoT solution")," that provides a comprehensive array of sensing, networking, edge computing tools and cloud designed to enhance environmental awareness across various industries. This system, equipped with a diverse array of modules and devices",(0,i.yg)("sup",{parentName:"p",id:"fnref-2"},(0,i.yg)("a",{parentName:"sup",href:"#fn-2",className:"footnote-ref"},"2")),', acts as the digital "eyes and ears," facilitating a transformative understanding of the real world.'),(0,i.yg)("div",{style:{textAlign:"center"}},(0,i.yg)("img",{class:"border-radius: 10px;",width:680,src:"https://www.seeedstudio.com/blog/wp-content/uploads/2023/03/Seeed-Studio-Advanced-Perception-System-2048x1150.png",alt:"Advanced Perception System"}),(0,i.yg)("div",{style:{marginTop:"-8px"}},(0,i.yg)("em",null,"Advanced Perception System Layers")),(0,i.yg)("br",null)),(0,i.yg)("p",null,"The SenseCAP Team focuses primarily on Sensor and Network components, committing to delivering top-notch quality and bespoke industry solutions. Their work has resulted in the creation of acclaimed offerings, such as the innovative ",(0,i.yg)("a",{parentName:"p",href:"https://www.seeedstudio.com/smart-village"},"Smart Village Solution"),", which has garnered praise for its practicality and forward-thinking design."),(0,i.yg)("p",null,"In the realm of the Helium network, the team's contributions are particularly noteworthy. Devices like the SenseCAP M1, M2, and M4 are not just high-performance Helium hotspots; they are pivotal in enabling users to earn HNT cryptocurrency while concurrently constructing a decentralized wireless LoRaWAN\xae network infrastructure. The SenseCAP M4 Square stands out for its ability to operate multiple Web 3.0 Apps, thereby streamlining the deployment of intricate multi-application systems.",(0,i.yg)("sup",{parentName:"p",id:"fnref-3"},(0,i.yg)("a",{parentName:"sup",href:"#fn-3",className:"footnote-ref"},"3"))),(0,i.yg)("p",null,"Leveraging this profound expertise and continual engagement with a diverse customer base, the SenseCAP Team has strategically decided to integrate LoRa functionality into the SenseCAP Indicator."),(0,i.yg)("p",null,"Let's take a closer look at the ",(0,i.yg)("a",{parentName:"p",href:"https://www.seeedstudio.com/SenseCAP-Indicator-D1-p-5643.html"},"SenseCAP Indicator"),"'s LoRaWAN functionality."),(0,i.yg)("h2",{id:"overview"},"Overview"),(0,i.yg)("table",null,(0,i.yg)("thead",{parentName:"table"},(0,i.yg)("tr",{parentName:"thead"},(0,i.yg)("th",{parentName:"tr",align:"center"},"Feature"),(0,i.yg)("th",{parentName:"tr",align:"center"},"Details"))),(0,i.yg)("tbody",{parentName:"table"},(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:"center"},"Radio Transceivers"),(0,i.yg)("td",{parentName:"tr",align:"center"},"SX1262")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:"center"},"Classes Supported"),(0,i.yg)("td",{parentName:"tr",align:"center"},"Class A/B/C")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:"center"},"Supported Frequency Bands"),(0,i.yg)("td",{parentName:"tr",align:"center"},"AS923, AU915, CN779, EU433, EU868, KR920, IN865, US915, RU864, US915")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:"center"},"LoRaWAN Mac Version"),(0,i.yg)("td",{parentName:"tr",align:"center"},"1.0.4/1.1.0")),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:"center"},"End-device LoRaWAN Stack Adopted"),(0,i.yg)("td",{parentName:"tr",align:"center"},(0,i.yg)("a",{parentName:"td",href:"https://github.com/Lora-net/LoRaMac-node/releases/tag/v4.7.0"},"LoRaMac-node"))),(0,i.yg)("tr",{parentName:"tbody"},(0,i.yg)("td",{parentName:"tr",align:"center"},"Documentation"),(0,i.yg)("td",{parentName:"tr",align:"center"},(0,i.yg)("a",{parentName:"td",href:"http://stackforce.github.io/LoRaMac-doc/"},"LoRaMac Documentation"))))),(0,i.yg)("h2",{id:"flash_firmware"},"Step 1. Obtain Firmware"),(0,i.yg)("h3",{id:"11-download-firmware"},"1.1 Download Firmware:"),(0,i.yg)("p",null,"To begin, download the LoRaWAN firmware, ",(0,i.yg)("inlineCode",{parentName:"p"},"indicator_lorawan.bin"),",  for the SenseCAP Indicator from the GitHub Release page."),(0,i.yg)("div",{class:"github_container",style:{textAlign:"center"}},(0,i.yg)("a",{class:"github_item",href:"https://github.com/Seeed-Solution/SenseCAP_Indicator_ESP32/releases"},(0,i.yg)("strong",null,(0,i.yg)("span",null,(0,i.yg)("font",{color:"FFFFFF",size:"4"}," Download the Firmware")))," ",(0,i.yg)("svg",{"aria-hidden":"true",focusable:"false",role:"img",className:"mr-2",viewBox:"-3 10 9 1",width:16,height:16,fill:"currentColor",style:{textAlign:"center",display:"inline-block",userSelect:"none",verticalAlign:"text-bottom",overflow:"visible"}},(0,i.yg)("path",{d:"M8 0c4.42 0 8 3.58 8 8a8.013 8.013 0 0 1-5.45 7.59c-.4.08-.55-.17-.55-.38 0-.27.01-1.13.01-2.2 0-.75-.25-1.23-.54-1.48 1.78-.2 3.65-.88 3.65-3.95 0-.88-.31-1.59-.82-2.15.08-.2.36-1.02-.08-2.12 0 0-.67-.22-2.2.82-.64-.18-1.32-.27-2-.27-.68 0-1.36.09-2 .27-1.53-1.03-2.2-.82-2.2-.82-.44 1.1-.16 1.92-.08 2.12-.51.56-.82 1.28-.82 2.15 0 3.06 1.86 3.75 3.64 3.95-.23.2-.44.55-.51 1.07-.46.21-1.61.55-2.33-.66-.15-.24-.6-.83-1.23-.82-.67.01-.27.38.01.53.34.19.73.9.82 1.13.16.45.68 1.31 2.69.94 0 .67.01 1.3.01 1.49 0 .21-.15.45-.55.38A7.995 7.995 0 0 1 0 8c0-4.42 3.58-8 8-8Z"})))),(0,i.yg)("br",null),(0,i.yg)("admonition",{title:"Interested in custom firmware?",type:"info"},(0,i.yg)("p",{parentName:"admonition"},"The ",(0,i.yg)("a",{parentName:"p",href:"https://docs.espressif.com/projects/esp-idf/en/release-v5.1/esp32/get-started/index.html#ide"},"ESP-IDF Programming Guide"),"(v5.1) provides insights on building your own. You can access and modify the ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/Seeed-Solution/SenseCAP_Indicator_ESP32"},"source code")," to suit your specific needs.")),(0,i.yg)("h3",{id:"12-flash-firmware"},"1.2 Flash Firmware:"),(0,i.yg)("p",null,"To flash the firmware onto the SenseCAP Indicator, download it first and then use esptool (or ",(0,i.yg)("inlineCode",{parentName:"p"},"esptool.py")," if you have an ESP-IDF environment) to flash it(for comprehensive guidance, refer to the ",(0,i.yg)("a",{parentName:"p",href:"/SenseCAP_Indicator_Application_LoRaWAN"},"instructions"),")."),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Flashing firmware on Windows using esptool:")),(0,i.yg)("p",null,"Use the command below in the Windows command prompt to flash the firmware:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-jsx"},"<tool_path>/esptool.exe --chip esp32s3 --baud 921600 write_flash -z 0x0 <firmware_path>/indicator_lorawan.bin \n")),(0,i.yg)("p",null,"For example, if your ",(0,i.yg)("inlineCode",{parentName:"p"},"flash_bin")," folder is located in drive ",(0,i.yg)("inlineCode",{parentName:"p"},"D:")," and contains the following structure:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-sh"},"flash_bin/\n\u251c\u2500\u2500 esptool.exe\n\u2514\u2500\u2500 indicator_lorawan.bin\n")),(0,i.yg)("p",null,"Your command will look like this:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-sh"},"./esptool.exe --chip esp32s3 --baud 921600 write_flash -z 0x0 ./indicator_lorawan.bin\n")),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/esptool_nonport_flash.png.png"})),(0,i.yg)("p",null,"If you have multiple ports and need to specify one, use the ",(0,i.yg)("inlineCode",{parentName:"p"},"-p")," or ",(0,i.yg)("inlineCode",{parentName:"p"},"--port")," argument:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-sh"},"./esptool.exe --chip esp32s3 -p COM20 --baud 921600 write_flash -z 0x0 ./indicator_lorawan.bin\n")),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/esptool_port_flash.png"})),(0,i.yg)("admonition",{type:"note"},(0,i.yg)("p",{parentName:"admonition"},"Mac users should replace ",(0,i.yg)("inlineCode",{parentName:"p"},"./esptool.exe")," with ",(0,i.yg)("inlineCode",{parentName:"p"},"./esptool"),"."),(0,i.yg)("p",{parentName:"admonition"},"If you encounter issues during flashing, consider reducing the ",(0,i.yg)("strong",{parentName:"p"},"baud speed")," or refer to ",(0,i.yg)("a",{parentName:"p",href:"https://askubuntu.com/questions/1411463/dev-ttyusb0-file-disappears-from-dev-directory-while-using-device"},"these troubleshooting steps"),".")),(0,i.yg)("p",null,"Once the firmware is successfully flashed, retrieve essential parameters like the Device EUI and APPkey from the LoRaWAN Network Server from the subsequent steps."),(0,i.yg)("h2",{id:"HEAD_register_device"},"Step 2. Register the Device on LoRaWAN Network Server"),(0,i.yg)("blockquote",null,(0,i.yg)("p",{parentName:"blockquote"},"Before starting, ensure your device is within a LoRaWAN network's coverage area.")),(0,i.yg)("p",null,"This section will guide you through connecting to a local LoRaWAN network server. We will use the ",(0,i.yg)("a",{parentName:"p",href:"https://www.chirpstack.io/"},"ChirpStack")," platform as an example, alongside the ",(0,i.yg)("a",{parentName:"p",href:"https://www.seeedstudio.com/SenseCAP-Multi-Platform-LoRaWAN-Indoor-Gateway-SX1302-EU868-p-5471.html"},"SenseCAP M2 Multi-Platform LoRaWAN Indoor Gateway (EU868)"),". ",(0,i.yg)("em",{parentName:"p"},"If you are employing a different network server, the procedure will be similar"),"; you'll need to collect the essential information for activation:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"OTAA (Over The Air Activation):",(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"DevEUI"),(0,i.yg)("li",{parentName:"ul"},"AppKey"),(0,i.yg)("li",{parentName:"ul"},"JoinEUI/AppEUI (Mac Version 1.1.0 needed)"))),(0,i.yg)("li",{parentName:"ul"},"ABP (Activation By Personalization): ",(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"DevEUI"),(0,i.yg)("li",{parentName:"ul"},"DevAddr"),(0,i.yg)("li",{parentName:"ul"},"AppSKey"),(0,i.yg)("li",{parentName:"ul"},"NwkSKey")))),(0,i.yg)("h3",{id:"21-configure-the-sensecap-lorawan-gateway"},"2.1 Configure the SenseCAP LoRaWAN Gateway"),(0,i.yg)("p",null,"To configure your SenseCAP gateway, access its web interface where you'll begin setting up a ChirpStack network server. Below is a visual guide displaying the configuration page:"),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/gateway_config.png"})),(0,i.yg)("p",null,"After adjusting the settings, click ",(0,i.yg)("inlineCode",{parentName:"p"},"Save & Apply")," to commit your changes.  You can then access the ChirpStack interface using the provided URL (for example, ",(0,i.yg)("a",{parentName:"p",href:"http://192.168.1.102:8080"},"http://192.168.1.102:8080"),")."),(0,i.yg)("p",null,"Use the following default credentials to log in:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Username:")," ",(0,i.yg)("inlineCode",{parentName:"li"},"admin")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Password:")," ",(0,i.yg)("inlineCode",{parentName:"li"},"admin"))),(0,i.yg)("p",null,"For further details and advanced configuration options, visit the ",(0,i.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/Network/SenseCAP_Network/SenseCAP_M2_Multi_Platform/SenseCAP_M2_MP_Gateway_LNS_Configuration/"},"SenseCAP M2 Gateway LNS Configuration Guide"),"."),(0,i.yg)("h3",{id:"22-configure-the-local-network-server-chirpstack"},"2.2 Configure the Local Network Server (ChirpStack)"),(0,i.yg)("p",null,"Refer to the ChirpStack documentation for detailed features and LoRaWAN version support: ",(0,i.yg)("a",{parentName:"p",href:"https://www.chirpstack.io/network-server/features/lorawan-versions/"},"ChirpStack Network Server Documentation"),"."),(0,i.yg)("p",null,"Here are the steps to configure your local network server using ChirpStack:"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("strong",{parentName:"li"},(0,i.yg)("a",{parentName:"strong",href:"#create_dev_profile"},"Create a Device Profile"),":"),"  This standardizes the settings and capabilities of your devices. It's crucial for ensuring that your devices communicate effectively within the network."),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("strong",{parentName:"li"},(0,i.yg)("a",{parentName:"strong",href:"#add_appication"},"Add an Application"),":")," This helps organize and manage your devices. Applications are used to group devices that share the same purpose or characteristics, making management more straightforward."),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("strong",{parentName:"li"},(0,i.yg)("a",{parentName:"strong",href:"#register_device"},"Register a device under an application"),":")," This step links your device to the specific settings and data handling rules you've established in your application. It's a critical step to make sure your device operates correctly within your network.")),(0,i.yg)("h4",{id:"create_dev_profile"},"2.2.1 Create a Device Profile"),(0,i.yg)("p",null,"To create a new device profile in ",(0,i.yg)("inlineCode",{parentName:"p"},"Device profiles"),", go to 'Tenant' in the sidebar and then select 'Device profiles'."),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:220,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/sidebar_device_profile.png"})),(0,i.yg)("p",null,"Creating a device profile is a crucial step in ensuring your device effectively communicates over the LoRaWAN network. This involves selecting technical parameters that influence the device's performance and compatibility. Here's how you can set it up:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"MAC Version:")," This refers to the version of the Media Access Control (MAC) protocol your device utilizes. The MAC protocol is essential for managing how your device accesses the network. You can select between versions v1.0.4 and v1.1.0."),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"Regional Parameters Revision:")," These are the specific parameters that need to be configured based on the geographical location of your device. They ensure that the device complies with local regulations and network specifications.")),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Choosing MAC Version")),(0,i.yg)("p",null,"The MAC version you select is pivotal as it determines the set of credentials your device will require:"),(0,i.yg)(r.A,{mdxType:"Tabs"},(0,i.yg)(o.A,{value:"MAC Version 1.0.4",mdxType:"TabItem"},(0,i.yg)("p",null,"  You'll need the following credentials:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"DevEUI:")," This is a unique identifier assigned to your device, ensuring global uniqueness."),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"AppKey:")," A secret key used for encrypting and securing your device's communications."))),(0,i.yg)(o.A,{value:"MAC Version 1.1.0",mdxType:"TabItem"},(0,i.yg)("p",null,"  Your device will require these credentials:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"DevEUI:")," A globally unique identifier for your device."),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"AppEUI/JoinEUI:")," A unique identifier for the application your device connects to."),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"AppKey:")," The cryptographic key used for securing communications.")))),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Choosing Regional Parameters Revision")),(0,i.yg)("p",null,"In the context of setting up a device profile for the LoRaWAN network, the Regional Parameters (RP) version you choose is crucial for ensuring your device operates in compliance with specific regional standards and specifications."),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Current Setup")),(0,i.yg)("p",null,"For now, we are setting up a device profile with MAC Version ",(0,i.yg)("inlineCode",{parentName:"p"},"1.0.4")," and Regional Parameters Revision ",(0,i.yg)("inlineCode",{parentName:"p"},"RP002-1.0.2"),"."),(0,i.yg)("admonition",{title:"Regional Parameters Revision",type:"info"},(0,i.yg)("p",{parentName:"admonition"},"For configuring a device profile on the LoRaWAN network, ",(0,i.yg)("inlineCode",{parentName:"p"},"RP002-1.0.2")," is a suitable choice for current needs. ",(0,i.yg)("inlineCode",{parentName:"p"},"RP002-1.0.3")," is recommended by the ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/Lora-net/LoRaMac-node/blob/v4.7.0/src/mac/region/Region.h"},"code")," as per the ",(0,i.yg)("inlineCode",{parentName:"p"},"v4.7.0")," LoRaMac-node specification.")),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/ns_device_profile_check.png"})),(0,i.yg)("p",null,"Correctly understanding and configuring the necessary elements is key to ensuring your device communicates effectively and securely over the LoRaWAN network. "),(0,i.yg)("p",null,"To use ",(0,i.yg)("strong",{parentName:"p"},"Class C")," device type, it's important to specifically enable this functionality in your device profile."),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/ns_104_classC_enable.png"})),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Decoder Function")),(0,i.yg)("p",null,"Indeed, to make the payload data transmitted by your device meaningful and interpretable, it's essential to implement a decoder within the device profile. This decoder will translate the raw binary data into a readable format, allowing you to understand and utilize the information your device sends effectively."),(0,i.yg)("details",null,(0,i.yg)("summary",null,"Click to copy Decoder.js"),(0,i.yg)("p",null,"The docoder is from ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/Seeed-Solution/SenseCAP_Indicator_ESP32/blob/main/examples/indicator_lorawan/docs/ChirpStackV4_Decoder.js"},"GitHub repository")),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-js"},"function decodeUplink(input) {\n    var decoded = {\n        data:[]\n    };\n    var type;\n    var floatNumber;\n\n    if ( (input.bytes.length  % 5) !== 0) {\n        decoded.data.push({\n            type: \"error\",\n            Value: -1\n        });\n\n        return { data: decoded }\n    }\n\n    const arrayBuffer = new ArrayBuffer(4);\n    const dataView = new DataView(arrayBuffer);\n    \n    for(let j =0 ; j < input.bytes.length; j+=5) {\n        var num =0;\n        switch ( input.bytes[j]) {\n            case 0:\n                type = 'Temp';\n                num  = 2;\n                break;\n            case 1:\n                type = 'Humidity';\n                num  = 2;\n                break;\n            case 2:\n                type = 'CO2';\n                num  = 0;\n                break;\n            case 3:\n                type = 'TVOC';\n                num  = 0;\n                break;\n            case 4:\n                type = 'Light';\n                num  = 0;\n                break;\n            default:\n                type = 'unknown';\n                break;\n        }\n        for (let i = 0; i < 4; i++) {\n            dataView.setUint8(i, input.bytes[j+i+1]);\n        }\n        floatNumber = dataView.getFloat32(0, true); \n        decoded.data.push({\n            type:  type,\n            Value: floatNumber.toFixed(num)\n        });\n    }\n    return { data: decoded }\n}\n\nfunction encodeDownlink(input) {\n  return {\n    bytes: [225, 230, 255, 0]\n  };\n}\n"))),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/ns_add_decoder.png"})),(0,i.yg)("p",null,"Once device profile is created, the next step is to add an application."),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/ns_104_profile.png"})),(0,i.yg)("h4",{id:"add_appication"},"2.2.2 Add an Application"),(0,i.yg)("p",null,"Create and configure an application within your LoRaWAN Network Server to manage your devices."),(0,i.yg)("p",null,"To create a new Application, go to 'Tenant' in the sidebar and then select 'Application'."),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/ns_app_create.png"})),(0,i.yg)("p",null,"To submit, set the Name and optionally provide a description."),(0,i.yg)("h4",{id:"register_device"},"2.2.3 Register a device under an application"),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/ns_add_device.png"})),(0,i.yg)("p",null,"Press the ",(0,i.yg)("inlineCode",{parentName:"p"},"Add device")," button in your application."),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/ns_app_device_add.png"})),(0,i.yg)("p",null,"To add a device, you need to specify a ",(0,i.yg)("inlineCode",{parentName:"p"},"Name")," and provide a ",(0,i.yg)("inlineCode",{parentName:"p"},"Device EUI")," along with the ",(0,i.yg)("inlineCode",{parentName:"p"},"Device Profile")," you've previously created. "),(0,i.yg)("p",null,"You can opt to auto-generate the Device EUI or use an existing one from your device. "),(0,i.yg)("p",null,"For this process, we'll employ the auto-generated Device EUI. After submitting these details, the device will be added to the application, and you'll be automatically redirected to the OTAA Keys section."),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/ns_app_otaa.png"})),(0,i.yg)("p",null,"Click the button to generate a random ",(0,i.yg)("strong",{parentName:"p"},"Application Key (AppKey)")," or opt to use a pre-existing one. Ensure you have all the necessary credentials and parameters. For ",(0,i.yg)("em",{parentName:"p"},"MAC Version 1.0.4"),", the required credentials are:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"DevEUI (Example):")," ",(0,i.yg)("inlineCode",{parentName:"li"},"5d61e4648dc926e2")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("strong",{parentName:"li"},"AppKey (Example):")," ",(0,i.yg)("inlineCode",{parentName:"li"},"ec2b966c2c4bbe94a6ef79d0479db0e5"))),(0,i.yg)("p",null,"With these details, we have the command:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-sh"},"lorawan --eui 5d61e4648dc926e2 --app_key ec2b966c2c4bbe94a6ef79d0479db0e5\n")),(0,i.yg)("p",null,"For additional commands and assistance, refer to the ",(0,i.yg)("a",{parentName:"p",href:"#commands"},"console command")," section."),(0,i.yg)("h2",{id:"configure_credentials"},"Step 3. Configure SenseCAP Indicator to Join Network"),(0,i.yg)("p",null,"To establish a connection with your SenseCAP Indicator, you can use any ",(0,i.yg)("strong",{parentName:"p"},"serial tool"),"(",(0,i.yg)("a",{parentName:"p",href:"https://wiki.emacinc.com/wiki/Getting_Started_With_Minicom"},"Minicom"),", ",(0,i.yg)("a",{parentName:"p",href:"https://www.putty.org/"},"Putty"),", etc.) or just use ",(0,i.yg)("inlineCode",{parentName:"p"},"idf monitor"),"(follow the detailed ",(0,i.yg)("a",{parentName:"p",href:"https://docs.espressif.com/projects/esp-idf/en/v5.1.2/esp32/api-guides/tools/idf-monitor.html"},"instructions provided in the ESP-IDF documentation"),"):"),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/esp_idf_monitor.png"})),(0,i.yg)("admonition",{type:"caution"},(0,i.yg)("p",{parentName:"admonition"},"Ensure your device hasn't started the LoRaWAN connection before this step.\nIf it has, you'll need to stop it.")),(0,i.yg)("p",null,"Enter the commands including the credentials in the console."),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/indicator_otaa_config.png"})),(0,i.yg)("p",null,"Now, you should be able to view the keys on your SenseCAP Indicator. If necessary, make any required updates to the configurations. "),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/bin_press_join.png"})),(0,i.yg)("p",null,"When you pressed the ",(0,i.yg)("em",{parentName:"p"},"Join")," button, you'll be able to observe the connection process directly through the ",(0,i.yg)("em",{parentName:"p"},"console"),", allowing you to monitor and verify the successful establishment of the connection."),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:480,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/bin_console.png"})),(0,i.yg)("h2",{id:"uplink_and_downlink"},"Step 4 ",(0,i.yg)("strong",{parentName:"h2"},"Sending and Receiving Messages")),(0,i.yg)("p",null,"In this section, we will walk you through the process of monitoring both uplink and downlink communications between your device and the LoRaWAN network.",(0,i.yg)("sup",{parentName:"p",id:"fnref-4"},(0,i.yg)("a",{parentName:"sup",href:"#fn-4",className:"footnote-ref"},"4"))),(0,i.yg)("h3",{id:"uplink-message"},"Uplink Message"),(0,i.yg)("p",null,"Uplink messages are fundamental in a LoRaWAN network, enabling devices like the SenseCAP Indicator to transmit data to a network server. These messages are crucial for reporting ",(0,i.yg)("em",{parentName:"p"},"sensor data"),", device status, and other telemetry information."),(0,i.yg)("details",null,(0,i.yg)("summary",null,"The Concept of Uplink Message"),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Uplink in LoRaWAN:")),(0,i.yg)("p",null,"In a LoRaWAN network, an uplink message is any communication initiated by an end device (like the SenseCAP Indicator) and sent to the network server through a gateway. These messages are typically used for transmitting sensor readings or device status."),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Data Collection"),": The SenseCAP Indicator collects data from its sensors or internal processes. This could include environmental readings, device status, or other relevant metrics.")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Data Packaging"),": The collected data is then packaged into a ",(0,i.yg)("em",{parentName:"p"},"predefined format")," suitable for transmission. This may involve encoding the data to optimize payload size and ensure efficient transmission.")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Sending the Message"),": The device transmits the uplink message through the LoRaWAN network. This transmission is usually scheduled based on specific intervals (e.g., every 5 minutes) or triggered by certain events (e.g., a threshold breach)."))),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Receiving and Processing at the Network Server:")),(0,i.yg)("p",null,"Once the uplink message is sent by the SenseCAP Indicator, it is received by the LoRaWAN network server via a gateway. The network server then processes the message as follows:"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Message Reception"),": The network server receives the uplink message from the gateway and decodes it.")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Data Processing and Analysis"),": After decoding, the server processes the data, which might involve logging it, triggering alerts, or performing further analysis. The data can include various types of information such as temperature readings, humidity levels, or other sensor data, depending on the capabilities of the device.")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Response Actions"),": Based on the received data, the network server may take action, such as sending a downlink message to the device with instructions or updates. This response can be automated based on predefined rules or triggered manually by a user monitoring the system.")))),(0,i.yg)("h4",{id:"uplink-message-upload-sensor-data"},"Uplink Message: upload Sensor Data"),(0,i.yg)("p",null,"In the context of the LoRaWAN demo using the SenseCAP Indicator, the uplink message might consist of simple sensor data, like temperature or humidity readings. "),(0,i.yg)("p",null,"Once the ",(0,i.yg)("em",{parentName:"p"},"join process")," is successful, you can view the logs in the ",(0,i.yg)("inlineCode",{parentName:"p"},"LoRaWAN frames")," section to monitor the data transmission and receive a detailed account of the device's communication with the network."),(0,i.yg)("admonition",{type:"tip"},(0,i.yg)("p",{parentName:"admonition"},"Navigate to the ",(0,i.yg)("em",{parentName:"p"},"LoRaWAN frames")," section of a device within the application you've created, and locate your specific device. This is where you can monitor and manage the data packets being transmitted and received by your device, ensuring smooth communication and operation within the LoRaWAN network.")),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/ns_frame.png"})),(0,i.yg)("p",null,"Now, with the decoder function activated, you should be able to see the parsed data under the event section (you can reveal this by pressing the ",(0,i.yg)("inlineCode",{parentName:"p"},"+up")," button). This will allow you to understand and analyze the incoming data from your device more effectively."),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:480,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/ns_event_view.png"})),(0,i.yg)("h3",{id:"downlink-message"},"Downlink Message"),(0,i.yg)("p",null,"The downlink process in the LoRaWAN network is critical for bi-directional communication, allowing the transmission of data and commands from the network server back to the SenseCAP Indicator device. This capability is particularly useful for various operational commands, configuration changes, or firmware updates."),(0,i.yg)("details",null,(0,i.yg)("summary",null,"The Concept of Downlink Message"),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Downlink in LoRaWAN:")),(0,i.yg)("p",null,"In the LoRaWAN demo environment, downlink messages are used to control an animated bulb on the SenseCAP Indicator, allowing users to switch it on or off. However, this functionality can be extended to execute specific commands or configurations as needed."),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Sending a Downlink Message")),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Initiating a Downlink Message"),": To send a downlink message, you will typically use the network server\u2019s interface. Navigate to the section where you can schedule downlink messages for your device.")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Message Format"),": Ensure that the message is formatted according to the specifications required by the SenseCAP Indicator. This could include specific payload formats or encoding methods, depending on what the downlink message is intended to do.")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Scheduling the Message"),": After composing the message, schedule it to be sent at an appropriate time. The timing may depend on various factors, such as the device\u2019s data transmission schedule or its expected time of activity."))),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Receiving and Processing the Downlink Message on the Device")),(0,i.yg)("p",null,"Once a downlink message is transmitted by the LoRaWAN network server, the SenseCAP Indicator will receive it during its next receive window. The device processes the message as follows:"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Message Reception"),": The SenseCAP Indicator listens for downlink messages during predefined receive windows. It is crucial that the device is in a receptive state during these periods.")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Processing the Message"),": Upon receiving a downlink message, the device will process the contents. This could involve changing a setting, updating a parameter, or triggering an action like toggling a relay or adjusting a sensor threshold",(0,i.yg)("sup",{parentName:"p",id:"fnref-5"},(0,i.yg)("a",{parentName:"sup",href:"#fn-5",className:"footnote-ref"},"5")),"."))),(0,i.yg)("ol",{start:3},(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("strong",{parentName:"li"},"Feedback and Confirmation"),": If the downlink message requires confirmation (in case of a confirmed downlink), the device will send an acknowledgment in its next uplink message."))),(0,i.yg)("h4",{id:"demo-message-controlling-a-bulb"},"Demo Message: Controlling a Bulb"),(0,i.yg)("p",null,"In this demonstration, we'll illustrate how downlink messages can be used to control a simulated bulb on the Indicator within via the LoRaWAN network. This example showcases the practical application of downlink communication for remote device management."),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"1. Scenario Overview:")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"In this demo, the SenseCAP Indicator is configured with a virtual bulb, which represents a simple, controllable device."),(0,i.yg)("li",{parentName:"ul"},"The bulb has two states: 'on' and 'off', which are controlled via downlink messages sent from the LoRaWAN network server.")),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"2. Preparing the Downlink Message:")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"To control the bulb, a specific payload structure is defined for the downlink message. For simplicity, let's assume:"),(0,i.yg)("ul",{parentName:"li"},(0,i.yg)("li",{parentName:"ul"},"Sending the payload ",(0,i.yg)("inlineCode",{parentName:"li"},"0001")," turns the bulb on."),(0,i.yg)("li",{parentName:"ul"},"Sending the payload ",(0,i.yg)("inlineCode",{parentName:"li"},"0000")," turns the bulb off."))),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},"These payloads are encoded in a format that the SenseCAP Indicator is programmed to understand and act upon.",(0,i.yg)("sup",{parentName:"p",id:"fnref-6"},(0,i.yg)("a",{parentName:"sup",href:"#fn-6",className:"footnote-ref"},"6"))))),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:480,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/bulb_payload.png"})),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"3. Sending the Downlink Message:")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Through the network server's interface, you can schedule the downlink message with the corresponding payload."),(0,i.yg)("li",{parentName:"ul"},"The message is then queued and sent to the SenseCAP Indicator during its next available receive window(so there is delay).")),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:480,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/queue_packet.png"})),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"4. Receiving the Downlink Message:")),(0,i.yg)("p",null,"For turning the bulb on, you schedule a downlink with payload ",(0,i.yg)("inlineCode",{parentName:"p"},"0001"),". To turn it off, you use payload ",(0,i.yg)("inlineCode",{parentName:"p"},"0000"),". As I had enqueued a downlink message ",(0,i.yg)("inlineCode",{parentName:"p"},"0001"),", now I want to send a downlink message ",(0,i.yg)("inlineCode",{parentName:"p"},"0000")," to turn the bulb off."),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:480,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/console_bulb.png"})),(0,i.yg)("p",null,"And you can see that the bulb is ",(0,i.yg)("strong",{parentName:"p"},"turned off"),"."),(0,i.yg)("h2",{id:"function"},"Funtionalities wait to be explored"),(0,i.yg)("p",null,"There's a wide array of functionalities in the SenseCAP Indicator waiting to be explored. In this demo, we illustrate uploading sensor data and using downlink messages to control the SenseCAP Indicator's virtual bulb."),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Key Capabilities to Explore:")),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"1. Command Reception and Execution:")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"The SenseCAP Indicator efficiently receives downlink messages."),(0,i.yg)("li",{parentName:"ul"},"It processes these messages, interpreting commands like turning the virtual bulb on or off."),(0,i.yg)("li",{parentName:"ul"},"The bulb's state changes accordingly, offering a realistic simulation of device control.")),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"2. Confirmation and Verification:")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Following command execution, the SenseCAP Indicator sends back an uplink message as confirmation."),(0,i.yg)("li",{parentName:"ul"},"This acknowledgment can be tracked via the")),(0,i.yg)("p",null,"network server's interface, ensuring the command was effectively received and acted upon."),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"3. Practical Applications:")),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"This simple demo underscores the utility of LoRaWAN downlink messages in manipulating IoT devices."),(0,i.yg)("li",{parentName:"ul"},"It showcases a key aspect of IoT ecosystems: the ability to remotely direct and manage devices, demonstrating its practical value.")),(0,i.yg)("p",null,"This demonstration is just the beginning. The SenseCAP Indicator offers a versatile platform for various IoT applications, from environmental monitoring to smart automation. By delving deeper into its capabilities, you can unlock the full potential of this powerful tool, paving the way for innovative solutions and enhanced control in your IoT projects. We encourage you to experiment and discover the many ways the SenseCAP Indicator can enhance your IoT endeavors."),(0,i.yg)("h2",{id:"commands"},"Console Manual Page"),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:500,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/indicator_cmd_all.png"})),(0,i.yg)("p",null,"Here's an introduction to the terminal command for setting up LoRaWAN network information, styled like a manual entry:"),(0,i.yg)("h3",{id:"lorawan-1"},(0,i.yg)("strong",{parentName:"h3"},"lorawan")),(0,i.yg)("p",null,"This command configures the LoRaWAN network information for a device. It allows you to set various parameters required for both OTAA (Over-the-Air Activation) and ABP (Activation By Personalization) methods."),(0,i.yg)("h5",{id:"usage"},"Usage:"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-sh"},"lorawan [--eui=] [--join_eui=] [--app_key=] [--dev_addr=] [--apps_key=] [--nwks_key=]\n")),(0,i.yg)("h5",{id:"options"},"Options:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("inlineCode",{parentName:"p"},"--eui="),": Sets the EUI (Extended Unique Identifier) for the device. It requires 8 hexadecimal digits, with MSB (Most Significant Bit) first.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("inlineCode",{parentName:"p"},"--join_eui="),": Sets the JOIN EUI (formerly known as APP EUI) which is an application identifier in OTAA. It requires 8 hexadecimal digits, with MSB first.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("inlineCode",{parentName:"p"},"--app_key="),": Sets the APP KEY, which is a cryptographic key used in the OTAA joining process. It requires 16 hexadecimal digits, with MSB first.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("inlineCode",{parentName:"p"},"--dev_addr="),": Sets the Device Address for ABP. It's a 4 hexadecimal digit identifier, with MSB first.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("inlineCode",{parentName:"p"},"--apps_key="),": Sets the APPS KEY for ABP, which is used for encrypting application payloads. It requires 16 hexadecimal digits, with MSB first.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("inlineCode",{parentName:"p"},"--nwks_key="),": Sets the NWKS KEY for ABP, which is used for encrypting network payloads and for device authentication. It requires 16 hexadecimal digits, with MSB first."))),(0,i.yg)("h2",{id:"faqs"},"FAQs"),(0,i.yg)("details",null,(0,i.yg)("summary",null,"Can the SenseCAP Indicator serve as my LoRaWAN Gateway?"),(0,i.yg)("p",null,"No, the SenseCAP Indicator is not designed to function as a LoRaWAN Gateway according to the SX1262 lora transceiver. It is primarily an end device in the LoRaWAN network architecture. A LoRaWAN Gateway typically has different hardware and software capabilities, designed to connect multiple end devices like the SenseCAP Indicator to the network server. If you're looking for a LoRaWAN Gateway, you should consider devices specifically designed for this purpose.")),(0,i.yg)("details",null,(0,i.yg)("summary",null,"Why is the True Network Server not sending a joinAccept?"),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Note:")," There are a few scenarios where a device may fail to receive a ",(0,i.yg)("inlineCode",{parentName:"p"},"joinAccept")," from the network server:"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Frequency Change:")," If you alter the frequency settings but retain the same device credentials on the network server, the device may not synchronize properly.")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("strong",{parentName:"p"},"Device Flash Cleaned:")," If you've cleared the device's flash memory but continue using the same credentials, this can lead to synchronization issues."))),(0,i.yg)("p",null,"In both cases, it's crucial to ensure that the OTAA (Over-the-Air Activation) device nonces (number used once) are in sync. To address this, use the ",(0,i.yg)("inlineCode",{parentName:"p"},"Flush OTAA device nonces")," feature on your network server. This action will reset the nonces and help re-establish a proper connection."),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/ns_flush_nonces.png"}))),(0,i.yg)("details",null,(0,i.yg)("summary",null,"Which FPort to send downlink message?"),(0,i.yg)("p",null,"In the current setup of our LoRaWAN demo, there isn't a pre-defined port designated for sending downlink messages. The demo code is designed to be flexible and can be adapted to your specific needs."),(0,i.yg)("p",null,"If you require the processing of messages on a specific port in a particular manner, you have the option to modify the code accordingly. This customization allows for tailored handling of downlink messages based on different ports, giving you greater control over how your device interprets and responds to these communications.")),(0,i.yg)("details",null,(0,i.yg)("summary",null,"How to Use MAC Version 1.1.0?"),(0,i.yg)("p",null,"To utilize the features of LoRaWAN MAC version 1.1.0, it's necessary to configure the cryptographic settings appropriately. You can do this by using the ",(0,i.yg)("inlineCode",{parentName:"p"},"idf.py menuconfig")," command to enable the ",(0,i.yg)("inlineCode",{parentName:"p"},"USE LRWAN_1_1_X_CRYPTO")," option."),(0,i.yg)("div",{align:"center"},(0,i.yg)("img",{class:"border-radius: 10px;",width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/LoRaWAN_Application/menuconfig_110.png"})),(0,i.yg)("p",null,"The implementation of version ",(0,i.yg)("inlineCode",{parentName:"p"},"1.1.0")," in LoRaWAN requires specific cryptographic algorithms for enhanced security. By setting this option, you ensure that your device is compatible with the enhanced security features and protocols introduced in this version.")),(0,i.yg)("h2",{id:"odm-service"},"ODM Service"),(0,i.yg)("p",null,"Seeed Studio offers a comprehensive one-stop ODM service to accommodate rapid customizations and scaling requirements for diverse needs. If you're looking to tailor your project with specialized features or need assistance in scaling up your operations efficiently, please reach out to us. For inquiries and more detailed information, contact us at ",(0,i.yg)("a",{parentName:"p",href:"mailto:iot@seeed.cc."},"iot@seeed.cc.")," We're here to help turn your unique ideas into reality."),(0,i.yg)("h2",{id:"tech-support"},"Tech Support"),(0,i.yg)("p",null,(0,i.yg)("strong",{parentName:"p"},"Need help with your SenseCAP Indicator? We're here to assist you!")),(0,i.yg)("p",null,"If you encounter any issues or have any questions while following this tutorial, please feel free to reach out to our tech support. We are always here to help!"),(0,i.yg)("p",null,"Visit our ",(0,i.yg)("a",{parentName:"p",href:"https://discord.com/invite/QqMgVwHT3X"},"Seeed Official Discord Channel")," to ask your questions or the ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/Seeed-Solution/SenseCAP_Indicator_ESP32/discussions"},"GitHub discussions")," to share all you want!"),(0,i.yg)("div",{className:"footnotes"},(0,i.yg)("hr",{parentName:"div"}),(0,i.yg)("ol",{parentName:"div"},(0,i.yg)("li",{parentName:"ol",id:"fn-1"},(0,i.yg)("a",{parentName:"li",href:"https://www.seeedstudio.com/blog/2021/04/27/a-gentle-introduction-to-lorawan-gateways-nodes/"},"A Gentle Introduction to LoRaWAN Gateways & Nodes\n"),(0,i.yg)("a",{parentName:"li",href:"#fnref-1",className:"footnote-backref"},"\u21a9")),(0,i.yg)("li",{parentName:"ol",id:"fn-2"},(0,i.yg)("a",{parentName:"li",href:"https://www.seeedstudio.com/SenseCAP-c-1825.html"},"SenseCAP Products - Bazzar"),(0,i.yg)("a",{parentName:"li",href:"#fnref-2",className:"footnote-backref"},"\u21a9")),(0,i.yg)("li",{parentName:"ol",id:"fn-3"},(0,i.yg)("a",{parentName:"li",href:"https://www.sensecapmx.com/"},"SenseCAP MX"),(0,i.yg)("a",{parentName:"li",href:"#fnref-3",className:"footnote-backref"},"\u21a9")),(0,i.yg)("li",{parentName:"ol",id:"fn-4"},(0,i.yg)("a",{parentName:"li",href:"https://lora-developers.semtech.com/documentation/tech-papers-and-guides/sending-and-receiving-messages-with-lorawan/sending-and-receiving-messages/"},"In-Depth: Sending and Receiving Messages with LoRaWAN\xae"),(0,i.yg)("a",{parentName:"li",href:"#fnref-4",className:"footnote-backref"},"\u21a9")),(0,i.yg)("li",{parentName:"ol",id:"fn-5"},(0,i.yg)("a",{parentName:"li",href:"https://github.com/Seeed-Solution/SenseCAP_Indicator_ESP32/blob/11bf6165f0e815a1dc6b83be253972ac320ecdd5/examples/indicator_lorawan/main/lorawan/indicator_lorawan.c#L445"},"TxData Function - GitHub"),(0,i.yg)("a",{parentName:"li",href:"#fnref-5",className:"footnote-backref"},"\u21a9")),(0,i.yg)("li",{parentName:"ol",id:"fn-6"},(0,i.yg)("a",{parentName:"li",href:"https://github.com/Seeed-Solution/SenseCAP_Indicator_ESP32/blob/11bf6165f0e815a1dc6b83be253972ac320ecdd5/examples/indicator_lorawan/main/lorawan/indicator_lorawan.c#L591C33-L591C33"},"lorawan_rx_data_handle function - GitHub"),(0,i.yg)("a",{parentName:"li",href:"#fnref-6",className:"footnote-backref"},"\u21a9")))))}m.isMDXComponent=!0}}]);