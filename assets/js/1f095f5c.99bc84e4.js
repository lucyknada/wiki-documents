"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[97962],{15680:(e,t,o)=>{o.d(t,{xA:()=>p,yg:()=>h});var n=o(96540);function i(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function a(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function r(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?a(Object(o),!0).forEach((function(t){i(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):a(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,i=function(e,t){if(null==e)return{};var o,n,i={},a=Object.keys(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||(i[o]=e[o]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)o=a[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var d=n.createContext({}),l=function(e){var t=n.useContext(d),o=t;return e&&(o="function"==typeof e?e(t):r(r({},t),e)),o},p=function(e){var t=l(e.components);return n.createElement(d.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},g=n.forwardRef((function(e,t){var o=e.components,i=e.mdxType,a=e.originalType,d=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=l(o),g=i,h=c["".concat(d,".").concat(g)]||c[g]||u[g]||a;return o?n.createElement(h,r(r({ref:t},p),{},{components:o})):n.createElement(h,r({ref:t},p))}));function h(e,t){var o=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=o.length,r=new Array(a);r[0]=g;var s={};for(var d in t)hasOwnProperty.call(t,d)&&(s[d]=t[d]);s.originalType=e,s[c]="string"==typeof e?e:i,r[1]=s;for(var l=2;l<a;l++)r[l]=o[l];return n.createElement.apply(null,r)}return n.createElement.apply(null,o)}g.displayName="MDXCreateElement"},91708:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var n=o(58168),i=(o(96540),o(15680));const a={title:"L76K Path Tracking on Ubidots",description:"Connecting L76K GNSS Module and SeeedStudio XIAO to Ubidots for Location Path Tracking on A Map",keywords:["XIAO","Expansion Boards for XIAO","GPS Module for XIAO","L76K Path Tracking on Ubidots"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/L76K_Path_Tracking_on_Ubidots",last_update:{date:"03/07/2024",author:"Harrison Xu"}},r="Connecting L76K GNSS Module and SeeedStudio XIAO to Ubidots for Location Path Tracking on A Map",s={unversionedId:"Sensor/SeeedStudio_XIAO/SeeedStudio_XIAO_Expansion_board/GPS_Module_For_XIAO/L76K_GNSS_Ubidots_Map_Track",id:"Sensor/SeeedStudio_XIAO/SeeedStudio_XIAO_Expansion_board/GPS_Module_For_XIAO/L76K_GNSS_Ubidots_Map_Track",title:"L76K Path Tracking on Ubidots",description:"Connecting L76K GNSS Module and SeeedStudio XIAO to Ubidots for Location Path Tracking on A Map",source:"@site/docs/Sensor/SeeedStudio_XIAO/SeeedStudio_XIAO_Expansion_board/GPS_Module_For_XIAO/L76K_GNSS_Ubidots_Map_Track.md",sourceDirName:"Sensor/SeeedStudio_XIAO/SeeedStudio_XIAO_Expansion_board/GPS_Module_For_XIAO",slug:"/L76K_Path_Tracking_on_Ubidots",permalink:"/L76K_Path_Tracking_on_Ubidots",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Sensor/SeeedStudio_XIAO/SeeedStudio_XIAO_Expansion_board/GPS_Module_For_XIAO/L76K_GNSS_Ubidots_Map_Track.md",tags:[],version:"current",lastUpdatedBy:"Harrison Xu",lastUpdatedAt:1709769600,formattedLastUpdatedAt:"Mar 7, 2024",frontMatter:{title:"L76K Path Tracking on Ubidots",description:"Connecting L76K GNSS Module and SeeedStudio XIAO to Ubidots for Location Path Tracking on A Map",keywords:["XIAO","Expansion Boards for XIAO","GPS Module for XIAO","L76K Path Tracking on Ubidots"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/L76K_Path_Tracking_on_Ubidots",last_update:{date:"03/07/2024",author:"Harrison Xu"}},sidebar:"ProductSidebar",previous:{title:"Quectel L76K",permalink:"/get_start_l76k_gnss"},next:{title:"Expansion Board Base for XIAO",permalink:"/Seeeduino-XIAO-Expansion-Board"}},d={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Features",id:"features",level:3},{value:"Getting Started",id:"getting-started",level:2},{value:"Step 1: Get Ubidits Token",id:"step-1-get-ubidits-token",level:3},{value:"Step 2: Upload Code to XIAO",id:"step-2-upload-code-to-xiao",level:3},{value:"Step 3: Display Data on Map",id:"step-3-display-data-on-map",level:3},{value:"Reference Links",id:"reference-links",level:2},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],p={toc:l},c="wrapper";function u(e){let{components:t,...o}=e;return(0,i.yg)(c,(0,n.A)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,i.yg)("h1",{id:"connecting-l76k-gnss-module-and-seeedstudio-xiao-to-ubidots-for-location-path-tracking-on-a-map"},"Connecting L76K GNSS Module and SeeedStudio XIAO to Ubidots for Location Path Tracking on A Map"),(0,i.yg)("p",{style:{textAlign:"center"}},(0,i.yg)("img",{src:"https://files.seeedstudio.com/wiki/Seeeduino-XIAO-Expansion-Board/GPS_Module/Ubidots/Pic00_Track.png",alt:"pir",width:600,height:"auto"})),(0,i.yg)("h2",{id:"introduction"},"Introduction"),(0,i.yg)("p",null,"After ",(0,i.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/get_start_l76k_gnss/"},"Getting Started with L76K GNSS Module for SeeedStudio XIAO"),", you might want to use the L76K GNSS module to locate an object and display the track on a map. For this purpose, we can achieve it by combining the  SeeedStudio XIAO development board and the Ubidots IoT data platform."),(0,i.yg)("p",null,(0,i.yg)("a",{parentName:"p",href:"https://ubidots.com/"},"Ubidots")," is a low-code IoT development platform for engineers and developers without the time or energy to build an entire, production-ready IoT application themselves. From device-friendly APIs to a clean UI for end-users, Ubidots provides the essential building blocks to bring you faster to market, without having to hire an expensive team of engineers to develop and maintain a customized solution."),(0,i.yg)("h3",{id:"features"},"Features"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Upload real-time location data (latitude and longitude) when connected to Wi-Fi"),(0,i.yg)("li",{parentName:"ul"},"Display the path connected by position points on a map")),(0,i.yg)("h2",{id:"getting-started"},"Getting Started"),(0,i.yg)("h3",{id:"step-1-get-ubidits-token"},"Step 1: Get Ubidits Token"),(0,i.yg)("p",null,"First, open ",(0,i.yg)("a",{parentName:"p",href:"https://ubidots.com"},"https://ubidots.com")," in your browser, then sign up for an account. Confirm your email, and log in to the Ubidots console."),(0,i.yg)("p",{style:{textAlign:"center"}},(0,i.yg)("img",{src:"https://files.seeedstudio.com/wiki/Seeeduino-XIAO-Expansion-Board/GPS_Module/Ubidots/Pic02_SignUp.png",alt:"pir",width:600,height:"auto"})),(0,i.yg)("p",null,'Click your avatar on the corner - "My Profile", scroll down and change the "Decimal places" from 2 to 6 for latitude and longitude precision.'),(0,i.yg)("p",{style:{textAlign:"center"}},(0,i.yg)("img",{src:"https://files.seeedstudio.com/wiki/Seeeduino-XIAO-Expansion-Board/GPS_Module/Ubidots/Pic04_Setting.png",alt:"pir",width:600,height:"auto"})),(0,i.yg)("p",null,'Then go to "API Credentials" in the left, copy the token (',(0,i.yg)("strong",{parentName:"p"},"NOT the API Key"),") for later use."),(0,i.yg)("p",{style:{textAlign:"center"}},(0,i.yg)("img",{src:"https://files.seeedstudio.com/wiki/Seeeduino-XIAO-Expansion-Board/GPS_Module/Ubidots/Pic05_Token.png",alt:"pir",width:600,height:"auto"})),(0,i.yg)("h3",{id:"step-2-upload-code-to-xiao"},"Step 2: Upload Code to XIAO"),(0,i.yg)("p",null,"Connect the SeeedStudio XIAO dev board (Here we use SeeedStudio XIAO ESP32S3 for example), L76K GNSS module, GNSS antenna, Wi-Fi antenna all together and link them to your computer."),(0,i.yg)("admonition",{type:"danger"},(0,i.yg)("mdxAdmonitionTitle",{parentName:"admonition"},(0,i.yg)("strong",{parentName:"mdxAdmonitionTitle"},"Warning")),(0,i.yg)("p",{parentName:"admonition"},"Please pay special attention to the installation direction of the module, do not plug it in backwards, otherwise it is likely to burn the module or XIAO.")),(0,i.yg)("p",null,"Next, lets's start the Arduino IDE. Remember to add ",(0,i.yg)("inlineCode",{parentName:"p"},"EspSoftwareSerial")," and ",(0,i.yg)("inlineCode",{parentName:"p"},"TinyGPSPlus")," libraries in library manager, download ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/ubidots/ubidots-esp32"},"Ubidots ESP32 Library")," and add it also. "),(0,i.yg)("p",null,"Select the corresponding board and port, then paste the following code: "),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-cpp"},'#include <SoftwareSerial.h>\n#include <TinyGPSPlus.h>\n#include <WiFi.h>\n#include <Ubidots.h>\n\nstatic const int RXPin = D7, TXPin = D6;\nstatic const uint32_t GPSBaud = 9600;\nconst char WIFI_SSID[]     = "INPUT YOUR WIFI NAME HERE";\nconst char WIFI_PASS[]     = "INPUT YOUR WIFI PASSWORD HERE";\nconst char UBIDOTS_TOKEN[] = "INPUT YOUR UBIDOTS TOKEN HERE";\n\nSoftwareSerial MySerial(RXPin, TXPin);\nTinyGPSPlus gps;\nUbidots ubidots(UBIDOTS_TOKEN, UBI_UDP);\ndouble lat;\ndouble lng;\n\nvoid setup() {\n  Serial.begin(115200);\n  MySerial.begin(GPSBaud);\n  ubidots.setDebug(true);    // For observing Ubidots uploading log. You can also change it to "false" for a more simplified serial monitor.\n  Serial.println("\\nTinyGPSPlus library version: " + String(TinyGPSPlus::libraryVersion()));\n\n  WiFi.mode(WIFI_STA);\n  WiFi.disconnect();\n  while (WiFi.status() != 3) {\n    WiFi.begin(WIFI_SSID, WIFI_PASS);\n    Serial.println(WiFi.status());\n    delay(5000);\n  }\n\n  /*\n    WL_NO_SHIELD        = 255,    // For compatibility with WiFi Shield library\n    WL_IDLE_STATUS      = 0,\n    WL_NO_SSID_AVAIL    = 1,\n    WL_SCAN_COMPLETED   = 2,\n    WL_CONNECTED        = 3,\n    WL_CONNECT_FAILED   = 4,\n    WL_CONNECTION_LOST  = 5,\n    WL_DISCONNECTED     = 6\n  */\n\n  Serial.println("WiFi is connected!");\n}\n\nvoid loop() {\n  while (MySerial.available() > 0) {\n    if (gps.encode(MySerial.read())) {\n      getLocation();\n      sendToUbidots();\n      delay(10 * 1000);  // Change the parameter here to modify the interval of getting and uploading location.\n    }\n  }\n\n  if (millis() > 5000 && gps.charsProcessed() < 10) {\n    Serial.println("No GPS detected, please check wiring.");\n  }\n}\n\nvoid getLocation() {\n  if (gps.location.isValid()) {\n    lat = gps.location.lat();\n    lng = gps.location.lng();\n\n    Serial.print("Location: ");\n    Serial.print(gps.location.lat(), 6);\n    Serial.print(", ");\n    Serial.print(gps.location.lng(), 6);\n    Serial.println();\n  } else {\n    Serial.println("Unable to get location currently");\n  }\n}\n\nvoid sendToUbidots() {\n  if (lat != 0 && lng != 0) {\n    char charLat[20];\n    char charLng[20];\n    sprintf(charLat, "%.6lf", lat);\n    sprintf(charLng, "%.6lf", lng);\n\n    ubidots.addContext("lat", charLat);\n    ubidots.addContext("lng", charLng);\n    char* context = (char*)malloc(sizeof(char) * 60);\n    ubidots.getContext(context);\n    ubidots.add("position", 1, context);\n\n    if (ubidots.send()) {\n      Serial.println("Values sent");\n    } else {\n      Serial.println("Values not sent");\n    }\n    free(context);\n  }\n}\n')),(0,i.yg)("p",null,"Upload to the board, and soon you will see some output in the serial monitor like this: "),(0,i.yg)("p",{style:{textAlign:"center"}},(0,i.yg)("img",{src:"https://files.seeedstudio.com/wiki/Seeeduino-XIAO-Expansion-Board/GPS_Module/Ubidots/Pic06_SerialMonitor.png",alt:"pir",width:600,height:"auto"})),(0,i.yg)("p",null,'It is normal to wait some time to connect to Wi-Fi network and get location information from satellites just as the picture shows above. If those error output last for several minutes, try to reboot the XIAO board with the little "R" button beside the USB-C port. '),(0,i.yg)("admonition",{type:"tip"},(0,i.yg)("p",{parentName:"admonition"},"The L76K GNSS Module is used outdoors, so please place it in an open place without obstruction, otherwise the location information may not be obtained.")),(0,i.yg)("h3",{id:"step-3-display-data-on-map"},"Step 3: Display Data on Map"),(0,i.yg)("p",null,"Now the L76K GNSS Module and SeeedStudio XIAO is getting location from GNSS and sending latitude and longitude information to Ubidots. Let's get back to Ubidots and check it. Go to ",(0,i.yg)("a",{parentName:"p",href:"https://industrial.ubidots.com/app/devices"},"https://industrial.ubidots.com/app/devices"),', and there is a new "device" that has been automatically created by Ubidots since we sent new data through the token. Click the device name, you can see the location of this device is automatically set as the data we upload. '),(0,i.yg)("p",{style:{textAlign:"center"}},(0,i.yg)("img",{src:"https://files.seeedstudio.com/wiki/Seeeduino-XIAO-Expansion-Board/GPS_Module/Ubidots/Pic08_DeviceInfo.png",alt:"pir",width:600,height:"auto"})),(0,i.yg)("p",null,'Next, let\'s create a map to show the track. Go to "Data" - "Dashboards" on the top, hit the hamburger menu button beside "Demo Dashboard", then "CREATE" a new dashboard. You can modify the settings like this, or customize to suit your own need. Remember to "SAVE" the new dashboard. '),(0,i.yg)("p",{style:{textAlign:"center"}},(0,i.yg)("img",{src:"https://files.seeedstudio.com/wiki/Seeeduino-XIAO-Expansion-Board/GPS_Module/Ubidots/Pic10_NewDashboard.png",alt:"pir",width:600,height:"auto"})),(0,i.yg)("p",null,'In the new dashboard, hit "Add new widget" and scroll down to find "Map". "ADD MARKER GROUP", set the device we checked just now, and the map will appear. Move your cursor to the right-down corner of the map to resize it bigger.'),(0,i.yg)("p",{style:{textAlign:"center"}},(0,i.yg)("img",{src:"https://files.seeedstudio.com/wiki/Seeeduino-XIAO-Expansion-Board/GPS_Module/Ubidots/Pic11_NewWidget.png",alt:"pir",width:600,height:"auto"})),(0,i.yg)("p",{style:{textAlign:"center"}},(0,i.yg)("img",{src:"https://files.seeedstudio.com/wiki/Seeeduino-XIAO-Expansion-Board/GPS_Module/Ubidots/Pic12_MapSetting.png",alt:"pir",width:600,height:"auto"})),(0,i.yg)("p",null,"Hoo-ray! The path connected by position points is showing just in front of us! "),(0,i.yg)("p",{style:{textAlign:"center"}},(0,i.yg)("img",{src:"https://files.seeedstudio.com/wiki/Seeeduino-XIAO-Expansion-Board/GPS_Module/Ubidots/Pic00_Track.png",alt:"pir",width:600,height:"auto"})),(0,i.yg)("admonition",{type:"tip"},(0,i.yg)("p",{parentName:"admonition"},"If the L76K GNSS Module stays at a fixed position without moving, the map will only show a point rather than a path, obviously. ")),(0,i.yg)("h2",{id:"reference-links"},"Reference Links"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("a",{parentName:"p",href:"https://docs.ubidots.com/reference/gps-location"},"GPS Location | Ubidots API Reference"))),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("a",{parentName:"p",href:"https://help.ubidots.com/en/articles/1712418-create-map-widgets-in-ubidots"},"Create Map Widgets in Ubidots | Ubidots Help Center"))),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("a",{parentName:"p",href:"https://help.ubidots.com/en/articles/693652-how-to-create-a-real-time-map"},"How to create a real-time map? | Ubidots Help Center"))),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("p",{parentName:"li"},(0,i.yg)("a",{parentName:"p",href:"https://github.com/ubidots/ubidots-esp32"},"Ubidots ESP32 Library on GitHub")))),(0,i.yg)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,i.yg)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,i.yg)("div",{class:"button_tech_support_container"},(0,i.yg)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,i.yg)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,i.yg)("div",{class:"button_tech_support_container"},(0,i.yg)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,i.yg)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}u.isMDXComponent=!0}}]);