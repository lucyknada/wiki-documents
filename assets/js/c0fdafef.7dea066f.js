"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[97764],{15680:(e,t,r)=>{r.d(t,{xA:()=>d,yg:()=>m});var i=r(96540);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var l=i.createContext({}),u=function(e){var t=i.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},d=function(e){var t=u(e.components);return i.createElement(l.Provider,{value:t},e.children)},p="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},g=i.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=u(r),g=n,m=p["".concat(l,".").concat(g)]||p[g]||c[g]||o;return r?i.createElement(m,a(a({ref:t},d),{},{components:r})):i.createElement(m,a({ref:t},d))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,a=new Array(o);a[0]=g;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:n,a[1]=s;for(var u=2;u<o;u++)a[u]=r[u];return i.createElement.apply(null,a)}return i.createElement.apply(null,r)}g.displayName="MDXCreateElement"},96248:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>c,frontMatter:()=>o,metadata:()=>s,toc:()=>u});var i=r(58168),n=(r(96540),r(15680));const o={description:"Azure IoT Edge Runtime on reTerminal DM",title:"Azure IoT Edge Runtime on reTerminal DM",image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/reTerminal-DM_Azure_IoT",last_update:{date:"11/6/2023",author:"Takashi"}},a="Run Azure IoT Edge Runtime on reTerminal DM device running Debian 11 (ARM32v7)",s={unversionedId:"Edge/Raspberry_Pi_Devices/reTerminal-DM/Azure_IoT/reTerminal-DM_Azure_IoT",id:"Edge/Raspberry_Pi_Devices/reTerminal-DM/Azure_IoT/reTerminal-DM_Azure_IoT",title:"Azure IoT Edge Runtime on reTerminal DM",description:"Azure IoT Edge Runtime on reTerminal DM",source:"@site/docs/Edge/Raspberry_Pi_Devices/reTerminal-DM/Azure_IoT/reTerminal-DM_Azure_IoT.md",sourceDirName:"Edge/Raspberry_Pi_Devices/reTerminal-DM/Azure_IoT",slug:"/reTerminal-DM_Azure_IoT",permalink:"/reTerminal-DM_Azure_IoT",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Edge/Raspberry_Pi_Devices/reTerminal-DM/Azure_IoT/reTerminal-DM_Azure_IoT.md",tags:[],version:"current",lastUpdatedBy:"Takashi",lastUpdatedAt:1699228800,formattedLastUpdatedAt:"Nov 6, 2023",frontMatter:{description:"Azure IoT Edge Runtime on reTerminal DM",title:"Azure IoT Edge Runtime on reTerminal DM",image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/reTerminal-DM_Azure_IoT",last_update:{date:"11/6/2023",author:"Takashi"}},sidebar:"ProductSidebar",previous:{title:"Object detection with Edge Impulse and reTerminal DM",permalink:"/reTerminal-DM-edgeimpulse"},next:{title:"AWS IoT Core Intergate With reTerminal DM",permalink:"/reTerminal-DM_AWS_first"}},l={},u=[{value:"Introduction",id:"introduction",level:2},{value:"Step 1: Prerequisites",id:"step-1-prerequisites",level:2},{value:"Step 2: Prepare your Device",id:"step-2-prepare-your-device",level:2},{value:"Step 3: Manual Test for Azure IoT Edge on device",id:"step-3-manual-test-for-azure-iot-edge-on-device",level:2},{value:"3.1 Edge Runtime Enabled",id:"31-edge-runtime-enabled",level:3},{value:"3.2 Check the iotedge daemon",id:"32-check-the-iotedge-daemon",level:3},{value:"Additional Links",id:"additional-links",level:2},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],d={toc:u},p="wrapper";function c(e){let{components:t,...r}=e;return(0,n.yg)(p,(0,i.A)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,n.yg)("h1",{id:"run-azure-iot-edge-runtime-on-reterminal-dm-device-running-debian-11-arm32v7"},"Run Azure IoT Edge Runtime on reTerminal DM device running Debian 11 (ARM32v7)"),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("iframe",{width:270,height:358,frameBorder:0,src:"https://devicecatalog.azure.com/embed/c40637ad-a9bf-494e-8975-f4d37e43cf6f",title:"reTerminal DM - Azure Certified Device"})),(0,n.yg)("h2",{id:"introduction"},"Introduction"),(0,n.yg)("p",null,"reTerminal DM is a Panel PC, HMI, PLC, IIoT Gateway all-in-one device powered by Raspberry Pi CM4, with\n10.1'' IP65 front panel and rich industrial interfaces, and natively integrated with Node-RED and supports\nRaspberry Pi-based software ecosystem."),(0,n.yg)("p",null,"This document describes how to connect reTerminal DM device running Debian 11 (ARM32v7) with Azure IoT\nEdge Runtime pre-installed and Device Management. This multi-step process includes:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"Configuring Azure IoT Hub"),(0,n.yg)("li",{parentName:"ul"},"Registering your IoT device"),(0,n.yg)("li",{parentName:"ul"},"Build and Deploy client component to test device management capability")),(0,n.yg)("h2",{id:"step-1-prerequisites"},"Step 1: Prerequisites"),(0,n.yg)("p",null,"You should have the following items ready before beginning the process:"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("a",{parentName:"li",href:"https://azure.microsoft.com/en-us/free/"},"Create an Azure account")),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("a",{parentName:"li",href:"https://portal.azure.com/#home"},"Sign up to Azure Portal")),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("a",{parentName:"li",href:"https://github.com/Azure/azure-iot-device-ecosystem/blob/master/setup_iothub.md"},"Setup your IoT hub")),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/azure/iot-edge/quickstart-linux"},"Add the Edge Device")),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/azure/iot-edge/quickstart-linux?view=iotedge-2018-06#deploy-a-module"},"Add the Edge Modules"))),(0,n.yg)("h2",{id:"step-2-prepare-your-device"},"Step 2: Prepare your Device"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},"Power on the device. Connect a 12~24V power supply to the 2-pin power terminal block connctor.")),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/reTerminal-DM-Azure-IoT/reTerminal-DM-Azure-IoT-EDGE.png",style:{width:300,height:"auto"}})),(0,n.yg)("ol",{start:2},(0,n.yg)("li",{parentName:"ol"},"Check the OS version, bit number and architecture.")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre"},"$ lsb_release -irc\nDistributor ID: Raspbian\nRelease: 11\nCodename: bullseye\n$ getconf LONG_BIT\n32\n$ uname -m\narmv7l\n")),(0,n.yg)("admonition",{type:"tip"},(0,n.yg)("p",{parentName:"admonition"},"If your OS is older than Debian 11 (Bullseye) or LOG_BIT is 64, please install latest Raspberry Pi OS 32-\nbit. Please refer to ",(0,n.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/reterminal-dm-flash-OS/#steps-for-flashing-raspbian-os"},"Steps for Flashing Raspbian OS"),".")),(0,n.yg)("admonition",{type:"tip"},(0,n.yg)("p",{parentName:"admonition"},"If uname -m is aarch64, your OS running 64-bit kernel. Please change to 32-bit kernel. Refer to ",(0,n.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/reterminal-dm-flash-OS/#32-bit-os-driver"},"32-bit OS driver"),".")),(0,n.yg)("h2",{id:"step-3-manual-test-for-azure-iot-edge-on-device"},"Step 3: Manual Test for Azure IoT Edge on device"),(0,n.yg)("h3",{id:"31-edge-runtime-enabled"},"3.1 Edge Runtime Enabled"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/azure/iot-edge/how-to-provision-single-device-linux-symmetric?view=iotedge-1.4&tabs=azure-portal%2Cdebian#register-your-device"},"Register your device"))),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/azure/iot-edge/how-to-provision-single-device-linux-symmetric?view=iotedge-1.4&tabs=azure-portal%2Cdebian#view-registered-devices-and-retrieve-provisioning-information"},"View registered devices and retrieve provisioning information"))),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("p",{parentName:"li"},(0,n.yg)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/azure/iot-edge/how-to-provision-single-device-linux-symmetric?view=iotedge-1.4&tabs=azure-portal%2Cdebian#install-iot-edge"},"Install IoT Edge")))),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre"},"$ curl https://packages.microsoft.com/config/debian/11/packages-microsoft-\nprod.deb > ./packages-microsoft-prod.deb\n$ sudo apt install ./packages-microsoft-prod.deb\n$ rm ./packages-microsoft-prod.deb\n")),(0,n.yg)("ol",{start:4},(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/azure/iot-edge/how-to-provision-single-device-linux-symmetric?view=iotedge-1.4&tabs=azure-portal%2Cdebian#install-a-container-engine"},"Install a container engine"))),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre"},"$ sudo apt-get update\n$ sudo apt-get install moby-engine\n$ sudo vi /etc/docker/daemon.json\n$ sudo systemctl restart docker\n")),(0,n.yg)("p",null,"Set the default logging driver to the local logging driver as shown in the example below."),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-cpp"},'"log-driver": "local"\n')),(0,n.yg)("ol",{start:5},(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/azure/iot-edge/how-to-provision-single-device-linux-symmetric?view=iotedge-1.4&tabs=azure-portal%2Cdebian#install-the-iot-edge-runtime"},"Install the IoT Edge runtime"))),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre"},"$ sudo apt-get update\n$ sudo apt-get install aziot-edge defender-iot-micro-agent-edge\n")),(0,n.yg)("ol",{start:6},(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/azure/iot-edge/how-to-provision-single-device-linux-symmetric?view=iotedge-1.4&tabs=azure-portal%2Cdebian#provision-the-device-with-its-cloud-identity"},"Provision the device with its cloud identity"))),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre"},"$ sudo iotedge config mp --connection-string 'PRIMARY_CONNECTION_STRING'\n$ sudo iotedge config apply\n")),(0,n.yg)("h3",{id:"32-check-the-iotedge-daemon"},"3.2 Check the iotedge daemon"),(0,n.yg)("p",null,"Open the command prompt on your IoT Edge device , confirm that the Azure IoT edge Daemon is under\nrunning state"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre"},"sudo iotedge system status\n")),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/reTerminal-DM-Azure-IoT/reTerminal-DM-Azure-IoT-EDGE2.png",style:{width:900,height:"auto"}})),(0,n.yg)("p",null,"Open the command prompt on your IoT Edge device, confirm that the module deployed from the cloud is\nrunning on your IoT Edge device"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre"},"$ sudo iotedge list\n")),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/reTerminal-DM-Azure-IoT/reTerminal-DM-Azure-IoT-EDGE3.png",style:{width:900,height:"auto"}})),(0,n.yg)("p",null,"On the device details page of the Azure, you should see the runtime modules - edgeAgent, edgeHub and\nSimulatedTemperatureSensor modules are under running status"),(0,n.yg)("div",{style:{textAlign:"center"}},(0,n.yg)("img",{src:"https://files.seeedstudio.com/wiki/wiki-ranger/Contributions/reTerminal-DM-Azure-IoT/reTerminal-DM-Azure-IoT-EDGE4.png",style:{width:900,height:"auto"}})),(0,n.yg)("h2",{id:"additional-links"},"Additional Links"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("a",{parentName:"li",href:"https://learn.microsoft.com/en-us/azure/iot-edge/about-iot-edge"},"What is Azure IoT Edge")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/azure/iot-edge/support"},"Azure IoT Edge supported platforms")),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/azure/iot-edge/module-development"},"Develop your own IoT Edge modules"))),(0,n.yg)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,n.yg)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,n.yg)("div",{class:"button_tech_support_container"},(0,n.yg)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,n.yg)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,n.yg)("div",{class:"button_tech_support_container"},(0,n.yg)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,n.yg)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}c.isMDXComponent=!0}}]);