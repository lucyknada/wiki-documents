"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[59814],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>h});var i=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=i.createContext({}),u=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},d=function(e){var t=u(e.components);return i.createElement(l.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},p=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),c=u(n),p=r,h=c["".concat(l,".").concat(p)]||c[p]||m[p]||o;return n?i.createElement(h,a(a({ref:t},d),{},{components:n})):i.createElement(h,a({ref:t},d))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,a=new Array(o);a[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:r,a[1]=s;for(var u=2;u<o;u++)a[u]=n[u];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}p.displayName="MDXCreateElement"},94628:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>u});var i=n(87462),r=(n(67294),n(3905));const o={description:"Connect N3uron with MQTT and Modbus Support Devices",title:"Connect N3uron with MQTT and Modbus Support Devices",keywords:["reTerminal DM","MQTT","IIoT","Industrial","N3uron","Modbus"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/reTerminalDM_N3uron_modbus_mqtt",last_update:{date:"5/6/2024",author:"Kasun Thushara and Xabier Fern\xe1ndez"}},a=void 0,s={unversionedId:"Edge/Raspberry_Pi_Devices/reTerminal-DM/N3uron/reTerminal_DM_N3uron_modbus_mqtt",id:"Edge/Raspberry_Pi_Devices/reTerminal-DM/N3uron/reTerminal_DM_N3uron_modbus_mqtt",title:"Connect N3uron with MQTT and Modbus Support Devices",description:"Connect N3uron with MQTT and Modbus Support Devices",source:"@site/docs/Edge/Raspberry_Pi_Devices/reTerminal-DM/N3uron/reTerminal_DM_N3uron_modbus_mqtt.md",sourceDirName:"Edge/Raspberry_Pi_Devices/reTerminal-DM/N3uron",slug:"/reTerminalDM_N3uron_modbus_mqtt",permalink:"/reTerminalDM_N3uron_modbus_mqtt",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Edge/Raspberry_Pi_Devices/reTerminal-DM/N3uron/reTerminal_DM_N3uron_modbus_mqtt.md",tags:[],version:"current",lastUpdatedBy:"Kasun Thushara and Xabier Fern\xe1ndez",lastUpdatedAt:1714953600,formattedLastUpdatedAt:"May 6, 2024",frontMatter:{description:"Connect N3uron with MQTT and Modbus Support Devices",title:"Connect N3uron with MQTT and Modbus Support Devices",keywords:["reTerminal DM","MQTT","IIoT","Industrial","N3uron","Modbus"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/reTerminalDM_N3uron_modbus_mqtt",last_update:{date:"5/6/2024",author:"Kasun Thushara and Xabier Fern\xe1ndez"}},sidebar:"ProductSidebar",previous:{title:"Connect AWS IoT Core with N3uron",permalink:"/reTerminalDM_N3uron_AWS"},next:{title:"Integrating Historian Module for Visualizing on reTerminal DM",permalink:"/reTerminalDM_N3uron_Historian"}},l={},u=[{value:"Introduction",id:"introduction",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Hardware",id:"hardware",level:3},{value:"Software",id:"software",level:3},{value:"Modbus Module Create and Configuration",id:"modbus-module-create-and-configuration",level:2},{value:"Channel Creation and Configuration",id:"channel-creation-and-configuration",level:3},{value:"Tag Configuration",id:"tag-configuration",level:2},{value:"Create a MQTT Module Instance Within N3uron\u2019s WebUI Interface",id:"create-a-mqtt-module-instance-within-n3urons-webui-interface",level:2},{value:"Configure N3uron\u2019s MQTT Module",id:"configure-n3urons-mqtt-module",level:2},{value:"Subscribe to a Topic Using N3uron\u2019s MQTT Module",id:"subscribe-to-a-topic-using-n3urons-mqtt-module",level:2},{value:"Create a Tag",id:"create-a-tag",level:2},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],d={toc:u},c="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(c,(0,i.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"In industrial automation, Modbus stands out as one of the most common protocols, while MQTT dominates the wireless protocol domain. The potent pairing of ReTerminal DM and ",(0,r.kt)("a",{parentName:"p",href:"https://n3uron.com/"},"N3uron")," Duo facilitates efficient plant management by providing robust connectivity and data manipulation capabilities. This Wiki emphasizes the significance of Modbus TCP in industrial settings, highlighting the seamless integration of MQTT devices to further enhance connectivity."),(0,r.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,r.kt)("h3",{id:"hardware"},"Hardware"),(0,r.kt)("div",{class:"table-center"},(0,r.kt)("table",{class:"table-nobg"},(0,r.kt)("tr",{class:"table-trnobg"},(0,r.kt)("th",{class:"table-trnobg"},"reTerminal DM")),(0,r.kt)("tr",{class:"table-trnobg"}),(0,r.kt)("tr",{class:"table-trnobg"},(0,r.kt)("td",{class:"table-trnobg"},(0,r.kt)("div",{style:{textAlign:"center"}},(0,r.kt)("img",{src:"https://files.seeedstudio.com/wiki/reTerminalDM/ML/edgeimpulse/reterminaldm.png",style:{width:300,height:"auto"}})))),(0,r.kt)("tr",{class:"table-trnobg"}),(0,r.kt)("tr",{class:"table-trnobg"},(0,r.kt)("td",{class:"table-trnobg"},(0,r.kt)("div",{class:"get_one_now_container",style:{textAlign:"center"}},(0,r.kt)("a",{class:"get_one_now_item",href:"https://www.seeedstudio.com/reTerminal-DM-p-5616.html"},(0,r.kt)("strong",null,(0,r.kt)("span",null,(0,r.kt)("font",{color:"FFFFFF",size:"4"}," Get One Now \ud83d\uddb1\ufe0f"))))))))),(0,r.kt)("h3",{id:"software"},"Software"),(0,r.kt)("p",null,"We highly recommend studying the ",(0,r.kt)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/reTerminalDM_N3uron_Get_Start/"},"Getting Started with N3uron")," guide. It provides essential insights into navigating the N3uron web interface, understanding concepts such as the Web UI and Web Vision module, grasping the concept of tags, and creating basic dashboards. If you haven't explored these fundamentals yet, it's advisable to do so before proceeding further. You can access the guide through the provided link."),(0,r.kt)("h2",{id:"modbus-module-create-and-configuration"},"Modbus Module Create and Configuration"),(0,r.kt)("p",null,"Create a Module Instance Within N3uron\u2019s WebUI Interface"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Step 01: In the Navigation panel, select ",(0,r.kt)("strong",{parentName:"li"},"Config"),"."),(0,r.kt)("li",{parentName:"ul"},"Step 02: In the Explorer panel, select ",(0,r.kt)("strong",{parentName:"li"},"Modules"),"."),(0,r.kt)("li",{parentName:"ul"},"Step 03: Click on the Model menu and select ",(0,r.kt)("strong",{parentName:"li"},"New Module"),".")),(0,r.kt)("center",null,(0,r.kt)("img",{width:1e3,src:"https://files.seeedstudio.com/wiki/reTerminalDM/N3uron-mqtt-modbus/modbusmodule.PNG"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Step 04: The instance can be given any name but for the example, we will use ",(0,r.kt)("strong",{parentName:"li"},"ModbusClient"),"."),(0,r.kt)("li",{parentName:"ul"},"Step 05: Set the Module Type property to ",(0,r.kt)("strong",{parentName:"li"},"ModbusClient"),". Leave the rest of the properties as their default values and click ",(0,r.kt)("strong",{parentName:"li"},"Save"),".")),(0,r.kt)("center",null,(0,r.kt)("img",{width:400,src:"https://files.seeedstudio.com/wiki/reTerminalDM/N3uron-mqtt-modbus/modbusmodule2.PNG"})),(0,r.kt)("h3",{id:"channel-creation-and-configuration"},"Channel Creation and Configuration"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Step 01: Under the created Modbus Client and Model, select ",(0,r.kt)("strong",{parentName:"li"},"New Channel"),". Give the channel name as ",(0,r.kt)("strong",{parentName:"li"},"Client"),".")),(0,r.kt)("center",null,(0,r.kt)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reTerminalDM/N3uron-mqtt-modbus/newmodbuschannel.PNG"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Step 02: Now, we are going to communicate with the PLC using Modbus TCP. Please provide the ",(0,r.kt)("strong",{parentName:"li"},"IP address")," for the PLC and the ",(0,r.kt)("strong",{parentName:"li"},"port address"),".")),(0,r.kt)("center",null,(0,r.kt)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reTerminalDM/N3uron-mqtt-modbus/clientconfig.PNG"})),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"}," If you are using Modbus RTU, there are various configurations to consider. To do that, you need to provide details such as the COM port, baud rate, etc. For more information on configuring both Modbus RTU and TCP protocols on N3uron, refer to the provided ",(0,r.kt)("a",{parentName:"p",href:"https://docs.n3uron.com/docs/modbus-client-configuration"},"guide"),".")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Step 03: Add a device: Each channel can have one or more devices. Set a ",(0,r.kt)("strong",{parentName:"li"},"name")," for the device and proceed with the configuration. In this case, the device name is ",(0,r.kt)("strong",{parentName:"li"},"PLC"),".")),(0,r.kt)("center",null,(0,r.kt)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reTerminalDM/N3uron-mqtt-modbus/adddevice.PNG"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Step 04: There are a few settings that you can adjust through this interface. You can find more details from this link. However, for this case, we'll keep them as they are.")),(0,r.kt)("center",null,(0,r.kt)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reTerminalDM/N3uron-mqtt-modbus/deviceconfig.PNG"})),(0,r.kt)("h2",{id:"tag-configuration"},"Tag Configuration"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Step 01: Go to the ",(0,r.kt)("strong",{parentName:"li"},"WebUI"),", select ",(0,r.kt)("strong",{parentName:"li"},"Config"),", and then click on ",(0,r.kt)("strong",{parentName:"li"},"Tag"),". In the Model section, click on the menu and choose ",(0,r.kt)("strong",{parentName:"li"},"New Tag"),". Name it Q1. Normally Q is used to indicate the output coil. ")),(0,r.kt)("center",null,(0,r.kt)("img",{width:1e3,src:"https://files.seeedstudio.com/wiki/reTerminalDM/N3uron-mqtt-modbus/addtag.PNG"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Step 02: Then you need to do the following configurations. ",(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"- Source : Enabled/Yes\n- Module Type : ModbusClient \n- ModuleName: ModbusClient\n- Config: Device: Client/PLC\n- Modbus address: 008931\n- Data type: Boolean \n")),"and ",(0,r.kt)("strong",{parentName:"li"},"Save")," it.")),(0,r.kt)("center",null,(0,r.kt)("img",{width:1e3,src:"https://files.seeedstudio.com/wiki/reTerminalDM/N3uron-mqtt-modbus/tagconfig.PNG"})),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"}," It is advisable to refer to the PLC or device manufacturer's datasheet regarding Modbus addresses. There, you will find details about input, output, and holding addresses. According to these specifications, adjustments should be made in the Modbus address line in the tag configuration. For instance, if the manufacturer notates the output coil Q1 as 8193, the address should be configured as 008193. Similarly, if the network input is denoted as 1 and it is a coil type, the address should be set as 000001.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Step 03: Real-time simulation ")),(0,r.kt)("p",null,"Once connected to the system, you can view the real-time status of output coils and input coils."),(0,r.kt)("center",null,(0,r.kt)("img",{width:1e3,src:"https://files.seeedstudio.com/wiki/reTerminalDM/N3uron-mqtt-modbus/realtimeview.PNG"})),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"}," Interaction with the PLC via the N3uron interface requires appropriate access permissions, including both read and write capabilities.")),(0,r.kt)("h2",{id:"create-a-mqtt-module-instance-within-n3urons-webui-interface"},"Create a MQTT Module Instance Within N3uron\u2019s WebUI Interface"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Step 01: In the Navigation panel, select ",(0,r.kt)("strong",{parentName:"li"},"Config"),"."),(0,r.kt)("li",{parentName:"ul"},"Step 02: In the Explorer panel, select ",(0,r.kt)("strong",{parentName:"li"},"Modules"),"."),(0,r.kt)("li",{parentName:"ul"},"Step 03: Click on the Model menu and select ",(0,r.kt)("strong",{parentName:"li"},"New Module"),".")),(0,r.kt)("center",null,(0,r.kt)("img",{width:1e3,src:"https://files.seeedstudio.com/wiki/reTerminalDM/N3uron-mqtt-modbus/mqqtmodule.PNG"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Step 04: The instance can be given any name but for the example, we will use ",(0,r.kt)("strong",{parentName:"li"},"MQTT"),"."),(0,r.kt)("li",{parentName:"ul"},"Step 05: Set the Module Type property to ",(0,r.kt)("strong",{parentName:"li"},"MqttClient"),". Leave the rest of the properties as their default values and click ",(0,r.kt)("strong",{parentName:"li"},"Save"),".")),(0,r.kt)("center",null,(0,r.kt)("img",{width:1e3,src:"https://files.seeedstudio.com/wiki/reTerminalDM/N3uron-mqtt-modbus/mqqtmodule2.PNG"})),(0,r.kt)("h2",{id:"configure-n3urons-mqtt-module"},"Configure N3uron\u2019s MQTT Module"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Step 01: In the Explorer panel, select the MQTT instance you have just created.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Step 02: Click on the Model menu button and select New Connection.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Step 03: Give the New connection a name. In this example, it has been named ",(0,r.kt)("strong",{parentName:"p"},"MqqtClient"),":"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"- Destination broker : Custom \n- Authentication mode: Password\n- Username : Your Broker Username\n- Password: Your Broker Password\n- Protocol:MQTT\n- Broker URL:Broker ip\n")),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"Save")," configurations "))),(0,r.kt)("center",null,(0,r.kt)("img",{width:1e3,src:"https://files.seeedstudio.com/wiki/reTerminalDM/N3uron-mqtt-modbus/mqttchannelconfig.PNG"})),(0,r.kt)("h2",{id:"subscribe-to-a-topic-using-n3urons-mqtt-module"},"Subscribe to a Topic Using N3uron\u2019s MQTT Module"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Step 01: In the Model panel, right-click on the AWS Connection, select New Subscriber, and give it a name. In this example, we will simply use Subscriber.")),(0,r.kt)("center",null,(0,r.kt)("img",{width:400,src:"https://files.seeedstudio.com/wiki/reTerminalDM/N3uron-mqtt-modbus/mqttconnection.PNG"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Step 02: Click on it and add a name in the Topic field. In this example, we have used device/data.")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"For testing and hands-on experience, we have provided you with an ",(0,r.kt)("a",{parentName:"p",href:"https://files.seeedstudio.com/wiki/reTerminalDM/N3uron-mqtt-modbus/MQTT_N3uron.ino"},"Arduino code")," that can be run on XIAO. Additionally, you will need to input your own credentials into this code before uploading it.")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Step 03: Set the following properties using the values shown below, leaving the rest of them as their default values:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"- Qos: Qos 0.\n- Encoding: UTF8\n- Compression: None\n- Serialization: JSON\n- Data parser/Type: MqttClient JSON\n")),(0,r.kt)("p",{parentName:"li"},"And ",(0,r.kt)("strong",{parentName:"p"},"Save")," it."))),(0,r.kt)("center",null,(0,r.kt)("img",{width:600,src:"https://files.seeedstudio.com/wiki/reTerminalDM/N3uron-mqtt-modbus/subscriberconfig.PNG"})),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"}," Here, we utilize a data parser configured for MQTTClient JSON format. The XIAO device publishes data to the broker in this format. If your device does not publish data in this specific format, you will need to identify the format it uses and create a custom JavaScript code snippet to handle the devices accordingly. For further guidance, please refer to the provided ",(0,r.kt)("a",{parentName:"p",href:"https://docs.n3uron.com/docs/mqtt-client-custom-parser"},"guidelines"),".")),(0,r.kt)("h2",{id:"create-a-tag"},"Create a Tag"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Step 01: Within the Explorer panel, select ",(0,r.kt)("strong",{parentName:"li"},"Tags"),"."),(0,r.kt)("li",{parentName:"ul"},"Step 02: In the Model menu, right-click on the folder icon, select ",(0,r.kt)("strong",{parentName:"li"},"New Tag"),", and give it a name. In this example, we will use ",(0,r.kt)("strong",{parentName:"li"},"test"),".")),(0,r.kt)("center",null,(0,r.kt)("img",{width:400,src:"https://files.seeedstudio.com/wiki/reTerminalDM/N3uron-mqtt-modbus/mqtttag.PNG"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Step 03: In the Configuration panel, set the following properties using the values shown below, leaving the rest of them as their default values:"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre"},"- Type: Number.\n- Source/Enabled: Yes\n- Module Type: MqttClient\n- Module name: MQTT\n- Config/Subscriber: MqqtClient/Subscriber\n")),(0,r.kt)("p",{parentName:"li"},"Click on ",(0,r.kt)("strong",{parentName:"p"},"Save"),"."))),(0,r.kt)("center",null,(0,r.kt)("img",{width:500,src:"https://files.seeedstudio.com/wiki/reTerminalDM/N3uron-mqtt-modbus/mqtttagconfig.PNG"})),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Step 04: Real-time simulation\nOnce connected to the system, you can view the real-time status of output from the MQTT Broker.")),(0,r.kt)("center",null,(0,r.kt)("img",{width:1e3,src:"https://files.seeedstudio.com/wiki/reTerminalDM/N3uron-mqtt-modbus/realtimeview2.PNG"})),(0,r.kt)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,r.kt)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,r.kt)("div",{class:"button_tech_support_container"},(0,r.kt)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,r.kt)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,r.kt)("div",{class:"button_tech_support_container"},(0,r.kt)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,r.kt)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}m.isMDXComponent=!0}}]);