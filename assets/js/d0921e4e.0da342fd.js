"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[74577],{15680:(e,n,t)=>{t.d(n,{xA:()=>y,yg:()=>g});var a=t(96540);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,a,l=function(e,n){if(null==e)return{};var t,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var p=a.createContext({}),s=function(e){var n=a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},y=function(e){var n=s(e.components);return a.createElement(p.Provider,{value:n},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,l=e.mdxType,r=e.originalType,p=e.parentName,y=i(e,["components","mdxType","originalType","parentName"]),c=s(t),d=l,g=c["".concat(p,".").concat(d)]||c[d]||m[d]||r;return t?a.createElement(g,o(o({ref:n},y),{},{components:t})):a.createElement(g,o({ref:n},y))}));function g(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var r=t.length,o=new Array(r);o[0]=d;var i={};for(var p in n)hasOwnProperty.call(n,p)&&(i[p]=n[p]);i.originalType=e,i[c]="string"==typeof e?e:l,o[1]=i;for(var s=2;s<r;s++)o[s]=t[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},51198:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>o,default:()=>m,frontMatter:()=>r,metadata:()=>i,toc:()=>s});var a=t(58168),l=(t(96540),t(15680));const r={description:"YOLOv5 from training to deployment",title:"\u8bad\u7ec3\u90e8\u7f72YOLOv5\u76ee\u6807\u68c0\u6d4b\u6a21\u578b",keywords:["YOLOv5","we2","object detection"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/cn/ma_deploy_yolov8_pose",last_update:{date:"04/02/2024",author:"\u5927\u5e86"}},o="\u90e8\u7f72YOLOv5\u76ee\u6807\u68c0\u6d4b\u6a21\u578b",i={unversionedId:"zh-CN/TinyML/ModelAssistant/Deploy/cn_ma_deploy_yolov5",id:"zh-CN/TinyML/ModelAssistant/Deploy/cn_ma_deploy_yolov5",title:"\u8bad\u7ec3\u90e8\u7f72YOLOv5\u76ee\u6807\u68c0\u6d4b\u6a21\u578b",description:"YOLOv5 from training to deployment",source:"@site/docs/zh-CN/TinyML/ModelAssistant/Deploy/cn_ma_deploy_yolov5.md",sourceDirName:"zh-CN/TinyML/ModelAssistant/Deploy",slug:"/cn/ma_deploy_yolov8_pose",permalink:"/cn/ma_deploy_yolov8_pose",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/zh-CN/TinyML/ModelAssistant/Deploy/cn_ma_deploy_yolov5.md",tags:[],version:"current",lastUpdatedBy:"\u5927\u5e86",lastUpdatedAt:1712016e3,formattedLastUpdatedAt:"Apr 2, 2024",frontMatter:{description:"YOLOv5 from training to deployment",title:"\u8bad\u7ec3\u90e8\u7f72YOLOv5\u76ee\u6807\u68c0\u6d4b\u6a21\u578b",keywords:["YOLOv5","we2","object detection"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/cn/ma_deploy_yolov8_pose",last_update:{date:"04/02/2024",author:"\u5927\u5e86"}}},p={},s=[{value:"\u6570\u636e\u96c6\u51c6\u5907",id:"\u6570\u636e\u96c6\u51c6\u5907",level:2},{value:"\u514b\u9686YOLOv5\u5b98\u65b9\u4ed3\u5e93",id:"\u514b\u9686yolov5\u5b98\u65b9\u4ed3\u5e93",level:2},{value:"\u8bad\u7ec3",id:"\u8bad\u7ec3",level:2},{value:"\u5bfc\u51fa\u6a21\u578b\u81f3tflite",id:"\u5bfc\u51fa\u6a21\u578b\u81f3tflite",level:2},{value:"\u6a21\u578b\u56fe\u4f18\u5316",id:"\u6a21\u578b\u56fe\u4f18\u5316",level:3},{value:"\u90e8\u7f72",id:"\u90e8\u7f72",level:2}],y={toc:s},c="wrapper";function m(e){let{components:n,...t}=e;return(0,l.yg)(c,(0,a.A)({},y,t,{components:n,mdxType:"MDXLayout"}),(0,l.yg)("h1",{id:"\u90e8\u7f72yolov5\u76ee\u6807\u68c0\u6d4b\u6a21\u578b"},"\u90e8\u7f72YOLOv5\u76ee\u6807\u68c0\u6d4b\u6a21\u578b"),(0,l.yg)("div",{style:{textAlign:"center"}},(0,l.yg)("img",{src:"https://files.seeedstudio.com/sscma/static/detection_person_yolov5.png",style:{width:600,height:"auto"}})),(0,l.yg)("p",null,"\u6b64wiki\u5c06\u4ecb\u7ecd\u5982\u4f55\u8bad\u7ec3\u5b98\u65b9\u7684YOLOv5\u76ee\u6807\u68c0\u6d4b\u6a21\u578b\u53ca\u5c06\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u90e8\u7f72\u5230",(0,l.yg)("inlineCode",{parentName:"p"},"Grove Vision AI(V2)"),"\u6216",(0,l.yg)("inlineCode",{parentName:"p"},"XIAO ESP32S3"),"\u8bbe\u5907\u4e0a\u3002"),(0,l.yg)("h2",{id:"\u6570\u636e\u96c6\u51c6\u5907"},"\u6570\u636e\u96c6\u51c6\u5907"),(0,l.yg)("p",null,"\u6570\u636e\u96c6\u5efa\u8bae\u4f7f\u7528",(0,l.yg)("a",{parentName:"p",href:"https://universe.roboflow.com/"},"roboflow"),"\u5e73\u53f0\uff0c\u6b64\u5e73\u53f0\u53ef\u8fdb\u884c\u6570\u636e\u96c6\u7684\u6807\u6ce8\u4e0e\u4e00\u4e9b\u6570\u636e\u589e\u5f3a\u7b56\u7565\uff0c\u540c\u65f6\u652f\u6301\u591a\u79cd\u6570\u636e\u96c6\u683c\u5f0f\u7684\u5bfc\u51fa\u3002\u53ef\u67e5\u770byolov5\u6570\u636e\u96c6\u51c6\u5907",(0,l.yg)("a",{parentName:"p",href:"https://docs.ultralytics.com/zh/yolov5/tutorials/train_custom_data/"},"\u4ecb\u7ecd")),(0,l.yg)("h2",{id:"\u514b\u9686yolov5\u5b98\u65b9\u4ed3\u5e93"},"\u514b\u9686YOLOv5\u5b98\u65b9\u4ed3\u5e93"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"\u5728\u6b64\u9ed8\u8ba4\u4f60\u5df2\u7ecf\u6709\u4e86",(0,l.yg)("inlineCode",{parentName:"li"},"python"),"\u7684\u73af\u5883\u4e0e",(0,l.yg)("inlineCode",{parentName:"li"},"pip"),"\u5305\u7ba1\u7406\u5de5\u5177\uff0c\u4e14python>=3.8\u3002")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"# \u514b\u9686\u5b98\u65b9\u4ed3\u5e93\ngit clone https://github.com/ultralytics/yolov5\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"\u5b89\u88c5\u6240\u9700\u73af\u5883")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"# \u5207\u81f3yolov5\u6587\u4ef6\u5939\u4e0b\ncd yolov5\n# \u4f7f\u7528pip\u5b89\u88c5\u6240\u9700\u4f9d\u8d56\npip install -r requirements.txt\n")),(0,l.yg)("h2",{id:"\u8bad\u7ec3"},"\u8bad\u7ec3"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5f00\u59cb\u8bad\u7ec3\u6a21\u578b")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"python train.py  --weights yolov5n.pt --data ${\u6570\u636e\u96c6yaml\u6587\u4ef6\u8def\u5f84} --imgsz 192\n")),(0,l.yg)("h2",{id:"\u5bfc\u51fa\u6a21\u578b\u81f3tflite"},"\u5bfc\u51fa\u6a21\u578b\u81f3tflite"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"\u8bad\u7ec3\u5b8c\u6210\u540e\u7684\u6a21\u578b\u4f1a\u5728",(0,l.yg)("inlineCode",{parentName:"li"},"runs/train/exp*/weights/"),"\u6587\u4ef6\u5939\u4e0b\uff0c\u786e\u8ba4\u4f60\u7684\u6a21\u578b\u7684\u8bc4\u4f30\u6307\u6807\u8fbe\u5230\u4f60\u7684\u9700\u6c42"),(0,l.yg)("li",{parentName:"ul"},"\u9996\u5148\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5bfc\u51fasaved_model\u683c\u5f0f\u6a21\u578b")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"python export.py --weights ${\u4f60\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u8def\u5f84}  --imgsz 192 --include saved_model\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"\u4e4b\u540e\u4f7f\u7528\u4ee5\u4e0b\u4ee3\u7801\u5c06\u5bfc\u51fa\u7684",(0,l.yg)("inlineCode",{parentName:"li"},"saved_model"),"\u6a21\u578b\u91cf\u5316\u5e76\u8f6c\u6210",(0,l.yg)("inlineCode",{parentName:"li"},"tflite"),"\u6a21\u578b\u683c\u5f0f")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-python"},"import tensorflow as tf\nimport os.path as osp\n\n\n\nconverter = tf.lite.TFLiteConverter.from_saved_model(r'\u4f60\u7684saved_model\u6587\u4ef6\u5939\u8def\u5f84')\n\ntflite_model = converter.convert()\n\ndef representative_dataset():\n  for _ in range(100):\n    yield [\n        tf.random.uniform((1, 192, 192\n                           , 3))\n    ]\n\nconverter.optimizations = [\n    tf.lite.Optimize.DEFAULT\n]\nconverter.target_spec.supported_ops = [\n    tf.lite.OpsSet.TFLITE_BUILTINS_INT8\n]\nconverter.inference_input_type = tf.int8\nconverter.inference_output_type = tf.int8\nconverter.representative_dataset = representative_dataset\n\ntflite_quant_model = converter.convert()\n\nwith open(osp.join(r'\u9700\u8981\u4fdd\u5b58\u7684\u4f4d\u7f6e\u8def\u5f84','yolov5n_int8.tflite'), 'wb') as f:\n    f.write(tflite_quant_model)\n\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"\u4e4b\u540e\u4f1a\u6240\u4fdd\u5b58\u8def\u5f84\u6587\u4ef6\u5939\u4e0b\u770b\u5230\u4e00\u4e2a",(0,l.yg)("inlineCode",{parentName:"li"},"yolov5n_int8.tflite"),"\u6a21\u578b\u6587\u4ef6")),(0,l.yg)("h3",{id:"\u6a21\u578b\u56fe\u4f18\u5316"},"\u6a21\u578b\u56fe\u4f18\u5316"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("inlineCode",{parentName:"li"},"Grove Vision AI(V2)"),"\u652f\u6301\u4f7f\u7528",(0,l.yg)("inlineCode",{parentName:"li"},"vela"),"\u4f18\u5316\u540e\u7684\u6a21\u578b\uff0c\u540c\u65f6\u4e5f\u80fd\u52a0\u901f\u6a21\u578b\u7684\u63a8\u7406\uff0c\u9996\u5148\u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5",(0,l.yg)("inlineCode",{parentName:"li"},"vela"),"\u547d\u4ee4\u884c\u5de5\u5177")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"\npip3 install ethos-u-vela\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"\u4e4b\u540e\u9700\u8981",(0,l.yg)("a",{parentName:"li",href:"https://files.seeedstudio.com/sscma/configs/vela_config.ini"},"\u4e0b\u8f7d"),(0,l.yg)("inlineCode",{parentName:"li"},"vela"),"\u76f8\u5173\u7684\u914d\u7f6e\u6587\u4ef6,\u6216\u8005\u590d\u5236\u4e0b\u5217\u7684\u5185\u5bb9\u5230\u4e00\u4e2a\u6587\u4ef6\u5185\uff0c\u53ef\u547d\u540d\u4e3a",(0,l.yg)("inlineCode",{parentName:"li"},"vela_config.ini"))),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"; file: my_vela_cfg.ini ; ----------------------------------------------------------------------------- \n; Vela configuration file ; ----------------------------------------------------------------------------- \n; System Configuration \n\n; My_Sys_Cfg \n[System_Config.My_Sys_Cfg] \ncore_clock=400e6 \naxi0_port=Sram \naxi1_port=OffChipFlash \nSram_clock_scale=1.0 \nSram_burst_length=32 \nSram_read_latency=16 \nSram_write_latency=16 \nDram_clock_scale=0.75 \nDram_burst_length=128 \nDram_read_latency=500 \nDram_write_latency=250 \nOnChipFlash_clock_scale=0.25 \nOffChipFlash_clock_scale=0.015625 \nOffChipFlash_burst_length=32 \nOffChipFlash_read_latency=64 \nOffChipFlash_write_latency=64 \n; ----------------------------------------------------------------------------- \n; Memory Mode \n; My_Mem_Mode_Parent \n[Memory_Mode.My_Mem_Mode_Parent] \nconst_mem_area=Axi1 \narena_mem_area=Axi0 \ncache_mem_area=Axi0\n")),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},"\u6700\u540e\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\uff0c\u8fdb\u884c\u56fe\u4f18\u5316")),(0,l.yg)("pre",null,(0,l.yg)("code",{parentName:"pre",className:"language-bash"},"vela --accelerator-config ethos-u55-64 \\ \n    --config vela_config.ini \\\n    --system-config My_Sys_Cfg \\\n    --memory-mode My_Mem_Mode_Parent \\\n    --output-dir ${\u4f18\u5316\u540e\u7684\u6a21\u578b\u4fdd\u5b58\u8def\u5f84} \\\n    ${\u9700\u8981\u88ab\u4f18\u5316\u7684tflite\u6a21\u578b\u8def\u5f84}\n")),(0,l.yg)("h2",{id:"\u90e8\u7f72"},"\u90e8\u7f72"),(0,l.yg)("ul",null,(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},"\u9700\u8981\u90e8\u7f72\u7684\u6a21\u578b\u6587\u4ef6\u662f\u4ee5\u4e0a\u5bfc\u51fa\u7684",(0,l.yg)("inlineCode",{parentName:"p"},"tflite"),"\u6587\u4ef6\uff0c\u53ef\u6839\u636e\u4ee5\u4e0b\u6559\u7a0b\u5c06\u6a21\u578b\u6587\u4ef6\u70e7\u5f55\u81f3\u76ee\u6807\u8bbe\u5907")),(0,l.yg)("li",{parentName:"ul"},(0,l.yg)("p",{parentName:"li"},"\u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u4f7f\u7528\u6211\u4eec\u7684\u7f51\u9875\u5de5\u5177\u5c06\u8bad\u7ec3\u597d\u7684tflite\u6a21\u578b\u70e7\u5f55\u5230\u8bbe\u5907\u4e2d\uff0c\u5176\u8be6\u7ec6\u64cd\u4f5c\u6211\u4eec\u63d0\u4f9b\u7684",(0,l.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/ModelAssistant_Deploy_Overview/"},"\u90e8\u7f72\u6559\u7a0b"),"\u8fdb\u884c"))),(0,l.yg)("p",null,(0,l.yg)("inlineCode",{parentName:"p"},"\u6ce8\u610f:"),"\u7531\u4e8e",(0,l.yg)("inlineCode",{parentName:"p"},"ESP32S3"),"\u8bbe\u5907\u4e0d\u652f\u6301\u7ecf\u8fc7",(0,l.yg)("inlineCode",{parentName:"p"},"vela"),"\u56fe\u4f18\u5316\u540e\u7684\u6a21\u578b\u90e8\u7f72\uff0c\u56e0\u6b64\u5982\u679c\u4f60\u60f3\u5c06\u6a21\u578b\u90e8\u7f72\u5230",(0,l.yg)("inlineCode",{parentName:"p"},"XIAO ESP32S3"),"\u8bbe\u5907\u4e0a\u4e0d\u9700\u8981\u8fdb\u884c",(0,l.yg)("inlineCode",{parentName:"p"},"tflite"),"\u6a21\u578b\u56fe\u4f18\u5316\u3002"))}m.isMDXComponent=!0}}]);