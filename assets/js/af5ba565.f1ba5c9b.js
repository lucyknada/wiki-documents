"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[93350],{15680:(e,r,t)=>{t.d(r,{xA:()=>d,yg:()=>m});var i=t(96540);function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function n(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,i)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?n(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function s(e,r){if(null==e)return{};var t,i,a=function(e,r){if(null==e)return{};var t,i,a={},n=Object.keys(e);for(i=0;i<n.length;i++)t=n[i],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)t=n[i],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=i.createContext({}),p=function(e){var r=i.useContext(l),t=r;return e&&(t="function"==typeof e?e(r):o(o({},r),e)),t},d=function(e){var r=p(e.components);return i.createElement(l.Provider,{value:r},e.children)},u="mdxType",g={inlineCode:"code",wrapper:function(e){var r=e.children;return i.createElement(i.Fragment,{},r)}},c=i.forwardRef((function(e,r){var t=e.components,a=e.mdxType,n=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=p(t),c=a,m=u["".concat(l,".").concat(c)]||u[c]||g[c]||n;return t?i.createElement(m,o(o({ref:r},d),{},{components:t})):i.createElement(m,o({ref:r},d))}));function m(e,r){var t=arguments,a=r&&r.mdxType;if("string"==typeof e||a){var n=t.length,o=new Array(n);o[0]=c;var s={};for(var l in r)hasOwnProperty.call(r,l)&&(s[l]=r[l]);s.originalType=e,s[u]="string"==typeof e?e:a,o[1]=s;for(var p=2;p<n;p++)o[p]=t[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,t)}c.displayName="MDXCreateElement"},10261:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>l,contentTitle:()=>o,default:()=>g,frontMatter:()=>n,metadata:()=>s,toc:()=>p});var i=t(58168),a=(t(96540),t(15680));const n={description:"Pre-compiled Arduino Libraries Usage",title:"Pre-compiled Arduino Libraries Usage",keywords:["Sorftware"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/Software-Static-Library",last_update:{date:"1/16/2023",author:"jianjing Huang"}},o=void 0,s={unversionedId:"Top_Brand/Arduino/Tutorials/Arduino_Basic_Usage/Software-Static-Library",id:"Top_Brand/Arduino/Tutorials/Arduino_Basic_Usage/Software-Static-Library",title:"Pre-compiled Arduino Libraries Usage",description:"Pre-compiled Arduino Libraries Usage",source:"@site/docs/Top_Brand/Arduino/Tutorials/Arduino_Basic_Usage/Software-Static-Library.md",sourceDirName:"Top_Brand/Arduino/Tutorials/Arduino_Basic_Usage",slug:"/Software-Static-Library",permalink:"/Software-Static-Library",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Top_Brand/Arduino/Tutorials/Arduino_Basic_Usage/Software-Static-Library.md",tags:[],version:"current",lastUpdatedBy:"jianjing Huang",lastUpdatedAt:1673827200,formattedLastUpdatedAt:"Jan 16, 2023",frontMatter:{description:"Pre-compiled Arduino Libraries Usage",title:"Pre-compiled Arduino Libraries Usage",keywords:["Sorftware"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/Software-Static-Library",last_update:{date:"1/16/2023",author:"jianjing Huang"}},sidebar:"ProductSidebar",previous:{title:"SPI User Guide for Arduino Boards",permalink:"/Software-SPI"},next:{title:"Arduino Common Error",permalink:"/Arduino_Common_Error"}},l={},p=[{value:"Getting Started",id:"getting-started",level:2},{value:"Having Troubles?",id:"having-troubles",level:3},{value:"Resources",id:"resources",level:2},{value:"FAQ",id:"faq",level:2},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],d={toc:p},u="wrapper";function g(e){let{components:r,...t}=e;return(0,a.yg)(u,(0,i.A)({},d,t,{components:r,mdxType:"MDXLayout"}),(0,a.yg)("p",null,"To improve compile time of big projects in Arduino, you can use one of the newer features introduced in Arduino IDE (>=1.8.6), ",(0,a.yg)("strong",{parentName:"p"},"static (pre-compiled) libraries")," for your Arduino Sketches."),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/StaticLibraries/Banner.png"})),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"Why use pre-compiled libraries?")),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},"The pre-compiled library allows to share the functions of the library without exposing the source code.")),(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("p",{parentName:"li"},"The only limitation of pre-compiled libraries is that they are only valid for boards or MCUs that have been compiled for."))),(0,a.yg)("h2",{id:"getting-started"},"Getting Started"),(0,a.yg)("p",null,"Let's take an Arduino library as example and convert it to pre-compiled library. Here I will use ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/Seeed-Studio/Seeed_Arduino_LIS3DHTR"},(0,a.yg)("strong",{parentName:"a"},"Seeed_Arduino_LIS3DHTR"))," as Arduino library and ",(0,a.yg)("a",{parentName:"p",href:"https://www.seeedstudio.com/Wio-Terminal-p-4509.html"},(0,a.yg)("strong",{parentName:"a"},"Wio Terminal"))," as board option."),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"STEP1. Arduino Library Configurations")),(0,a.yg)("p",null,"Navigate to the library root path and open the ",(0,a.yg)("inlineCode",{parentName:"p"},"library.properties")," file and add the following and save the file."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-properties"},"dot_a_linkage=true\n")),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/StaticLibraries/dot.png"})),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"STEP.2 Arduino IDE Set-up")),(0,a.yg)("p",null,"Open Arduino IDE, and navigate to ",(0,a.yg)("strong",{parentName:"p"},"Settings"),'. Make sure that the "',(0,a.yg)("strong",{parentName:"p"},"Show verbose output during: compilation and upload"),'" are ticked.'),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/StaticLibraries/Arduino-IDE.png"})),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"STEP.3 Obtaining Temporaty Build Location and Board Framework Flag")),(0,a.yg)("p",null,"Select ",(0,a.yg)("strong",{parentName:"p"},"Wio Terminal")," as Board. Compile any sketch that has an ",(0,a.yg)("strong",{parentName:"p"},"#include directive for your library"),". This could just be a bare minimum sketch. In my case, it's ",(0,a.yg)("inlineCode",{parentName:"p"},"#include<LIS3DHTR.h>"),"."),(0,a.yg)("p",null,"After it's compilation, check the compile log windows and find the location of temporary build folder. This should be printed out in the final command of the output. For example, in my case the command is:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-sh"},"/Users/ansonhe/Library/Arduino15/packages/Seeeduino/tools/arm-none-eabi-gcc/7-2017q4/bin/arm-none-eabi-size -A /var/folders/7g/10kskmw90bg08j_g_r7flwq40000gn/T/arduino_build_37343/pre-compile.ino.elf\n")),(0,a.yg)("p",null,"And so the ",(0,a.yg)("strong",{parentName:"p"},"temporary build path")," is:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-sh"},"/var/folders/7g/10kskmw90bg08j_g_r7flwq40000gn/T/arduino_build_37343\n")),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/StaticLibraries/buildpath.png"})),(0,a.yg)("p",null,"Copy this path and will be used later. Also one more thing to be noted is that to find the ",(0,a.yg)("strong",{parentName:"p"},(0,a.yg)("inlineCode",{parentName:"strong"},"-mcpu="))," flag to get the board framework flag compiled for the selected board. In my case, Wio Terminal is labelled as:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-sh"},"-mcpu=cortex-m4\n")),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/StaticLibraries/mcu.png"})),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"STEP.4 Copy the ",(0,a.yg)("inlineCode",{parentName:"strong"},".a")," file to the Library Folder")),(0,a.yg)("p",null,"Navigate to the temporary build path folder, and navigate to ",(0,a.yg)("inlineCode",{parentName:"p"},"libraries")," -> ",(0,a.yg)("inlineCode",{parentName:"p"},"Seeed_Arduino_LIS3DHTR")," and you should see a ",(0,a.yg)("inlineCode",{parentName:"p"},"Seeed_Arduino_LIS3DHTR.a")," file."),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/StaticLibraries/a.png"})),(0,a.yg)("p",null,"Copy the ",(0,a.yg)("inlineCode",{parentName:"p"},"Seeed_Arduino_LIS3DHTR.a")," file from the {temporary build folder}/libraries/{library name} folder to the ",(0,a.yg)("strong",{parentName:"p"},"Arduino/libraries/{library name}/src/{Board Framework Flag}")," sub-folder of your library folder. In my case, it is placed under ",(0,a.yg)("strong",{parentName:"p"},(0,a.yg)("inlineCode",{parentName:"strong"},"src/cortex-m4")),"."),(0,a.yg)("p",null,"Rename the ",(0,a.yg)("inlineCode",{parentName:"p"},".a"),' file, appending "lib" to the start of the name. In my case, it becomes ',(0,a.yg)("inlineCode",{parentName:"p"},"libSeeed_Arduino_LIS3DHTR.a"),"."),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/StaticLibraries/library.png"})),(0,a.yg)("p",null,(0,a.yg)("strong",{parentName:"p"},"STEP.5 Adding Pre-Compiled Flag")),(0,a.yg)("p",null,"Now, we can navigate back to the ",(0,a.yg)("inlineCode",{parentName:"p"},"library.properties")," and remove ",(0,a.yg)("inlineCode",{parentName:"p"},"dot_a_linkage=true")," and add the following flags:"),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-properties"},"precompiled=true\nldflags=-lSeeed_Arduino_LIS3DHTR\n")),(0,a.yg)("p",null,"where the ",(0,a.yg)("inlineCode",{parentName:"p"},"ldflags")," is ",(0,a.yg)("inlineCode",{parentName:"p"},"-l+{library name}"),"."),(0,a.yg)("admonition",{type:"note"},(0,a.yg)("pre",{parentName:"admonition"},(0,a.yg)("code",{parentName:"pre"},'Note that you don\'t specify the "lib" part of the filename in the flag.\n'))),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/StaticLibraries/pre-compiled.png"})),(0,a.yg)("p",null,"Now, you can remove the ",(0,a.yg)("strong",{parentName:"p"},(0,a.yg)("inlineCode",{parentName:"strong"},".cpp"))," files from the ",(0,a.yg)("inlineCode",{parentName:"p"},"src")," of the library folders and Arduino IDE will use the pre-compiled library!"),(0,a.yg)("h3",{id:"having-troubles"},"Having Troubles?"),(0,a.yg)("p",null,"For some reasons, some boards may require the ",(0,a.yg)("inlineCode",{parentName:"p"},".a")," file further inside the ",(0,a.yg)("inlineCode",{parentName:"p"},"src")," file. For example, Wio Terminal is the case. If you having the same problem, please follow through."),(0,a.yg)("p",null,"Going through the compile log information, you will see that a path that the IDE is looking:"),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/StaticLibraries/path.png"})),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre"},'/Users/ansonhe/Documents/Arduino/libraries/Seeed_Arduino_LIS3DHTR/src/cortex-m4/fpv4-sp-d16-hard" does not exist\n')),(0,a.yg)("p",null,"So only need to put the ",(0,a.yg)("inlineCode",{parentName:"p"},"libSeeed_Arduino_LIS3DHTR.a")," file inside the ",(0,a.yg)("inlineCode",{parentName:"p"},"fpv4-sp-d16-hard")," under ",(0,a.yg)("inlineCode",{parentName:"p"},"cortex-m4"),"."),(0,a.yg)("div",{align:"center"},(0,a.yg)("img",{src:"https://files.seeedstudio.com/wiki/StaticLibraries/finalpath.png"})),(0,a.yg)("p",null,"Now, the Arduino will pick up the pre-compiled library path!"),(0,a.yg)("p",null,"Here will also provide an example that uses static library ",(0,a.yg)("a",{parentName:"p",href:"https://github.com/Seeed-Studio/Seeed_Arduino_MG126"},(0,a.yg)("strong",{parentName:"a"},"here")),". Please also use this as reference."),(0,a.yg)("h2",{id:"resources"},"Resources"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},(0,a.yg)("a",{parentName:"li",href:"https://medium.com/@nickteixeira/shared-dynamic-libraries-vs-static-libraries-differences-in-performance-2716f5b3c826#:~:text=Advantages%3A,is%20already%20present%20in%20memory"},"Shared (dynamic) Libraries vs. Static Libraries \u2014Differences in performance"))),(0,a.yg)("h2",{id:"faq"},"FAQ"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"One thing to be noted is that, this pre-compiled library feature only supports Arduino IDE >= ",(0,a.yg)("strong",{parentName:"li"},(0,a.yg)("inlineCode",{parentName:"strong"},"1.8.6")),", so please update to the latest version of Arduino IDE to avoid this error.")),(0,a.yg)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,a.yg)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,a.yg)("div",{class:"button_tech_support_container"},(0,a.yg)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,a.yg)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,a.yg)("div",{class:"button_tech_support_container"},(0,a.yg)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,a.yg)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}g.isMDXComponent=!0}}]);