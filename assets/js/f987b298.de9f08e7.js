"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[26084],{15680:(e,t,a)=>{a.d(t,{xA:()=>p,yg:()=>c});var n=a(96540);function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t){if(null==e)return{};var a,n,s=function(e,t){if(null==e)return{};var a,n,s={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(s[a]=e[a]);return s}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var l=n.createContext({}),m=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},p=function(e){var t=m(e.components);return n.createElement(l.Provider,{value:t},e.children)},h="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,s=e.mdxType,i=e.originalType,l=e.parentName,p=r(e,["components","mdxType","originalType","parentName"]),h=m(a),u=s,c=h["".concat(l,".").concat(u)]||h[u]||g[u]||i;return a?n.createElement(c,o(o({ref:t},p),{},{components:a})):n.createElement(c,o({ref:t},p))}));function c(e,t){var a=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var i=a.length,o=new Array(i);o[0]=u;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r[h]="string"==typeof e?e:s,o[1]=r;for(var m=2;m<i;m++)o[m]=a[m];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},87957:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>g,frontMatter:()=>i,metadata:()=>r,toc:()=>m});var n=a(58168),s=(a(96540),a(15680));const i={description:"Tango with Home Assistant and SenseCAP Sensors",title:"Tango with Home Assistant and SenseCAP Sensors",keywords:["LoRaWAN","Sensor","Home Assistant","SenseCAP"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/home_assistant_with_sensecap_lorawan_sensors",last_update:{date:"9/14/2023",author:"Jessie"}},o=void 0,r={unversionedId:"Sensor/SenseCAP/Applications/Home_Assistant_X_SenseCAP_LoRaWAN_Sensors",id:"Sensor/SenseCAP/Applications/Home_Assistant_X_SenseCAP_LoRaWAN_Sensors",title:"Tango with Home Assistant and SenseCAP Sensors",description:"Tango with Home Assistant and SenseCAP Sensors",source:"@site/docs/Sensor/SenseCAP/Applications/Home_Assistant_X_SenseCAP_LoRaWAN_Sensors.md",sourceDirName:"Sensor/SenseCAP/Applications",slug:"/home_assistant_with_sensecap_lorawan_sensors",permalink:"/home_assistant_with_sensecap_lorawan_sensors",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Sensor/SenseCAP/Applications/Home_Assistant_X_SenseCAP_LoRaWAN_Sensors.md",tags:[],version:"current",lastUpdatedBy:"Jessie",lastUpdatedAt:1694649600,formattedLastUpdatedAt:"Sep 14, 2023",frontMatter:{description:"Tango with Home Assistant and SenseCAP Sensors",title:"Tango with Home Assistant and SenseCAP Sensors",keywords:["LoRaWAN","Sensor","Home Assistant","SenseCAP"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/home_assistant_with_sensecap_lorawan_sensors",last_update:{date:"9/14/2023",author:"Jessie"}},sidebar:"ProductSidebar",previous:{title:"SenseCAP Decoder",permalink:"/SenseCAP_Decoder"},next:{title:"5 Minutes to Develop an Industrial LoRaWAN Sensor",permalink:"/develop_an_industrial_lorawan_sensor"}},l={},m=[{value:"Install home assistant on a Raspberry Pi",id:"install-home-assistant-on-a-raspberry-pi",level:3},{value:"Onboard the SenseCAP sensor with App",id:"onboard-the-sensecap-sensor-with-app",level:3},{value:"Add MQTT integration",id:"add-mqtt-integration",level:3},{value:"Add entities",id:"add-entities",level:3},{value:"Create a sensor data dashboard",id:"create-a-sensor-data-dashboard",level:3},{value:"Resource",id:"resource",level:3}],p={toc:m},h="wrapper";function g(e){let{components:t,...a}=e;return(0,s.yg)(h,(0,n.A)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,s.yg)("p",null,"Share a way to integrate LoRaWAN\xae Sensor into Home Assistant."),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527151/_HMPRnIpF0p.blob?auto=compress%2Cformat&w=900&h=675&fit=min",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"There are already enough intelligent devices(sensors, lights, switches) in the smart home playground, and you might already have multiple Apps from Apple Homekit, Google Home, and Amazon Alexa to serve different devices. It\u2019s highly required to connect all of them with each other in one place. I read the news recently in Sep 2022 that matter 1.0 was released and aim to uniform the ecosystem. however, this will definitely take time."),(0,s.yg)("p",null,"Actually, before the matter was released years ago, ",(0,s.yg)("a",{parentName:"p",href:"https://www.home-assistant.io/"},"Home Assistant")," is one of the best platforms to build a fully customized smart home ecosystem, integrating mainstream devices and setting automation rules to make your home a better and smarter place. That is definitely something I want to learn and share the experience."),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527037/image_AC7YowxKbT.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"In this series of articles, I will share how I build a decent smart home in Home Assistant and use sensors from Seeed Studio SenseCAP products. And this is the first milestone."),(0,s.yg)("p",null,"Running a home assistant from scratch and integrating SenseCAP weather sensors."),(0,s.yg)("p",null,"Here are the steps to get there:"),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},"Install home assistant on a Raspberry Pi"),(0,s.yg)("li",{parentName:"ul"},"Get the SenseCAP sensor onboard with App"),(0,s.yg)("li",{parentName:"ul"},"Add MQTT integration and subscribe to the SenseCAP data"),(0,s.yg)("li",{parentName:"ul"},"Add entities with different sensor measurement values."),(0,s.yg)("li",{parentName:"ul"},"Create a sensor data dashboard")),(0,s.yg)("h3",{id:"install-home-assistant-on-a-raspberry-pi"},"Install home assistant on a Raspberry Pi"),(0,s.yg)("p",null,"To get started with Home Assistant, the ",(0,s.yg)("a",{parentName:"p",href:"https://www.home-assistant.io/getting-started/"},"official tutorial")," is very useful."),(0,s.yg)("p",null,"There are many devices and platforms to run home assistant, I happen to have one unused Raspberry Pi, so I will start from ",(0,s.yg)("a",{parentName:"p",href:"https://www.home-assistant.io/installation/raspberrypi"},"here"),"."),(0,s.yg)("p",null,"Instead of using the Balena etcher to flash the SD card, I prefer using the official ",(0,s.yg)("a",{parentName:"p",href:"https://www.raspberrypi.com/software/"},"Raspberry Pi Imager"),", it is lightweight and simple to use."),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527038/image_xXpG0MaQJS.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"Get yourself a Micro SD card bigger than 32GB and plug it into your computer, here I use MacBook as an example."),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527041/image_vb64IHZx5B.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"Navigate to other specific -purpose OS and select the Home Assistant and Home Automation."),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527042/image_xf5OXUliuo.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"Select Home Assistant"),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527044/image_tIB5zVlxm5.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"Select the Home Assistant OS version for RPi4"),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527045/image_UQdhYJt88T.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"Then select the SD card drive, be careful, and DO NOT choose the wrong disk, which may format your driver and lose all the valuable data."),(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527046/image_Le62Kc3fGH.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:470,height:"auto"}),(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527047/image_tiE1gwdlBw.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:470,height:"auto"}),(0,s.yg)("p",null,"It may take a while to download the Home Assistant image depending on your internet speed."),(0,s.yg)("p",null,"Then insert the micro SD card into Raspberry Pi and connect one ethernet cable to it. boot it up, the Red LED should stay red and Green LED will start to flash, if the green LED does not flash, that indicates something is wrong during image flashing."),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527053/image_UaCcGJHjzs.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"go to ",(0,s.yg)("inlineCode",{parentName:"p"},"http://homeassistant.local:8123/")," and wait for the installation to finish."),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527051/image_rEn7iALm78.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:400,height:"auto"})),(0,s.yg)("p",null,"Following this ",(0,s.yg)("a",{parentName:"p",href:"https://www.home-assistant.io/getting-started/onboarding/"},"link")," to register your Home Assistant account and login. "),(0,s.yg)("p",null,"Bingo Finally, you have your Home Assitant installed."),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527055/image_5mAwRA0PMG.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("h3",{id:"onboard-the-sensecap-sensor-with-app"},"Onboard the SenseCAP sensor with App"),(0,s.yg)("p",null,"SenseCAP is a series of industrial sensor devices, and gateway product, among which, the S210x LoRaWAN sensor are mainly built for the long-range and battery-powered scenario."),(0,s.yg)("p",null,"I want to use the new launch ",(0,s.yg)("a",{parentName:"p",href:"https://www.seeedstudio.com/sensecap-s2120-lorawan-8-in-1-weather-sensor-p-5436.html"},"S2120 Weather Station"),", and deploy it on the top of my roof, which is 6 floors high, so LoRa's long-distance communication feature did the job well. It already comes with all the accessories for quick installation."),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527056/image_61yawsK9oe.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:600,height:"auto"})),(0,s.yg)("p",null,"The Weather Station works as a standard LoRaWAN device, so I can use a ",(0,s.yg)("a",{parentName:"p",href:"https://www.seeedstudio.com/SenseCAP-Multi-Platform-LoRaWAN-Indoor-Gateway-SX1302-EU868-p-5471.html"},"SenseCAP M2 indoor LoRaWAN gateway")," in my home, it has a 3dBi antenna with a magnet base."),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527058/image_BRnDKw5tLD.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:600,height:"auto"})),(0,s.yg)("p",null,"Next, download SenseCAP Mate App and register an account."),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://files.seeedstudio.com/wiki/SenseCAP/Tracker/app_downlaod.png",alt:"pir",width:500,height:"auto"})),(0,s.yg)("p",null,"just for your reference, this video is coming from Seeed Studio that demonstrates the basic onboarding process."),(0,s.yg)("iframe",{class:"youtube-video",src:"https://youtu.be/TUQ9UmF7e7A",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0}),(0,s.yg)("p",null,"Connect the M2 LoRaWAN gateway to the internet with an ethernet cable and connect the antenna before you power it on, when you saw the panel RGB LED stay green, that means the gateway is set well."),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527070/image_zEm7RxadAf.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:600,height:"auto"})),(0,s.yg)("p",null,"Now let me onboard the M2 LoRaWAN gateway"),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},'Open the Mate App and go to the "device" tab',(0,s.yg)("br",null)),(0,s.yg)("li",{parentName:"ul"},'Click the "+" icon in the upper right corner to scan the gateway QR code, which is on the device label.',(0,s.yg)("br",null)),(0,s.yg)("li",{parentName:"ul"},"Name your device and set the location.")),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527073/image_xoxYLPEmeE.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"in the same way, scan the QR code to onboard the S2120 weather sensor. tap the S2120 sensor, now I can see weather data."),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},"Air Temperature"),(0,s.yg)("li",{parentName:"ul"},"Air Humidity"),(0,s.yg)("li",{parentName:"ul"},"Light Intensity"),(0,s.yg)("li",{parentName:"ul"},"Barometric Pressure"),(0,s.yg)("li",{parentName:"ul"},"Wind Direction"),(0,s.yg)("li",{parentName:"ul"},"Wind Speed"),(0,s.yg)("li",{parentName:"ul"},"Rainfall Hourly"),(0,s.yg)("li",{parentName:"ul"},"UV Index")),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527082/image_Tr85o39OKT.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),"and now it is time to go to my roof and install it on a pole.",(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527110/img_3683_qMfEaREbxR.jpeg?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:600,height:"auto"})),(0,s.yg)("p",null,"I also have another ",(0,s.yg)("a",{parentName:"p",href:"https://www.seeedstudio.com/SenseCAP-S2103-LoRaWAN-CO2-Temperature-and-Humidity-Sensor-p-5356.html"},"S2103 CO2, Temperature, and Humidity Sensor")," and ",(0,s.yg)("a",{parentName:"p",href:"https://www.seeedstudio.com/SenseCAP-S2105-LoRaWAN-Soil-Temperature-Moisture-and-EC-Sensor-p-5358.html"},"S2105 Soil Moisture, Temperature and EC Sensor"),", they share the same benefits in the S210x series and the onboarding process is the same. and they are high quality with industrial standards."),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527107/image_Q55T2OnZjs.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:600,height:"auto"})),(0,s.yg)("p",null,"so I also add them to SenseCAP Mate App and install them in my bedroom and flowerpot."),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527108/image_rkLg6bXCX9.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"Now, I have everything set on the SenseCAP sensor side."),(0,s.yg)("h3",{id:"add-mqtt-integration"},"Add MQTT integration"),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},(0,s.yg)("strong",{parentName:"li"},"Why do I need the sensor data integrated into the Home Assistant?"))),(0,s.yg)("p",null,(0,s.yg)("inlineCode",{parentName:"p"},"I can take advantage of the automation flow in Home Asssitant, and the SenseCAP App currently do not have that feature.")),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},(0,s.yg)("strong",{parentName:"li"},"What is the process to get the SenseCAP data to Home Assistant?"))),(0,s.yg)("p",null,(0,s.yg)("inlineCode",{parentName:"p"},"Get your SenseCAP account API key<br/>\nRead the SenseCAP open stream API document(MQTT)<br/>\nAdd MQTT integration in Home Assistant<br/>\nSubscribe SenseCAP data via MQTT and using the API key<br/>")),(0,s.yg)("ul",null,(0,s.yg)("li",{parentName:"ul"},(0,s.yg)("strong",{parentName:"li"},"Now, Let's get to SenseCAP Portal, here you can find your"))),(0,s.yg)("p",null,(0,s.yg)("inlineCode",{parentName:"p"},"OrgID")," = Organization ID",(0,s.yg)("br",null),"\n",(0,s.yg)("inlineCode",{parentName:"p"},"Password")," = Access API keys"),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527113/image_Q3vkEnuKU2.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"My MQTT subscription info is :"),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527114/image_V4qotIEmN1.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:600,height:"auto"})),(0,s.yg)("p",null,"Go back to the Home Assistant web UI."),(0,s.yg)("p",null,"there are a lot of integrations in Home Assitant"),(0,s.yg)("p",null,(0,s.yg)("a",{parentName:"p",href:"https://www.home-assistant.io/integrations/"},"https://www.home-assistant.io/integrations/")),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527115/image_igs1T1yKAk.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"Today I will use MQTT integration to subscribe data in JSON format and use ",(0,s.yg)("a",{parentName:"p",href:"https://www.home-assistant.io/integrations/sensor.mqtt/"},"MQTT sensor integration")," to bind the sensor value to a specific entity."),(0,s.yg)("p",null,"Go to settings and move into Devices & Services"),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527116/image_udflzRbXDp.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),"Click add integration button and search MQTT",(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527118/image_VPTvmh0hMc.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"Do remember to enable the advanced setting, if you forget to input the Client ID, the setup will fail."),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527120/image_y4yAFffD4f.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"then, you can test if the subscription works, by clicking the CONFIGURE button and listening to the topic"),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527123/image_Fku83wMfdA.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527121/image_G5lZNHW9P5.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"wait for a while, there will sensor message."),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527122/image_5pGjBZ4ZqZ.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:600,height:"auto"})),"Until now, the MQTT client is set successfully.",(0,s.yg)("h3",{id:"add-entities"},"Add entities"),(0,s.yg)("p",null,'I will add multiple entities to store sensor measurement data, for example, create a new "Air temperature" entity and take the measurement value from the S2120 MQTT JSON message. and add the other sensor entities likewise.'),(0,s.yg)("p",null,"I will finish this by editing the Home Assistant configuration file"),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-cpp"},"configuration.yaml\n")),(0,s.yg)("p",null,"go to the setting and move to Add-ons, then"),(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527130/image_em25CYMJaj.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:470,height:"auto"}),(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527131/image_DfFNubnQaf.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:470,height:"auto"}),(0,s.yg)("p",null,"install it and enable show in the sidebar, and click start."),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527132/image_RNwnNZNnBX.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"now this is the important part to modify the YAML file with below scripts"),(0,s.yg)("pre",null,(0,s.yg)("code",{parentName:"pre",className:"language-cpp"},'mqtt:\n  sensor:\n    - name: "Air Temperature"\n      state_topic: "/device_sensor_data/411841915123/2CF7F1C042400055/1/+/4097"\n      unit_of_measurement: "\u2103"\n      value_template: "{{ value_json.value }}"\n    - name: "Air Humidity"\n      state_topic: "/device_sensor_data/411841915123/2CF7F1C042400055/1/+/4098"\n      unit_of_measurement: "%RH"\n      value_template: "{{ value_json.value }}"\n    - name: "Light Intensity"\n      state_topic: "/device_sensor_data/411841915123/2CF7F1C042400055/1/+/4099"\n      unit_of_measurement: "Lux"\n      value_template: "{{ value_json.value }}"\n    - name: "Barometric Pressure"\n      state_topic: "/device_sensor_data/411841915123/2CF7F1C042400055/1/+/4101"\n      unit_of_measurement: "Pa"\n      value_template: "{{ value_json.value }}"\n    - name: "Wind Direction"\n      state_topic: "/device_sensor_data/411841915123/2CF7F1C042400055/1/+/4104"\n      unit_of_measurement: "\xb0"\n      value_template: "{{ value_json.value }}"\n    - name: "Wind Speed"\n      state_topic: "/device_sensor_data/411841915123/2CF7F1C042400055/1/+/4105"\n      unit_of_measurement: "m/s"\n      value_template: "{{ value_json.value }}"\n    - name: "Rainfall Hourly"\n      state_topic: "/device_sensor_data/411841915123/2CF7F1C042400055/1/+/4113"\n      unit_of_measurement: "mm/hour"\n      value_template: "{{ value_json.value }}"\n    - name: "UV Index"\n      state_topic: "/device_sensor_data/411841915123/2CF7F1C042400055/1/+/4190"\n      unit_of_measurement: "UV"\n      value_template: "{{ value_json.value }}"\n    - name: "Soil Temperature"\n      state_topic: "/device_sensor_data/411841915123/2CF7F1C04160002C/1/+/4102"\n      unit_of_measurement: "\u2103"\n      value_template: "{{ value_json.value }}"\n    - name: "Soil Moisture"\n      state_topic: "/device_sensor_data/411841915123/2CF7F1C04160002C/1/+/4103"\n      unit_of_measurement: "%"\n      value_template: "{{ value_json.value }}"\n    - name: "Electrical Conductivity"\n      state_topic: "/device_sensor_data/411841915123/2CF7F1C04160002C/1/+/4108"\n      unit_of_measurement: "dS/m"\n      value_template: "{{ value_json.value }}"\n    - name: "Bed Room Temperature"\n      state_topic: "/device_sensor_data/411841915123/2CF7F1C04160002C/1/+/4102"\n      unit_of_measurement: "\u2103"\n      value_template: "{{ value_json.value }}"\n    - name: "Bed Room Humidity"\n      state_topic: "/device_sensor_data/411841915123/2CF7F1C04160002C/1/+/4103"\n      unit_of_measurement: "%RH"\n      value_template: "{{ value_json.value }}"\n    - name: "Bed Room CO2"\n      state_topic: "/device_sensor_data/411841915123/2CF7F1C04160002C/1/+/4108"\n      unit_of_measurement: "ppm"\n      value_template: "{{ value_json.value }}"\n')),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527133/image_sWi5PsDmyl.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"save it and go to developer tools to check if the YAML file is correct."),(0,s.yg)("p",null,"then, restart the Home Assistant"),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527134/image_4eyghWeM61.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"after restarting, make sure the MQTT is listening to the SenseCAP topic"),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527135/image_2zfIHuOxvC.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"then, go to Settings -> Devices and Services -> Entities"),(0,s.yg)("p",null,"wow~~~ all the sensor measurements are listed there."),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527136/image_nf7n2EARnh.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("h3",{id:"create-a-sensor-data-dashboard"},"Create a sensor data dashboard"),(0,s.yg)("p",null,"The last step is to add sensor entities to a dashboard."),(0,s.yg)("p",null,'go to overview and find the "Edit Dashboard"'),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527137/image_aUUUbBvb9V.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"Choose entities card, this card can include multiple sensor values in a card."),(0,s.yg)("p",null,"I will create three cards for each sensor"),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527138/image_Ebs1nBNDow.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"Finally, I have made the very basic integration and show SenseCAP sensor data in Home Assitant."),(0,s.yg)("p",{style:{textAlign:"center"}},(0,s.yg)("img",{src:"https://hackster.imgix.net/uploads/attachments/1527146/image_zV3lKcDL3T.png?auto=compress%2Cformat&w=740&h=555&fit=max",alt:"pir",width:800,height:"auto"})),(0,s.yg)("p",null,"Next, I will spend more time optimizing the UI and making it looks beautiful."),(0,s.yg)("p",null,"and using ESP32 to add new sensors to Home Assistant."),(0,s.yg)("h3",{id:"resource"},"Resource"),(0,s.yg)("p",null,(0,s.yg)("a",{parentName:"p",href:"https://www.hackster.io/Pistachio9to5/tango-with-home-assistant-and-sensecap-sensors-1ee587"},"Tango with Home Assistant and SenseCAP Sensors")))}g.isMDXComponent=!0}}]);