"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[75780],{15680:(e,t,o)=>{o.d(t,{xA:()=>g,yg:()=>y});var n=o(96540);function r(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function i(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function a(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?i(Object(o),!0).forEach((function(t){r(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function s(e,t){if(null==e)return{};var o,n,r=function(e,t){if(null==e)return{};var o,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o])}return r}var d=n.createContext({}),l=function(e){var t=n.useContext(d),o=t;return e&&(o="function"==typeof e?e(t):a(a({},t),e)),o},g=function(e){var t=l(e.components);return n.createElement(d.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var o=e.components,r=e.mdxType,i=e.originalType,d=e.parentName,g=s(e,["components","mdxType","originalType","parentName"]),u=l(o),c=r,y=u["".concat(d,".").concat(c)]||u[c]||p[c]||i;return o?n.createElement(y,a(a({ref:t},g),{},{components:o})):n.createElement(y,a({ref:t},g))}));function y(e,t){var o=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=o.length,a=new Array(i);a[0]=c;var s={};for(var d in t)hasOwnProperty.call(t,d)&&(s[d]=t[d]);s.originalType=e,s[u]="string"==typeof e?e:r,a[1]=s;for(var l=2;l<i;l++)a[l]=o[l];return n.createElement.apply(null,a)}return n.createElement.apply(null,o)}c.displayName="MDXCreateElement"},93751:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>l});var n=o(58168),r=(o(96540),o(15680));const i={description:"Learn how to set up and configure Modbus RTU communication using the Edge Box RPi 200 and Node-RED. This guide covers installing the Modbus node, configuring the Modbus getter and server, and using function blocks to extract temperature and humidity data. Follow step-by-step instructions to seamlessly integrate Modbus RTU devices with your industrial IoT setup. Achieve efficient monitoring and control of your processes with ease.",title:"Edge Box RPi 200 with Node Red and Modbus RS485",keywords:["Edge Controller","Edge-Box","Node-Red","Modbus RTU","RS 485"],image:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/EdgeBox-RPi-200-font.jpg",slug:"/edge_box_rpi_200_node_red_modbus_rs485",last_update:{date:"06/07/2024",author:"Kasun Thushara"}},a=void 0,s={unversionedId:"Edge/Raspberry_Pi_Devices/Edge_Box_RPi_200/Node_Red/Edge_Box_rpi_200_Node_red_Modbus_rtu",id:"Edge/Raspberry_Pi_Devices/Edge_Box_RPi_200/Node_Red/Edge_Box_rpi_200_Node_red_Modbus_rtu",title:"Edge Box RPi 200 with Node Red and Modbus RS485",description:"Learn how to set up and configure Modbus RTU communication using the Edge Box RPi 200 and Node-RED. This guide covers installing the Modbus node, configuring the Modbus getter and server, and using function blocks to extract temperature and humidity data. Follow step-by-step instructions to seamlessly integrate Modbus RTU devices with your industrial IoT setup. Achieve efficient monitoring and control of your processes with ease.",source:"@site/docs/Edge/Raspberry_Pi_Devices/Edge_Box_RPi_200/Node_Red/Edge_Box_rpi_200_Node_red_Modbus_rtu.md",sourceDirName:"Edge/Raspberry_Pi_Devices/Edge_Box_RPi_200/Node_Red",slug:"/edge_box_rpi_200_node_red_modbus_rs485",permalink:"/edge_box_rpi_200_node_red_modbus_rs485",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Edge/Raspberry_Pi_Devices/Edge_Box_RPi_200/Node_Red/Edge_Box_rpi_200_Node_red_Modbus_rtu.md",tags:[],version:"current",lastUpdatedBy:"Kasun Thushara",lastUpdatedAt:1717718400,formattedLastUpdatedAt:"Jun 7, 2024",frontMatter:{description:"Learn how to set up and configure Modbus RTU communication using the Edge Box RPi 200 and Node-RED. This guide covers installing the Modbus node, configuring the Modbus getter and server, and using function blocks to extract temperature and humidity data. Follow step-by-step instructions to seamlessly integrate Modbus RTU devices with your industrial IoT setup. Achieve efficient monitoring and control of your processes with ease.",title:"Edge Box RPi 200 with Node Red and Modbus RS485",keywords:["Edge Controller","Edge-Box","Node-Red","Modbus RTU","RS 485"],image:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/EdgeBox-RPi-200-font.jpg",slug:"/edge_box_rpi_200_node_red_modbus_rs485",last_update:{date:"06/07/2024",author:"Kasun Thushara"}},sidebar:"ProductSidebar",previous:{title:"Edge Box RPi 200 with Node Red and Modbus TCP",permalink:"/edge_box_rpi_200_node_red_modbus_tcp"},next:{title:"Edge Box RPi 200 with Node Red and BACnet TCP",permalink:"/edge_box_rpi_200_node_red_bacnet_tcp"}},d={},l=[{value:"Introduction",id:"introduction",level:2},{value:"Getting Start",id:"getting-start",level:2},{value:"Hardware Preparation",id:"hardware-preparation",level:3},{value:"Software Preparation",id:"software-preparation",level:3},{value:"RS485",id:"rs485",level:3},{value:"Install Modbus Node",id:"install-modbus-node",level:2},{value:"Identifying Modbus Addresses",id:"identifying-modbus-addresses",level:2},{value:"Get Data from Device",id:"get-data-from-device",level:2},{value:"Configure Modbus Getter Node",id:"configure-modbus-getter-node",level:3},{value:"Configure Modbus Server",id:"configure-modbus-server",level:3},{value:"Function Blocks Configuration",id:"function-blocks-configuration",level:3},{value:"For Temperature",id:"for-temperature",level:4},{value:"For Humidity",id:"for-humidity",level:4},{value:"Deploy",id:"deploy",level:3},{value:"Tech Support &amp; Product Discussion",id:"tech-support--product-discussion",level:2}],g={toc:l},u="wrapper";function p(e){let{components:t,...o}=e;return(0,r.yg)(u,(0,n.A)({},g,o,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h2",{id:"introduction"},"Introduction"),(0,r.yg)("p",null,"Modbus RTU (Remote Terminal Unit) is a popular protocol in industrial automation for connecting devices like sensors and controllers over serial communication lines. Known for its simplicity and reliability, it is widely used in monitoring and controlling industrial processes. The Edge Box RPi 200, an industrial IoT gateway based on the Raspberry Pi, enables integration of Modbus RTU devices with modern networks. Using Node-RED, a flow-based development tool, this wiki guides users in setting up Modbus RTU communication with the Edge Box RPi 200. It highlights applications such as energy management, environmental monitoring, and process control. This resource offers a quick and practical approach to leveraging Modbus RTU in various industrial scenarios."),(0,r.yg)("h2",{id:"getting-start"},"Getting Start"),(0,r.yg)("p",null,"Before you start this project, you may need to prepare your hardware and software in advance as described here."),(0,r.yg)("h3",{id:"hardware-preparation"},"Hardware Preparation"),(0,r.yg)("div",{class:"table-center"},(0,r.yg)("table",{class:"table-nobg"},(0,r.yg)("tr",{class:"table-trnobg"},(0,r.yg)("th",{class:"table-trnobg"},"Edge Box RPi 200")),(0,r.yg)("tr",{class:"table-trnobg"}),(0,r.yg)("tr",{class:"table-trnobg"},(0,r.yg)("td",{class:"table-trnobg"},(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://media-cdn.seeedstudio.com/media/catalog/product/cache/bb49d3ec4ee05b6f018e93f896b8a25d/1/-/1-102991599_edgebox-rpi-200-first.jpg",style:{width:300,height:"auto"}})))),(0,r.yg)("tr",{class:"table-trnobg"}),(0,r.yg)("tr",{class:"table-trnobg"},(0,r.yg)("td",{class:"table-trnobg"},(0,r.yg)("div",{class:"get_one_now_container",style:{textAlign:"center"}},(0,r.yg)("a",{class:"get_one_now_item",href:"https://www.seeedstudio.com/EdgeBox-RPi-200-CM4104016-p-5486.html"},(0,r.yg)("strong",null,(0,r.yg)("span",null,(0,r.yg)("font",{color:"FFFFFF",size:"4"}," Get One Now \ud83d\uddb1\ufe0f"))))))))),(0,r.yg)("h3",{id:"software-preparation"},"Software Preparation"),(0,r.yg)("p",null,"Edge Box comes to your hand pre-installed with Raspberry Pi OS. If you are booting this device for the first time, please read our ",(0,r.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/Edge_Box_introduction/"},"Getting Started Wiki"),". We have prepared a ",(0,r.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/Edge-Box-Getting-Started-with-Node-Red/"},"Getting Started Guide on Node-RED"),". It is recommended that you review this guide before proceeding to the wiki. In this tutorial, we are going to connect the Host PC running the YABE room temperature simulator with Node-RED running on Edge Box."),(0,r.yg)("h3",{id:"rs485"},"RS485"),(0,r.yg)("p",null,"In the Edge Box RPi 200, there is one RS-485 port. You can find more details ",(0,r.yg)("a",{parentName:"p",href:"https://wiki.seeedstudio.com/Edge_Box_introduction/#serial-ports--rs232-and-rs485"},"here"),". Before working on Node-RED, you should wire the device properly."),(0,r.yg)("h2",{id:"install-modbus-node"},"Install Modbus Node"),(0,r.yg)("p",null,"To install the Modbus node, Start Node-RED on your Edge Box. You can usually access it by opening a web browser and navigating to ",(0,r.yg)("inlineCode",{parentName:"p"},"http://<your-edgebox-ip>:1880"),". And follow these steps:"),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 1.")," Click the Settings button, indicated by a ",(0,r.yg)("strong",{parentName:"p"},"three-dash")," icon, located at the top-right corner, then select ",(0,r.yg)("strong",{parentName:"p"},"Manage palette.")),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 2.")," In the palette tab, navigate to the ",(0,r.yg)("strong",{parentName:"p"},"Install tab"),"."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 3.")," Use the node search bar to find the desired ",(0,r.yg)("a",{parentName:"p",href:"https://flows.nodered.org/node/node-red-contrib-modbus"},"Modbus node"),"."),(0,r.yg)("center",null,(0,r.yg)("img",{width:600,src:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/pallet.PNG"})),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 4.")," Click the ",(0,r.yg)("strong",{parentName:"p"},"Install")," button next to the node."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 5.")," If prompted, click the ",(0,r.yg)("strong",{parentName:"p"},"Install")," button from the dropdown warning window to confirm the installation."),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"Step 6.")," Wait for the installation process to complete. Once finished, the ",(0,r.yg)("strong",{parentName:"p"},"Install")," button should change to ",(0,r.yg)("strong",{parentName:"p"},"Installed.")),(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/nodered-edgebox1.gif",style:{width:800,height:"auto"}})),(0,r.yg)("h2",{id:"identifying-modbus-addresses"},"Identifying Modbus Addresses"),(0,r.yg)("p",null,"Identifying the correct Modbus addresses is a crucial step. It is recommended to consult the PLC,device or sensor manufacturer's datasheet for detailed information on Modbus addresses, including input, output, and holding registers."),(0,r.yg)("p",null,"Here we are going to use SHT20 RS485 Temperature Sensor. Using an RS485 hardware interface (with lightning protection design), the protocol layer is compatible with the standard industrial Modbus-Rtu protocol. When we explore data sheet we can find the Input register which is given the temperature and humidity data. "),(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/datasheet.PNG",style:{width:600,height:"auto"}})),(0,r.yg)("h2",{id:"get-data-from-device"},"Get Data from Device"),(0,r.yg)("p",null,"Required nodes: ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus Getter"),", 2 ",(0,r.yg)("inlineCode",{parentName:"p"},"Function")," nodes, 2 ",(0,r.yg)("inlineCode",{parentName:"p"},"Debug")," nodes, ",(0,r.yg)("inlineCode",{parentName:"p"},"Modbus Response"),"."),(0,r.yg)("p",null,"Drag and drop these nodes and connect them according to the following manner/order."),(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/flow-rtu.PNG",style:{width:600,height:"auto"}})),(0,r.yg)("h3",{id:"configure-modbus-getter-node"},"Configure Modbus Getter Node"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Double-click on the ",(0,r.yg)("strong",{parentName:"li"},"Modbus Getter")," node."),(0,r.yg)("li",{parentName:"ol"},"Set ",(0,r.yg)("strong",{parentName:"li"},"Unit ID")," to ",(0,r.yg)("inlineCode",{parentName:"li"},"1"),"."),(0,r.yg)("li",{parentName:"ol"},"Set ",(0,r.yg)("strong",{parentName:"li"},"FC")," to ",(0,r.yg)("inlineCode",{parentName:"li"},"FC4: Read Input Registers"),"."),(0,r.yg)("li",{parentName:"ol"},"Set ",(0,r.yg)("strong",{parentName:"li"},"Address")," to ",(0,r.yg)("inlineCode",{parentName:"li"},"1")," (as provided by the simulation device datasheet)."),(0,r.yg)("li",{parentName:"ol"},"Set ",(0,r.yg)("strong",{parentName:"li"},"Quantity")," to ",(0,r.yg)("inlineCode",{parentName:"li"},"2")," (to read two blocks).")),(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/modbus_getter.PNG",style:{width:600,height:"auto"}})),(0,r.yg)("h3",{id:"configure-modbus-server"},"Configure Modbus Server"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Under the ",(0,r.yg)("strong",{parentName:"li"},"Server")," section, click the pencil button to create a new server configuration."),(0,r.yg)("li",{parentName:"ol"},"Give the server a name."),(0,r.yg)("li",{parentName:"ol"},"Set ",(0,r.yg)("strong",{parentName:"li"},"Type")," to ",(0,r.yg)("inlineCode",{parentName:"li"},"Serial Expert"),"."),(0,r.yg)("li",{parentName:"ol"},"Set ",(0,r.yg)("strong",{parentName:"li"},"Serial Port")," to ",(0,r.yg)("inlineCode",{parentName:"li"},"/dev/ttyACM0"),"."),(0,r.yg)("li",{parentName:"ol"},"Set ",(0,r.yg)("strong",{parentName:"li"},"Serial Type")," to ",(0,r.yg)("inlineCode",{parentName:"li"},"RTU"),"."),(0,r.yg)("li",{parentName:"ol"},"Keep other settings as they are.")),(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/modbus_server_rtu.PNG",style:{width:600,height:"auto"}})),(0,r.yg)("h3",{id:"function-blocks-configuration"},"Function Blocks Configuration"),(0,r.yg)("p",null,"We use the function block to extract the relevant temperature and humidity values. The output of the getter node is a decimal number containing both integer and floating point parts, so we need to adjust using basic mathematics."),(0,r.yg)("h4",{id:"for-temperature"},"For Temperature"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"var tempMsg = { payload: msg.payload[0] / 100.0 };\nreturn tempMsg;\n")),(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/temp_javascript.PNG",style:{width:600,height:"auto"}})),(0,r.yg)("h4",{id:"for-humidity"},"For Humidity"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-javascript"},"var humidMsg = { payload: msg.payload[1] / 100.0 };\nreturn humidMsg;\n")),(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/hum_javascript.PNG",style:{width:600,height:"auto"}})),(0,r.yg)("h3",{id:"deploy"},"Deploy"),(0,r.yg)("p",null,"Press the ",(0,r.yg)("strong",{parentName:"p"},"Deploy")," button. You will see the values for humidity and temperature in the debug window."),(0,r.yg)("div",{style:{textAlign:"center"}},(0,r.yg)("img",{src:"https://files.seeedstudio.com/wiki/Edge_Box/nodered/rtu2.gif",style:{width:800,height:"auto"}})),(0,r.yg)("h2",{id:"tech-support--product-discussion"},"Tech Support & Product Discussion"),(0,r.yg)("p",null,"Thank you for choosing our products! We are here to provide you with different support to ensure that your experience with our products is as smooth as possible. We offer several communication channels to cater to different preferences and needs."),(0,r.yg)("div",{class:"button_tech_support_container"},(0,r.yg)("a",{href:"https://forum.seeedstudio.com/",class:"button_forum"}),(0,r.yg)("a",{href:"https://www.seeedstudio.com/contacts",class:"button_email"})),(0,r.yg)("div",{class:"button_tech_support_container"},(0,r.yg)("a",{href:"https://discord.gg/eWkprNDMU7",class:"button_discord"}),(0,r.yg)("a",{href:"https://github.com/Seeed-Studio/wiki-documents/discussions/69",class:"button_discussion"})))}p.isMDXComponent=!0}}]);